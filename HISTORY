ARPS VERSIONS AND MODEL MODIFICATION HISTORY

ARPS 5.3.4

  04/04/2013 (K. Brewster)
  Updated the radar remapping codes, most notably to add dual-pol 
  processing to all the codes, though, at this point dual-pol in 
  the NIDS code is not yet completely enabled, though it is compatable.  
  There are switches to enable remapping and writing of Zdr, Kdp and 
  the correlation coefficient (Rho-HV aka CC). For now this output 
  is not used, however. The correlation coefficient is used in the 
  quality control for 88D data (previously enabled for CASA) 
  regardless if the dual-pol data are written.

  Update the cloud analysis which should improve the storm-clearing 
  when the background file has storms (cycling or storm-scale 
  forecast background).

  03/18/2013 (G. Ge)
  Added namelist block plot_polys to program PLTGRID for plotting 
  polylines. It is useful for plotting hurricane tracks or tornado 
  paths, etc.

  03/12/2013 (Y. Wang)
  Expanded joinwrfh to support box extraction and added run-time
  mode for better performance.

  01/25/2013 (Y. Wang)
  Added support for NAM grid #132 with program ext2arps.

  01/24/2013 (Y. Wang and Xiaoming Hu)
  Added YSU pbl scheme from the WRFV3.4.1 package.

  01/24/2013 (K. W. Thomas)
  Fixed an a2io bug when the first record in the data file is 
  not a header.

  09/14/2012 (K. W Thomas)
  Fixed a bug with an arbitrary bad number in a2io for handling
  bad data with dul-pol radar. The bug may result loss of data 
  with all ARPS code between this fix and last update on 04/05/2012.

  09/13/2012 (Y. Wang)
  Added support of global SRTM 90 m support to ARPSTRN. Both SRTM
  data V2.1 and V4 are supported. Reorganized the program structure
  for readability. Note that namelist block had a big change.

  Fixed warm rain reflectivity scheme in ARPSPLT.

  Added hydrometeor mixing ratios when computing Baroclinic vorticity 
  generation in ARPSCALCTRAJC.

  Fixed a lot of problems in program ARPSPOST when reading old
  ARPS history files associated with CRTM module.

  08/23/2012 (Guoqing Ge)
  Fixed a bug that was introduced with vertical influence radius
  for distances.

  07/06/2012 (Y. Wang)
  Added TKE output to programs wrf2arps, nmm2arps.
  
  Fixed HDF IO with double precision compilation. 

  07/02/2012 (Guoqing Ge)
  Removed unused namelist variable "thresh_ref". Note the namelist
  compatibility issue with old namelist file.

ARPS 5.3.3

  06/18/2012 (Y. Wang)
  Fixed ARPSDIFF for old stuffs.

  06/18/2012 (Tanamachi, Robin L.)
  Added changes to accommodate multiple user-defined radars (ntwtype=10).

  05/31/2012 (Y. Wang)
  Fixed a few labelling issues with ARPSPLT, especially for the
  surface plots. And fixed two possible float execptions for
  divided by zero in ARPSPLT with data files from WRF2ARPS.

  05/10/2012 (Y. Wang)
  Reorganized arpsgrid modules and added source directory src/common/. 
  Affected programs are arps4wrf, nmm2arps, arps2coamps and coamps2arps.
  
  Unified all "readarpsmp" calls in arpsplt, arps4wrf, arps2coamps
  arpspost and arpsensic etc.

  Added capability to read command line for namelist file for the
  following programs: arps, arpsenkf, ext2arps, arps4wrf, arps2coamps
  coamps2arps (old existing feature) and new programs: arpsplt, 
  arpsextsnd, arpstintrp, arpsensic, arps3dvar, 88d2arps, ncrad2arps, 
  nids2arps, wrf2arps, etc.

  04/26/2012 (Tina Katopodes Chow)
  Added passive scalar transport to ARPS5.2. It was incorported
  to ARPS5.3 as a new pollutant concentration variable (cc) to
  the 5D scalar array (qscalar).

ARPS 5.3.2

  04/27/2012 (K. Brewster)
  Updated processing Level-2 and Level-3 TDWR data.
  Added scripts scantier2a and scantdwr in the scripts directory.
  Updated to several radremap_*.input files due to input 
  variable name changes for the netcdf data.

  radremap_TDWR.input is the prototype for the Level-2 TDWR files.

  For processing Level-3 TDWR files the users will need to use the 
  UNIDATA java program toolsUI to convert TDWR to netCDF and then 
  use ncrad2arps. Level-3 TDWR does not use the standard NIDS format.

  04/19/2012 (Y. Wang)
  Expanded joinwrfh capability to support dilution of grid
  points in X and Y direction repectively.

  04/16/2012 (F. Kong)
  Updated post-processing programs for HWT Spring 2012 
  experiments.

  Added program ens_cal that is part of calibation package 
  and share the same ens_ana.input.

  04/05/2012 (K. Thomas)
  Updated A2IO software. TDWR is full supported.

  04/03/2012 (K. Brewster)
  Added program sathdf52arps for processing satellite data from
  FY-2C (China) in hdf5 format.

  04/03/2012 (Y. Wang)
  Added ensemble pattern to "dirname" for EnKF system output.
  Added 0.125 degree support with ECMWF dataset for Shenzhen project.

  03/13/2012 (Y. Wang)
  Upgraded reflectivity formula in postcore and arpsplt. Affected 
  programs are arpsplt, arpspost, wrf2arps, wrfextsnd, nmm2arps,
  ext2arps, and coamps2arps. Changed subroutine interfaces are
  subroutines postcore, getwrfd and get_wrf_metadata.

  03/08/2012 (M. Xue)
  Added lateral boundary zone relaxation when lbcopt=1 is used, 
  and  rbc_plbc option to pressure lateral boundary condition 
  when radiation lbc is used.

  02/28/2012 (Y. Wang)
  Added W interpolation and use_input_w attributes. Added
  WRF eta output that corresponding to the ARPS vertical layers
  for ARPS4WRF. Added ARPS vertical output corresponding to
  the WRF znw for WRF2ARPS.

  02/15/2012 (F. Kong)
  Added CRTM radiation output that simulates GOES-R ABI IR 
  channels to ARPSPOST, WRF2ARPS, NMM2ARPS and COAMPS2ARPS.

  Y. Wang reorganized the code so that it can link with library
  libCRTM.a as needed only.

  02/07/2012 (K. Fan)
  Added a new program - ensscores that compute QPF scores for 
  the Spring Experiments.

  01/09/2011 (J. Gao)
  Added option to 3DVAR for spreading obs. vertically in the 
  recursive filter with the unit of kilometer.
 
  Guoqing updated the option finally on 01/12/2012.

  11/28/2011 (Y. Wang)
  Added WRF netCDF file support in ext2arps. This is for
  improving efficiency in MPI mode when interpolating coarse
  WRF domain to high resolution ARPS domain.

  10/31/2011 (Y. Wang)
  Detected and fixed a long-existing typo where trstout was
  broadcasted as an integer in initpara, which causes the program
  hanging with double precision compilation and the problem 
  was reported by Brett J. Roberts and Amy McGovern.

  10/24/2011 (Y. Wang)
  Added output directory patern '%xT' to direct output files to
  multiple folder according to the forecast time.

  Added parameter "numrdra" for ARPSEnKF to control the number of 
  radar data used when analyzing overlaid grid points.

  10/06/2011 (K. Brester)
  updated ncrad2arps with the following new features:

  1) Support for FORAY field project files, including a means to 
     specify custom variable names for reflectivity, velocity, etc
  2) Support for Taiwan radar in netCDF format
  3) Ability to add an offset to radar height and specify the 
     true-north azimuth (needed for mobile radars)
  4) Ability to specify custom Nyquist velocities to override the 
     values in the data file or provide for those radar files 
     without. (needed for the Taiwan data)
  5) Some miscellaneous clean-up and fix to some logic in 5.3 that 
     restores the generality of the list files if you want the 
     list files to be used in the way it was coded for time 
     interpolation, set tintrpopt=1 option in the input file.

  Added also netCDF reading to the radarpltncar program in 
  order to examine the raw netCDF data.

  09/21/2011 (Y. Wang)
  Introduced fine control of option "joindmp" and "readsplit" in
  MPI mode. They now controls 7 categories of the ARPS files
  separately, i.e. I - Increment file, A - Arbitrary outputs,
  T - Terrain file, S - Surface/soil file, R - Restart file,
  B - Lateral boundary files and H - History outputs. The 
  definition of run-time parameters, "inisplited" & "dmp_out_joined"
  has been changed slightly for arps, ext2arps, wrf2arps, 
  nmm2arps etc. See instruction in arps.input for details.

  09/08/2011 (Ningzhu Du)
  Fixed a typo in argument list when calling remap3dcol in
  88d2arps & ncrad2arps where velvol was misplaced with refvol.
  It was introduced since the Fortran version of 88d2arps.

  09/02/2011 (Dan Dawson)
  Fixed the newly added 2-moment microphysics scheme. Put 
  the destination of raindrop freezing into graupel instead 
  of hail, and removed the Dh_min threshold condition.  

  In brief, the new double-moment scheme by default produces 
  very little hail because most of it gets converted back to 
  graupel.  One consequence is an unrealistic forward flank 
  region at least for the Del City test case.  This change makes 
  it so that frozen rain drops become graupel particles first, 
  which can later convert to hail when they grow large enough.  
  This leads to a much more balanced partitioning between graupel 
  and hail in the storm, and more realistic reflectivity 
  structure.  

  09/01/2011 (Y. Wang)
  Updated g2lib and w3lib to NCEP's latest versions (1.2.2 and
  2.0 respectively). See README in src/external/g2lib/.
  
  08/24/2011
  Incorporated Keith's VAD changes with 88d2arps and quality
  control feature as runtime parameters.
  Added more calibrate data files in data/adas from Kevin Thomas.

  08/17/2011 (Y. Wang)
  Added composite radar feature for EnKF. This is to improve
  the parallel efficiency of processing mulitple radar 
  observations for real-time applications. Note that this feature
  only works with radar data in column format (see 88d2arps).
  The program can still read data in grid format. However, the
  composition feature has to be turned off (see new options 
  in arpsenkf.input).

ARPS 5.3.1

  08/16/2011 (Y. Wang)
  Fixed a solo-related reading issue.

  Added the 2-moment version of the Milbrandt-Yau (2005, JAS) 
  microphysics scheme. Note that it may need more work with
  code in radtrns3d.f90 & cmpclddrv.f90 and the reflectivity
  formulat in ARPSPLT should also be updated for this scheme.

  Refine SOLO data handling with 88d2arps. See docs/soloio.txt
  and input/radremap_88D.input for details.

  07/26/2011 (Dan Dawson)
  Upgraded Milbrandt-Yau multimoment microphysics scheme.

ARPS 5.3

  07/06/2011 (Y. Wang & K. Brewster)
  Incorporated the latest changes of ext2arps from arps5.2.13
  including: COAMPS data support and RUB grid #130 GRIB 2 support.

  06/20/2011 (K. Brewster)
  Added the capability for reading FORAY netCDF data from NCAR
  EOL to the netcdf-to-arps program. This is needed to process
  VORTEX2 mobile data.  Other changes include some relatively
  minor updates to the quality control, some small changes to
  nids2arps to make the output consistent with 88d2arps,
  updates to the pltradarscan program and additional checks
  for allocation status in some routines.

  06/08/2011 (Yunheng Wang)
  Added module arps_dtaread to improve IO efficiency with ARPS
  EnKF and other utilities.
  
  Merged H(x) output option from Sizhang Wang.

  04/18/2011 (Y. Wang - merged with arps5.2.13)
  Fixed another 88d2arps MPI issue that prevents it from runing
  in 1 km resolution with large number of processes. Subroutine
  distrallcol was rewritten for message passing efficiency and
  avoid memory leaking.

  Fixed 88d2arps MPI issue that was introduced with the Fortran
  version of 88d2arps.

  Fixed a long existing bug for soil interpolation with ext2arps.
  This bug was introduced in Jun 2002 when Eric remodeled the soil
  interpolation model

  Fixed solo support and radar 98 option with 88d2arps. The support 
  was broken in the Fortran version of 88d2arps.

  Added support of ECMWF dataset with ext2arps. It was for Shenzhen
  project initially.

  04/08/2011 (Fanyou Kong)
  Updated wrf2arps & arpspost for 2011 HWT experiments.
  Added two switches iltgci & ik12 with postcore and its associated
  programs, arpspost, wrf2arps, ext2arps, nmm2arps etc..

  02/10/2011 (Y. Jung)
  Added adaptive inflation following Whitaker and Hamill (2010).
  This is a state-dependent multiplicative inflation whose
  inflation factor is propotional to Sb/Sa.

  01/05/2011 (Y. Jung)
  Added hydrostatic adjustment to perturbation fields added to
  produce ensemble initial conditions (arpsenkfic).

  10/13/2010 (Y. Jung)
  Adopt wtradcol and merge with wrtgridtilt (see wrtgridtilt_old)
  for radar data on horizontal arps grid and vertical radar elevation
  angle (EnKF format).

  09/13/2010 (Y. Jung)
  Added capability to process graupel in EnKF.

  06/30/2010 (Y. Jung)
  Added conventional data simulator at flexible density at perturbed locations.

  06/13/2010 (Y. Jung)
  Added attenuation to the polarimetric radar data simulator using T-matrix method.

  02/12/2010 (Y. Wang)
  Fixed an array out-of-bounds error with multimoment code, plus format changes.

  05/10/2008 (Y. Jung)
  Adopted dynamic array qscalar in EnKF to easily accomodate multi-moment
  microphysic scheme.

  07/04/2007 (Y. Jung)
  Reformatted the EnKF code using arps array modules and added polarimetric radar data.

  02/27/2007 (Y. Jung)
  Added polarimetric radar data simulator based on T-matrix method.
  This method computes radar parameters by integrating radar scattering amplitudes
  over the drop size range. 

ARPS 5.2.13 (03/23/2011)

  03/23/2011 (Ningzhu Du)
  Changed the adjustment of pt field to account for the latent
  heating from cloud water/ice only with cldptopt = 4 in cmpclddrv.f90.
  
  03/11/2011 (G. Ge)
  Guoqing Ge detected a severe typo with ARPS 3DVAR minimization
  code that might affect results of assimilation with reflectivity data.
  It was introduced since May 2009 with adas_3dvar_drive.F version 1.19.

  03/04/2011 (T. Lei)
  Added the digital filtering function. This feature is controlled by
  a new option dfilter_opt in arps.input with several other parameters.
  The modified codes are in arps.f90, initpara3d.f90 and out3d.f90.
  
  03/09/2010 (F. Kong)
  Incorporated several changes with arpspost and wrf2arps from Dr.
  Kong. Mainly adjustments for SPS spring 2010 experiments.

  02/27/2010 (K Brewster)
  Replacing 88d2arps.c with f88d2arps.c and streamlining wtradcol
  Adding TDWR capabilities to nids2arps

  NOTE: supports for China radar 89 format, Solo and CASA special
  tilt interpolation have been lost and should be added later.

  02/10/2010 (Y. Wang)
  Added MPI support for trajectory plotting in ARPSPLT.

  01/29/2010 (M. Xue)
  Added option (trajc_plt_opt=2) to plot vertical cross sections following
  parcel trajectories and (trajc_plt_opt=2 and nslice_h=-1) horizontal
  constant-height cross sections at the height of air parcel at the history data time.
  Files changed: 
  include/arpstrajc.inc input/arpsplt.input
  src/arpsplt: Makefile, arpsplt.f90 arpspltlib.f90 arpspltderive.f90.

  plus a few other small changes.
 
  01/20/2010 (M. Xue)
  Streamlined trajectory plotting in arpsplt. Moved the codes into
  subroutine plt_trajc. arpsplt.f90, arpspltlib.f90, arpsplt.input
  etc. changed.

  01/04/2010 (Y. Wang)
  Added support for multiple outputs with each process (history file,
  lateral boundary file and soil data file) for HDF4 and netCDF format
  only with arps, adas, 3dvar, arpstintrp etc..

  10/29/2009 (Y. Wang)
  Fixed an issue with boundary tendency for restart file in MPI mode.
  Added support of stream line in MPI mode.
  Added code for exact standard output in MPI mode (commented out by default).

ARPS 5.2.12 (09/08/2009)
  Changes are:
    o Upgraded to support WRFV3.1
    o Fixed 3DVAR staggering
    o Fixed physical heights in nmm2arps
    o Synchronized with ARPS5.3 except for scalar arrays
    o Other minor changes (radaremul, 88d2arps, arps, etc.)

ARPS 5.2.11
  06/15/2009 (Y. Wang)
  Released arps5.2.11 based on the last spring experiment version
  arps5.2.10_20090514 with the following modifications:
    o No warning for no-existing laternal boundary files when searching
      for split files;
    o Changed default to 64bit netCDF file with arps2wrf;
    o Added starting patch number for ARPSPLT just as HDFSUBDOMAIN does.
      So it can read subset of all patches now;
    o Fixed an MPI issue for no-existing files in arpsio3d.f90.

  03/24/2009 (Y. Wang)
  Added program hdfsubdomain - a general HDF file handler.

  Changed to use 3 digits for processor number in split file names. It
  is to accommodate thousands of processors.

  02/05/2009 (Y. Wang)
  Added program arps4wrf, nmm2arps.

  01/30/2009 (Y. Jung, K. Zhao, J. Gao and Y. Wang etc.)
  Merged Youngsun Jung's changes with 88d2arps for using radial's nyquist
  velocity with automated unfolding.

  Merged Kun Zhao's changes with 88d2arps that adds a median filter, efforts
  to remove unreliable VAD estimates, and proper handling of SOLO sweep files.

  Merged Kun Zhao's bug fixes with 3dvar variable transformation, which was
  verified by Jidong Gao.

  01/29/2009 (M. Xue)
  Added program plt3dtrajc that calls ZXPLOT and NCAR 3D plotting subroutines
  (TDINIT, TDGRDS, TDLINE) to plot 3D trajectories generated by
  arpstrajc program.

  Added program plt1dtrajc that plots 1D (time v.s. plotted quantity)
  curves of quantities calculated along trajectories by arpscalctrajc
  program.

  09/11/2008 (Kevin Thomas)
  Upgraded arpsverif. See comments near the begining of file arpsver.f90.

ARPS 5.2.10

  09/02/2008 (Yunheng Wang)
  Added support of solo radar format.
  Added support on new sooner.oscer.ou.edu.

ARPS 5.2.9

  06/16/2008
  Added program casa2arps, ppiplt, meso2lso and script scantier2a etc.

  06/13/2008 (Y. Wang)
  Added module_precision.f90. Currently only mpisubs.f90 and some files
  for 3dvar were changed. We should use this module for all files later.

  02/20/2008 - 04/11/2008 (Y. Wang)
  Added MPI capability to 88d2arps, ncrad2arps, nids2arps.

  02/13/2008 (Y. Wang, J. Gao and Kevin Thomas)
  Initially added MPI capability to 3DVAR.

  11/13/2007 (Kevin Thomas)
  Added MPI capability for processing radial velocity with ADAS.

  11/12/2007 (Jidong Gao)
  Merged ADAS and ARPS3DVAR driver into one file.

  10/22/2007 (Yunheng Wang)
  Added code to detect the GRIB format automatically in EXT2ARPS.

ARPS 5.2.8

  08/21/2007 (Yunheng Wang)
  Added support for NAM GRIB2 data (12km grid #218 & 40km grid
  #212).

  07/20/2007 (Yunheng Wang)
  Reformated the radar column mapping format for better
  performance and file size. Affected programs are 88d2arps,
  nids2arps, ncrad2arps, adas, arps3dvar etc.

  07/20/2007 (Yunheng Wang)
  Added support for China CINRAD (option -radar98 with 88d2arps).
  Fixed a bug in arps3dvar which was introduced during the ADAS
  MPI'ing effort.

  05/15/2007
  Updated program Zmosaic2arps by Fanyou.
  Added a new program JOINWRFH which joins WRF files in either
  space or time by Y. Wang.

  04/03/2007 (Keith Brewster)
  Moved the "cold filtering" to mci2arps and updated ADAS to
  read-in that field as part of the IR file.

  04/02/2007 (F. Kong and Y. Wang)
  Added a new program ARPSPOST for processing ensemble outputs
  for the 2007 Spring experiments. WRF2ARPS was also modified
  to process WRF data directly.

  03/22/2007 (Y. Wang)
  Revisited the whole package to ensure that all file names
  has 256 characters in length, especially those source files
  in src/88d2arps/ and src/adas/.

  03/14/2007 (K. W. Thomas)
  Added MPI capability to ADAS.

  03/09/2007 (K. Brewster)
  Added a new program wrfextsnd for extracting soundings from
  WRF history outputs.

  03/09/2007 (Y. Wang)
  Rearranged arps library because libarps.a was not self-contained.
  Thus, when linking with libarps.a for a program, we had to
  declare a lots of dummy subroutines. After this rearragement,
  dummy subroutines are not needed any more. For this purpose:

    o the original init3d.f90 was split into two files, init3d.f90
      & initlib3d.f90;
    o the original force3d.f90 was also split as force3d.f90 &
      rhouvw.f90;
    o files removed from libarps.a - init3d.f90, force3d.f90
    o files added to libarps.a - initlib3d.f90, rhouvw.f90, smooth3d.f90
    o files contain dummy subroutines in the following directories
      were removed: 88d2arps, adas, arpscvt, arpsintrp, arpsplt,
      arpsprt, arpssoil, arpstern, arpstintrp, ext2arps, wrf2arps,
      wtretcol. The coresponding Makefile in each directories
      were also modified.

   Since this version, we removed the forced "-O0" when compiling
   ZXPLOT libraries. It was forced because of an error with
   earlier Intel compiler - ifc.

ARPS 5.2.7

  02/23/2007 (F. Kong)
  Added MPI'ed program arpsensic for the SPS spring experiments.

  02/09/2007 (Y. Wang)
  Added nesting capability to wrfstatic and arps2wrf. A separate
  program - wrfnester, which helps to determine the namelist
  parameters for nesting is also availabe as a independent
  program.

  01/31/2007 (M. Hu)
  Added Mosaic2arps to the ARPS system, which remaps NSSL mosaic
  reflectivity to ARPS grid.

  Added a new function into arpsverif to use NSSL reflectivity
  observations for calculations of ETS of predicted reflectivity.

  01/31/2007 (K.W. Thomas)
  Fixed a MPI bug in adjuvw.f90.

  01/25/2007 (Keith Brewster)
  Updated several programs in src/88d2arps/, including 88d2arps,
  nids2arps, ncrad2arps etc.

  01/25/2007 (Y. Wang)
  Some outputs from the ARPS runs, such as the .log, .maxmin,
  .sound files were changed to write to directory specified by
  "dirname" in namelist instead of the current working directory.

  11/20/2006 (Y. Wang)
  Added a new program "splitany" which splits any ARPS related
  files in either netCDF or HDF format. It was originally writted
  as an accompanier of ADAS_MPI to split remapped data of radar
  or sattellite.

  11/07/2006 (K. Brewster)
  Added a set of programs in src/88d2arps. It includes
  ncrad2arps radaremul, radbin2cdf, radsector, atten. See ARPS
  Quick Guide (http://www.caps.ou.edu/ARPS/arpsqg/) for details.

ARPS 5.2.6

  10/13/2006 (Y. Wang)
  Fixed two bugs in arpsplt.f90 related to xz/yz section plotting in
  MPI mode. Thank Haixia Liu for detecting those bugs.

  09/12/2006 (M. Xue, M. Hu and Y. Wang)
  Added ARPSSUBDOMAIN to the package. ARPSSUBDOMAIN is an interpolation
  program similar to ARPSINTRP but with mimimum memory requirement and
  it is suitable for very high resolution ARPS problems.

  09/07/2006 (Y. Wang)
  Added time interpolation capability for ARPS2WRF. A new parameter
  tintv_bdywrf was added.

  08/25/2006 (M. Xue, D. Dawson and Y. Wang)
  Added the program arpstrajc and the arpsplt was also updated
  to plot the trajectory files dumped by arpstcalctrajc.

  08/2006 (Y. Wang)
  Added GRIB2 support in ext2arps. Currently, only 0.5 degree
  GFS global data is added.

  07/2006 (Y. Wang)
  Added new sounding format ROAB in arpsextsnd. This is a work to
  facilitate the Boeing project.

ARPS 5.2.5

  04/24/2006 (Y. Wang)
  Added minor changes to support a new platform PC Windows - Cygwin.

  Fixed bugs in arpsplt which were introduced when upgrading file
  names to 256 characters. Some optimizations based on reports from
  G95 compiler were also implemented in arpsplt source code.

  03/27/2006 (Gerardo Cisneros)
  Better options with Intel complier version 9.0 (-O3 -ipo -fno-alias)
  was added as reported on the SGI Altix system.

  The improperly ordered loop nests in arps/operat3d.f90,
  arps/tmix3d.f90 and arps/solve3d.f90 were rearranged to have
  the DO over the leftmost index as the innermost loop.

  03/16/2006 (Y. Wang)
  Added support to NAM grid 218 data downloaded from NOMADS.

  03/16/2006 (Y. Wang, M. Xue, D. Dawson)
  Added WSM6 microphysics scheme from WRFV2.1.2.

  02/02/2006 (Y. Wang)
  Fixed an argument list disorder when calling sfcphysics in
  tinteg3d.f90. This bug was introduced since ARPS5.0.0IHOP_3.

  Fixed an bug for nudging when doing incremental I/O in MPI mode.

ARPS 5.2.4

  11/10/2005 (K. Thomas)
  ARPSVERIF was MPI'd.  This will allow large domains, such as a 2km
  U.S., to be verified.  The memory requirements for such a large grid
  can't be handled by one processor.

  11/09/2005 (Y. Wang)
  Added capability in EXT2ARPS to rearrange the data arrays when
  the external data are global, such as GFS global 1x1 data or
  GFS global 2.5x2.5 data, but the ARPS domain is accross the
  Greenwich Meridian. EXT2ARPS was trying to interpolate across
  the edges of the data array that wraps around the globe.

  Fixed a bug in restart file I/O. An extra interger dummy variable
  was written in the restart file header, however, it was not read
  in. That was why users encountered "segmentation fault" errors.
  This bug was introduced since ARPS IHOP versions while WRF BMJ
  cumulus scheme was added.

  Increased the lenght of all character strings for file names to
  256 characters.

  Incorporated modifications by ENSCO inc. which were provided by
  Jon Case. The main upgrades are:

  ARPSSFC - soil type, vegetation type and nomalized difference
            vegetation index (NDVI) values were not being set
            properly in some areas outside of the United States.
            Problem corrected by modifying the assignments of
            "ixmin","ixmax","jymin", and "jymax" in the
            "GETSTYP2","GETVTYP2", and "GETNDVI2" subroutines.
            This modification was further simplified by Y. Wang.

  ARPSSOIL - Increased the length of the character strings
            "inidate" and "fnldate" used in the Antecedent
            Precipitation Index code.

            Added capability to initialize the ARPS sea-surface
            temperature, soil moisture, and soil temperature fields
            from an external model. This capability is currently
            set up for the RUC model, but can be configured for
            any external data set used to force the ARPS NWP
            model, as long as the external model grids are in
            GEMPAK format.

  EXT2ARPS - Added capability to ingest the 20-km RUC hybrid
            coordinate data to the ARPS grid. Note that since
            GRID #252 shares the same GRIB parameters as RUC
            GRID #236, the procedure was further simplified by
            Y. Wang to avoid decalaring new subroutines.

  Updated documents for Chapter 4, 8 and ARPS2WRF.

  10/31/2005 (M. Xue)
  Fixed an array uninitialized bug for array tka(kz) in Straka’s LFO
  microphysical scheme. Detected by Mingjing, fixed by Ming Xue and
  confirmed by Nate.

  10/26/2005 (F. Kong)
  Fixed bug for lateral boundary adjustment in ARPS3DVAR. This bug
  was introduced because of the recent updates for ARPS MPI mode.

  10/26/2005 (K. Thomas)
  Added MPI capability in EXT2ARPS with the ARPS data as external
  data source, and fixed a bug associated with ARPS base state
  variables.

  Modified A2IO to work properly with ORDA data.  The code that
  contained workarounds to read early flawed level 2 tapes was
  commented out.

  10/26/2005 (Y. Wang)
  Changed map projection attributes defined in netCDF files as
  requested by Unidata for IDV visualization purpose.

  Fixed array out of bound bug in ARPSTERN.

ARPS 5.2.3

  09/16/2005 (Y. Wang)
  Upgraded ARPS2WRF to WRFV2.1, and added supports for wrfstatic file
  and to read WRFSI terrain.

  Added a new program "wrfstatic" to replace both WRFSI programs
  gridgen_model and staticpost. This program calls WRFSI subroutines
  to process static data sets, but it builds the model grid in
  the ARPS framework. This will save us from running WRFSI. It also
  supports more compilers (IFORT, PGF90 and G95 on Linux platforms,
  WRFSI only works with PGF90 so far).

  Added a C reader for ARPS HDF4 files. To compile
  $> h4cc -o readarps src/arps/readarps.c
  User should add their own code in src/arps/readarps.c to do
  meaningful works.

  08/09/2005 (Nate Snook)
  Fixed a bug for Straka implementation of Lin et al. (1983) 3-ice
  microphysics scheme which is introduced since ARPS5.2.2. rhobar
  should be used instead of rhostr as used in ARPS5.2.2.

  07/28/2005 (Y. Wang)
  Added reading NARR 32km fixed field file on output grid for NARR
  #221 support in EXT2ARPS to extract terrain height, land cover
  etc.

  07/27/2005 (M. Xue & Y. Wang)
  Added paramter "rhmixed" for Weisman and Klemp sounding to avoid
  an oversaturated bug which used to generate spurious convections.

ARPS 5.2.2

  07/06/2005 (Y. Wang)
  Improved 30s USGS landuse support in ARPSSFC. The code now works
  for any general grid and it is also more efficient.

  Added more documents for ADAS, 88d2arps, nids2arps and mci2arps
  etc in docs directory. see README.docs.

  Rewrote NARR #221 support in EXT2ARPS and to be more general.
  Found and fixed a bug related to 2m temperature or 10m U, V wind
  in rdnmcgrb3d.f90. The code was supposed to be more efficient
  because two loops were avoided.

  06/29/2005 (Tina Katopodes Chow, The Stanford University)
  Incorporated some updates by Tina Katopodes Chow from
  Stanford university, and they are:

  Added support for 3s European terrain data in ARPSTRN
  See input/arpstrn.input for detail. The code is still not tested.

  Added support for 30s USGS landuse data set (the same as used in WRFSI)
  in ARPSSFC.

  Added support for NARR #221 North American reanalysis data (narr-a)
  in EXT2ARPS.

  06/15/2005 (Nate Snook)
  Added code for Straka implementation of Lin et al. (1983) 3-ice
  microphysics scheme (mphyopt = 4); source code is in micro_lfo_ice.f90
  References: Gilmore et al. (2004), Monthly Weather Review
              Lin et al. (1983), Journal of Climate and Applied Meteorology

  06/08/05 (Yunheng Wang)
  Renamed 3dvar to arps3dvar.
  Renamed ncarpltradscan to radarpltncar, postpltradscan to radarpltpost.

ARPS 5.2.1

  06/02/2005 (Ming Xue)
  Added parameters for Weisman and Klemp sounding (inibasopt=5) into
  arps.input and changed slightly the way ptbar and qvbar are
  initialized for this option. Option viniopt=3 added to allow
  specification of Weisman and Klemp wind profiles using ubar0 and vbar0.
  Files changed: arps.input, globcst.inc, initpara3d.f90, inibase3d.f90,
                 init3d.f90.

  05/20/2005 (Yunheng Wang)
  Added skewt plotting program to ARPS package. Fixed some bugs especially
  those related to uninitialized variables.

  makearps skewtncar  and makearps skewtpost compiles the program.

  05/25/2005
  Redirected 30s and 3s terrain data to CAPS anonymous ftp server,
  caps.ou.edu, for ARPSTRN. Changed some names in
  src/arpstrn/usgs_dem.index.

  Added support for GNU compiler g95 on Linux platforms.

  05/12/2005 (Yunheng Wang)
  Disabled GRIB format and fixed bug with grbpkbit=32 in case
  GRIB format is used.

  Fixed bug in ARPSPLT for RH label and vtrsfc temporary arrays.

  Fixed infinite loop problem in ZXPLOT.

ARPS 5.2.0

  04/29/2005 (Yunheng Wang)
  Fixed several bugs for ext2arps_mpi. Added a new parameter to
  extmnsnd.

  04/26/2005 (William Martin, Dan Dawson, Yunheng Wang)
  Bill fixed a bug in subroutine intrp_soil with erroneously weight
  over varying external soil types, such as between water and land.

  Dan fixed a bug in ext2arps associated with the correct order to
  call fix_soil_nstyp and intrp_soil.

  Yunheng added a new "nproc_node" parameter to control the data
  I/O operation for ARPSPLT in MPI mode.

  04/10/2005 (Keith Brewster, ARPSEXTSND)
  Added vertical velocity variable to GEMPAK sounding file to
  accomodate NWS NSHARP program.

  04/23/2005 (Yunheng Wang)
  Rewrote some part in ARPSPLT package to reduce memory usage.
  Fixed some long-existing bug in ARPSPLT.
  Added ordering I/O for message passing mode of WRF2ARPS &
  ARPSPLT.

  04/04/2005 (Ming Hu, Yunheng Wang)
  Added programs to plot radar reflectivity and radial velocity
  in radar coordinate. A new call in 88d2arps.c was also added
  to dump radar observation in radar coordinate.

  04/01/2005 (Kevin Thomas)
  Added MPI support to ARPSEXTSND.

  03/30/2005 (Kevin Thomas)
  Added MPI surpport to EXT2ARPS.

  NOTES:

  Subroutine "adjuvw" isn't MPI'd.  For testing purposes, "w" was
  set to zero when the code returned.

  File output for "ext2arps" and the non-splitfiles version of
  "ext2arps_mpi" were identical.  ARPS forecasts using the
  "splitfiles" and "not-splitfiles" versions of "ext2arps" didn't
  produce identical answers.  After one hour, some variables were
  slightly different, with difference on the order of the 6th or
  7th decimal place.

  03/29/2005 (Y. Wang)
  Updated NetCDF metadata for LEAD/IDV visualization. Reuse ARPS
  data format option 8 (hdmpfmt = 8) to write multiple time level
  data in one NetCDF file. It is suitable for small model domain
  and is convenient for IDV visualizing.

  03/15/2005 (Y. Wang)
  Added WRF split file support for WRF2ARPS. This is critical for
  the Spring program. It allows to run wrf2arps_mpi with less
  processors than the processor number when running WRF.

ARPS5.1.6

  01/17/2005 - 02/08/2005(Y. Wang)
  Upgraded Vis5D to version 5.2.
  Added HDF5 I/O format support for WRF2ARPS.
  Added WRF internal binary support for ARPS2WRF & WRF2ARPS.
  Added support of WRF split history files to WRF2ARPS. Please note
  that several restrictions are enforced (see wrf2arps.input) and
  only NetCDF format was tested because WRF cannot generate split
  binary history at present due to a bug.

  1/30/2005 (M. Xue)
  Added initialization option initopt=4, in which the model is
  initialized first with the restart file, just like initopt=2,
  then the current time level fields are replaced by those in
  history file, as in the case of initopt=3. The first time step will
  then start from two time levels, as with initopt=2 case. This option
  is useful for frequent assimilation cycles what update current
  time level fields.
  Files changed: arps.input, init3d.f90 and initpara3d.f90.
  In theory, when no data is available, the forecast following
  the analysis should proceed as if the model had not stopped.
  But in practice, small difference will develop due to
  trunction errors, and to any error introduced during the
  history data compression.

  01/19/2005 (Jidong Gao, Y. Wang)
  Added 3DVAR source code. Please note that include/adas.inc was
  changed. Theorectically, the change should be ok with ADAS.
  However, we did not test it thoroughly.

  12/20/2004 (Y. Wang)
  Several fixes in radlib3d.f90 which was converted from external
  FORTRAN 66 code before. Thanks to Dr. Ting Lei from Chinese
  Institue of Atmospheric Physics for spotting it.

  12/09/2004 (Y. Wang)
  Added two new variables, readstride & writestride in include/mp.inc
  to distinguish the cases either inisplited == 1 or dmp_out_joined == 0.
  "max_fopen" was replaced with either readstride or writestride in
  the following files:
     src/arps/exbc3d.f90       src/arps/exbcio3d.f90
     src/arps/init3d.f90       src/arps/initpara3d.f90
     src/arps/out3d.f90        src/arps/tinteg3d.f90
  so that "max_fopen" will work just as its name implied even for
  those two cases mentioned above.

  Added some comments in RELEASE.NOTES about large (>2gb) NetCDF
  file and cpu time on Linux platform.

  12/08/2004 (Y. Wang)
  Upgraded ARPS2WRF to WRFV2.0.3.
  Added PHDF5 format support for ARPS2WRF.

ARPS5.1.5

  10/12/2004 (Y. Wang)
  Added MPI capability for program ARPS2WRF. Note that it only
  works when ARPS and WRF are on the same horizontal grid.

  2004/09/29 (M. Xue)
  For 2nd-order interpolation of ARPSTRN, using NINT instead of INT
  to find the nearest grid point to interploation.

  09/21/2004 (Y. Wang)
  Added NetCDF I/O. It works with ARPS history file, terrain file,
  surface characteristics file, soil variable file and external
  boundary files.

  09/20/2004 (Y. Wang)
  Since WRF output data added variable "ZS", "DZS" (soil layer depths)
  since version 2.0, WRF2ARPS was changed to read those variables
  for flexibility (they were hard-coded before).

ARPS5.1.4

  09/01/2004 (Kevin Thomas)
  Fixed a bug with ZXPLOT. When the field was perfectly symmetric
  (globally or locally), the contouring routine entered an infinite
  loop because it did not know which way to go. Making several of
  the calculated variables double precision seems to have fixed
  the problem

  08/31/2004 (M. Xue)
  Changed "INT" to "NINT" in arpsintrp.f90 when computing the index
  for second order interpolation. This should be a bug fix.

  08/30/2004 (Y. Wang and M. Xue)
  Added options to plot accumulated rainfalls between two successive
  time levels (determined by input file list). It was based on
  previous works by Queenie Lam.

  8/23/2004 (Kevin Thomas)
  Fixed a problem with variable file pointer length for C language
  on some platforms. "grbunit" in rdnmcgrb3d.f90 will be allocated
  dynamically now.

  Fixed MCI2ARPS problem on 64-bit platform.

  Fixed an alignment problem on some Sun platform for a2io library
  which is used by 88D2ARPS.

  8/20/2004 (M. Xue and Y. Wang)
  Fixed a problem in ice microphysics subroutine ICECVT
  that was causing occasionally crash due to division by zero.

  08/05/2004 (Yunheng Wang)
  Upgraded WRFV1.4 support to WRFV2.0 for ARPS2WRF & WRF2ARPS. Please
  note that WRFV1.4 would not be supported any more because it never
  was officially released.

ARPS5.1.3

  07/13/2004 (Yunheng Wang)
  Added Eta grid #218 (12km ETA model output) support for EXT2ARPS.

ARPS5.1.2

  05/13/2004 (Kevin Thomas)
  Fixed a problem where programs would core dump (segmentation
  violation) if the record length in an LDM radar file was corrupt.
  KMAF files have all had this problemn since May 10th.  I checked
  with Carl Sinclair, and learned that this is a known problem.

  05/12/204 (Keith Browster)
  Updated adas and changed files were adas.f90,prepsfc.f90,anxiter.f90.
  This corrects a problem noted by WDT in detecting errors in observed
  surface dewpoint (specific humidity).  There was a problem in
  subroutine barqc converting limits to specific humidity from RH, and
  also it was possible for the limit check elsewhere to allow too
  large a variation in RH.  An upper limit on the variation allowed
  (75% RH) is now imposed.  Also I modified how the limits are set in
  barqc, so that only the observation error is taken into account in
  computing the thresholds(since the background is not used in that
  step).  This can have the unintended effect of increasing the number
  of pressure and wind observations flagged.  I suggest setting the
  pressure observation std dev to 2 mb in the surface observation
  adastab files (saoerr, mesoerr, wtxmnerr, etc), and the wind
  components to 1.5 m/s.  Try 5% RH for RH error.

  05/03/2004 (Fanyou Kong)
  Upgraded EXT2ARPS to utilize near surface fields (2m temperature
  and humidity, and 10m winds) available in GRIB data in interpolating
  near surface levels. A new option, extsfcopt, is added in
  NAMELIST extdfile in arps.input for this purpose.

  05/07/2004 (Yunheng Wang)
  Fixed a mpi bug in soil model when moist == 0.
  Fixed a mpi bug associated with radshade == 1.

ARPS5.1.1

  04/10/2004 (Yunheng Wang)
  Upgraded ARPS2WRF I/O API to improve performance. The new
  code will perform about twice as fast as old implementation.

  04/02/2004 (Yunheng Wang)
  Added mpi support for WRF2ARPS. However, the mpi mode of
  WRF2ARPS only works when the WRF horizontal grid is the
  same as the ARPS horizontal grid.

  03/22/2004 (Yunheng Wang)
  Upgraded ARPS2WRF and WRF2ARPS to work with WRF V1.4 which
  was not an official release, but downloaded from WRF tiger
  team website on Feb. 10, 2004.

  03/22/2004 (Kevin Thomas)
  Fixed a2io to run properly on a 64-bit machine and
  compile and/or link errors on some computers.
  Changed makearps for 64-bit option on sooner and other minor
  changes.

  03/01/2004 (Yunheng Wang)
  Changed the binary and HDF 4 I/O interface to make sure ARPS
  always read in and dump 32-bit floating point number for
  history files. Please note that the interface for autojoin and
  autosplit, and terrain data, surface character data etc. are still
  not implemented. But, if those data is in HDF 4 format, the
  changes should apply automatically.

  02/30/2004 (Dan Weber)
  Fixed a potential divide by zero error in radfrc3d.f90
  which was introduced since arps5.1.0.

  02/25/2004 (Yunheng Wang)
  Reset alfcoef when trbvimp == 0 which was set to 0.5
  incorrectly in arps5.1.0.

ARPS5.1.0 Patch 4 (02/24/2004)

  02/19/2004 (Yunheng Wang)
  Merged with WDT release on 02/17/2004. The changes were mainly
  made for arps2wrf, ext2arps, and wrf2arps etc.

  02/16/2004
  Adapted several changed recommended/detected by Tina K. Chow
  from Standford University.
    1. soil moisture initialized to 1. when soiltype is water and
       soilinit = 4 in init3d.f90.
    2. elimiated the close warning appeared on IBM SP machine
       when using the join dump feature.
    3. fixed wcont computation in wwcont3d.f90.

  02/04/2004 (Keith Brewster)
  Upgraded ADAS to accounts for variation in terrain in the
  correlation of variables near the surface. Added a new
  namelist, &adas_trnrng in arps.input. Information for this
  upgrade is available in docs/TerrainTerm.pdf.

  02/02/04 (Keith Brewster)
  Added processing for the hdf radar datafiles in pltradcol.
  Improved the compression size of the hdf compressed files
  for 88d2arps output.

  02/02/04 (K. Thomas)
  Change so a missing HDF4 isn't a fatal error for ADAS.

ARPS5.1.0 Patch 3 (01/29/2004)

  01/29/2004 (Yunheng Wang)
  Changed to more meaningful label for pprtmin and ptprtmin etc
  in out3d.f90.

  Added allocation status checking in EXT2ARPS as Kevin Thomas
  recommended.

  Released the modified ARPS User's Guide for ARPS5.0 and beyond
  in directory docs/.

  WRF2ARPS vegetation type mapping changes
      veg_table(18) =  8 => 11
      veg_table(13) =  7 =>  8

  ARPS2WRF vegetation mapping changed recommended by Richard Carpenter.
      veg_table(8)  = 18 => 13

  01/28/2004 (Tina K. Chow, Standford University)
  Fixed a typo init3d.f90 for variable nylg.

  01/22/2004 (Yunheng Wang)
  Due to an conflict of directives for Cray PVP and Intel Compiler
  version 8.0. All of the "!dir$ inline always xxx" directives for
  Cray PVP in some code were commented out. They should be
  uncommented when running on Cray vector processors.
  The changed files are:
     arpslib3d.f90      inibase3d.f90      init3d.f90
     irrad3d.f90        micro3d.f90        micro_nem3d.f90
     radlib3d.f90       radtrns3d.f90      sorad3d.f90
     thermolib3d.f90

ARPS5.1.0 Patch 2 (01/21/2004)

  01/21/2004 (Kevin Thomas)
  o A2IO was modified to handle a format change in a level II data
    header that will occur during 2004.  It is backwards compatible
    with all existing data.
  o Fixed a core dump problem that can occur with corrupt data.

  01/21/2004 (Keith Brewster)
  Updated pltradcol to use zxplot calls, including the map plotting,
  so no need to carry the extra spcounty mapfile.  Included some more
  plotting options and greater flexibility for the user to control
  the variables and levels plotted without changing the source code.

ARPS5.1.0 Patch 1

  01/16/2004 (Keith Brewster)
  Redid the logic in the remapping routines to better handle
  the problem with varsort and added better checking for
  overflow. Changed code are in src/88d2arps:
      nid2arps.f90
      88d2arps.c
      remaptilt.f90
      remaplib.f90
      unfldlib.f90

  01/16/2004 (Yunheng Wang)
  Changed WRF2ARPS vegetation convert table for consistent purpose
  with ARPS2WRF.
      veg_table(18) = 11 =>  8
      veg_table(19) = 1  => 13

  2003-12-29  Richard Carpenter
  Fixed some problems for map projection on southern hemisphere.
  Changed files are in src/arps
     gribio3d.f90
     maproj3d.f90

ARPS5.1.0

  12/17/2003 (Ming Xue & Yunheng Wang)
  Added parameter nmphystp in arps.input to allow user control on
  the time step intervals for the computation of microphysics processes.
  globcst.inc, arps.input and a number of source files were changed.

  12/17/2003 (Richard Carpentar & Yunheng Wang)
  Fixed grib record for southern hemisphere projection.
  ARPS2WRF and WRF2ARPS were also modified to work with negative
  map projection parameter for southern hemisphere.

  12/16/2003 (M. Xue)
  Modified arpsread.f90 so that the standard way for specifying
  list of history data files (as in e.g., arpscvt.input and
  arpsplt.input) are used. Namelist input file arpsread.input added.

  11/26/2003 (Yunheng Wang, Dan Weber & Henry Neeman)
  Changed the MPI interface to solve safty issues what cause some
  arps MPI job to hang when using some MPI implementations,
  such as MPICH for GM communications. Calls of mpsend(1/2)d(ew/ns)
  & mprecv(1/2)d(ew/ns) etc. were replaced with a call to
  mpsendrecv(1/2)d(ew/ns).

  11/22/2003 (K. Brewster)
  Upgraded arps2ncdf. Added logic to allow appending new time levels
  to existing file. Includes additions to input file.  Corrected
  itim1970 constant.

  11/20/2003 (Ming Xue & Yunheng Wang)
  Added "-64" flag for makearps to compile for 64 bit objects on
  IBM AIX 5.0 (e.g., sooner.ou.edu) & SGI 2000 (e.g., paige.ou.edu).
  This option only works for key programs, such as ARPS, ADAS, EXT2ARPS
  & 88D2ARPS, ARPSPLTPOST, ARPSPLTNCAR etc. Users should install
  64bit libraries when needed, such as HDF , BZ2 & NCAR graphics libraries.

  Note: 64bit DOES NOT mean double precesion, it is for 64bit object
        that allows for the use of >4gb memeory.

  11/17/2003 (Ming Xue & Yunheng Wang)
  Distributed ZXPLOT version 3.0 inside ARPS package. The
  distribution was a minimum set required by ARPS executables.
  The full ZXPLOT package, including the map data and
  documentation, are available at http://www.caps.ou.edu/ZXPLOT.

  NOTE:
    There is a problem with some compilers if ZXPLOT is compiled at high
    opt levels. It needs to be compiled with zero optimization level.
    So "-O0" was hard-coded inside the Makefile for ZXPLOT libraries.

  11/10/2003 (Yunheng Wang)
  Added a program, HDF2GRADS, which makes minor changes to the
  HDF format ARPS history file and then dumps a data description
  file to be used as control file for GrADS visulation tool.
  Added a few scripts in scripts/ directory which work with the
  control file generated by HDF2GRADS. See scripts/useg,
  scripts/openfn.gs & scripts/openhdf.gs.

  10/30/2003 (Eric Kemp & Yunheng Wang)
  Incoprated some changes recommended by Eric Kemp.
    * Restrained values of variable "gentag" to values between 100 and
      32700 in subroutine inctag because MPI standard only requires
      MPI_TAG_UB be no less than 32767.
    * Added specific mpi_lib string for LAM 6.5.6/MPI implementation
      on Compaq AlphaServer (Tru64 UNIX) or Linux cluster. (need
      to be tested further).
    * Changed function name "round" in src/mci2arps/sat_tran.c to
      "round_long" to avoid name conflict with some library function.
    * Added comments in BUGS to highlight the changes required for
      EXT2ARPS and MCI2ARPS to work on some 64 bit Machine, such
      as the Compa AlphaServer ES40 at TASC.

  10/30/2003 (Yunheng Wang, Dan Weber, Kevin Thomas & Jerry Broztage)
  Added and tested new program, WRF2ARPS, which converts WRF model outputs
  in NetCDF format to ARPS binary history format. This program also
  produces the background and lateral boundary fields that can be
  used by ADAS and ARPS.

  10/27/2003 (Yunheng Wang)
  Fixed soil variables for NCEP AVN (GFS) grid #3 data in EXT2ARPS.
  This fix was done following the method established for Eta 212 grid
  by Eric Kemp in the same program.

  10/23/2003 (Ming Xue & Yunheng Wang)
  Added the effects of spatial gradient of map factor on Coriolis
  parameters and the earth curvature terms are also included for
  coriolis option 3 & 4. An new option "earth_curvature" was added
  in arps.input. These terms are already included in the ARPS
  description paper Xue et al (2000).

  10/16/2003 (Jerry Brotzge, Ming Xue, Dan Weber, Yunheng Wang)
  Changed the parameters tsprt & t2prt to ttprt & tbprt respectively
  in arps.input which are used when soilinit = 4. See arps.input for
  comments.

  10/16/2003 (Keith Brewster)
  Added three new programs, i.e. difobs, arps2rad, and radmosaic.
  Description of these new programs was available in
  docs/newprogs.txt

  10/15/2003 (Yunheng Wang)
  Expanded ARPSCVT capacity to convert soil data file between binary
  and HDF format.

  10/15/2003 (Keith Brewster)
  Fixed a problem in the search scheme for radials near a grid
  point in src/88d2arps/remaptilt.f90.  This problem was apparent
  when the grid dx was small, the distance from the radar large
  and the radar was not at or near the "true longitude".  The
  corrected code is better adapted for those situations and properly
  accounts for the variation from true longitude.

  10/08/2003 (Kevin Thomas)
  Uncommented "ALLOW_COMPRESS" in src/88d2arps/a2io/config.h. Now,
  88d2arps can read compressed NCDC files.

  10/02/2003 (Yunheng Wang)
  Added 3 vertical sigma level scheme in ARPS2WRF namelist input,
  i.e. calculate linear levels in sigma, calculate square root levels
  in sigma and calculate the top 1/3 of the requested levels in linear
  and the lower 2/3 of the requested levels in square root in sigma.

ARPS5.0.0 IHOP_6 (Sept. 15 2003)

  09/15/2003 (Yunheng Wang)
  Expanded ARPS capabilities to convert terrain data, surface data
  and history dumps from EXT2ARPS. The namelist arpscvt.input changed.

  09/10/2003 (Yunheng Wang)
  Changed the rotation of horizontal wind more realistic in ARPS2WRF
  code.

  Hardcoded the interpolation function into interplib.f90 for efficiency
  using Intel compiler which has trouble to make the function calls inline.

  08/26/2003 (Yunheng Wang)
  Added a new option for ARPS2WRF to ingest history dumps generated
  using ARPS as boundary condition for WRF model.

  (Paraguay project started)

  08/08/2003 (Yunheng Wang, Dan Weber, Keith Brewster)
  Added a new program ARPS2WRF which converts ARPS/ADAS files to WRF
  netCDF format and provides the necessary start files for WRF model.

  NOTE: When it cannot link the netCDF library on some platforms (like
        boomer), it is because the netCDF library was compiled using g77
        which has an extra "_" appended to the symbols. Users can either
        recompile netCDF library using PGI fortran compiler with the
        flag "-Mnosecond_underscore" or add a flag "-Mseconde_underscore"
        when compiling the code. This should also apply to WRF model.

  08/01/2003
  Fixed bug in the subroutines GETVTYP2, GETSTYP2 and GETNDVI2 when
  Greenwich Meridian is inside the domain (e.g. western Europe) as
  recommended by Andreas Weigel.

  08/08/03 (Yunheng Wang)
  Fixed mpi bug for periodic boundary condition which was lost while
  merging version beta7 with WDT's code.

  Fixed mpi bug when using radiation shade option in subroutine zenangl.
  Added a new subroutine mpbcastr in mpisubs.f90 and nompsubs.f90.

  Fixed mpi bug when one direction is periodic boundary condition and
  the other direction is open boundary.

  NOTE: The interface of subroutine bcu, bcv, lbcw, bcp, bcpt, bcq,
        bcqv and bcsclr changed.

  Added code to do joined dump of sfc, soil & tern data for multiple
  processors.

  07/17/03  (Yunheng Wang)
  Added "-io nohdf" compiler option for splitfiles, splitfiles_mpi,
  and joinfiles.

  Fixed bug when joining 16 bit integer mapped data using join_hdf.
  Affected files were fjoin_hdf.f90, joinhdf.f90, joinfiles.f90.

  07/17/03  (J. Brotzge, Yunheng Wang)
  Fixed new radswnet bug (detected by T. Katopodes).

  Cleaned up documentation for soil scheme options.

  NOTE: arps.input will be incompatible with previous version.

  2003/07/08 (Keith Brewster)
  Fixed 88d2arps.c, remaptilt.f90 and apdetect.f90, some to correct
  a problem with the time variables and some to address some warning
  messages that were produced when compiling on cirrus.

ARPS5.0.0 IHOP_5 (July 16 2003)

  2003/06/04 (Kevin Thomas)
  Arpsextsnd will no longer attempt to retrieve sounding data
  for a data point that is outside of the grid.  Users will get
  an error message for any soundings that are outside of the
  grid.  Soundings that are inside the grid will be processed
  normally.

  2003/05/13 (Eric Kemp)
  Added rhobar to denominator in microphysics formula following
  Orville and Kopp, JAS, 1977, equation 17 to fix a bug
  detected by Jianzhong Wang.

  2003/04/28 (Keith Brewster)
  Updated ADAS for the new satellite processing and calibration (remove
  old fortran66 style code and allow for the new GOES-12), and some
  other changes for 88d2arps and nids2arps.

  2003/03/24 (Kevin W. Thomas)
  Fixed a problem where "ext2arps" would fail if the first external
  model file processed is corrupt.

  Fixed a problem that caused control characters to be written to
  standard output.

  Removed obsolete code.

  Updated soilebm code from Jerry.

  "Arpsintrp" normally starts up, processes the requested files, and
  exits. This update adds a flag to tell the program to wait for files
  to become available, and process them as each file becomes available.
  This is a speedup feature for realtime programs.

  2003/03/14 (Kevin W. Thomas)
  Added A2IO code.
  There are many configuration options.  All of them are documented with
  some turned on in the file "config.h".  I have the file configured for
  ARPS, however, there is one "gotcha".  The first option is "BZIP2_OLD".
  It MUST be defined if the BZIP2 software is earlier than 1.0.  It CAN'T
  be defined if the BZIP2 software is 1.0 or later.  Running "bzip2 --help"
  will give the version number on the first line.

  2003/03/12 (Yunheng Wang)
  Added auto-split feature for mpi mode of ARPSPLT.

ARPS5.0.0 IHOP_4  (Released on 02/28/2003)

  2003/02/27 (Yunheng Wang)
  Added auto-split and auto-join for restart file. Please
  also noted that there is a little change in the restart
  file format. "exbcbuf" is now separated into serveral
  3D variables instead of a big buffer. It may not be compatible
  with the restart file created by previous version.

  2003/02/24 (Yunheng Wang)
  Changed interface of subroutine jacob. The message passing
  array mp_tem would be passed as a parameter from calling
  subroutines instead of allocating in the subroutine.
  init3d.f90, rst3d.f90, arpsintrp.f90 changed.

  2003/02/19
  Incorporated topographic Shade subroutine by Augustin
  Colette etc. from Stanford University.
  See docs/shading.pdf for the algorithm.

  2003/02/04 (Yunheng Wang and Dan Weber)
  Added message passing code for programs arpspltpost and
  arpspltncar, arpsplt.input also changed. The newly added
  program are arpspltpost_mpi and arpspltncar_mpi. To
  compile these two programs, you will need the scripts
  on /work/official/tools/mppltscripts/. Users from outside
  can find these scripts from the ARPS download page.

  NOTE: after the addition, ARPSPLT would not support GrADS
  data format any more.

  2003/01/21 (Dan Weber and Eric Kemp)
  Updated fall velocity files. The new option is fallopt
  where =1 old version and =2 new version.

  2003/01/21 (Kevin W. Thomas)
  Modified ext2arps, the program will not abort any more
  if a ETA data file is incomplete.

  2002/10/15 - 2002/12/06 (Yunheng Wang)
  Adjusted the data format for terrain data, surface data,
  soil data, external boundary data and increment data. After
  the modification, for each flag related to these data, option
  "0" represents no data, "1" for binary format data, and "3"
  for HDF4 format data.

  Fixed several bug introduced recently since IHOP_3 and IHOP_4,
  including adjtsfc.f90, hdfreadsplit, soildiag3d.f90 etc.

  Fixed random initialization for parallel mode by following
  Tina Chow's recommendation.

  Incorporated Carlos F. Balseiro's fix in Kain Fritsch
  subroutine (kfpara), Sometimes WTW variable reaches zero value.

  10/10/2002
  Incorporated Gene's bug fixes in hdfio3d.f90.

  10/01/2002 (Yunheng Wang)
  Fixed a bug in hdfio3d.f90 associated with hdfcompr > 3, which
  was introduced since version IHOP_3.

  09/03/2002 (Yunheng Wang)
  Added two new flags, inisplit and dmp_out_joined (see arps.input),
  which control whether to do the split and join on-the-fly for
  multiple parallel processes (using MPI). With inisplit=0 and
  dmp_out_joined = 1, the splitfiles and joinfiles steps are not
  needed any more. Several new subroutines added for this purpose.

  Fixed several bugs in sfcphy3d.f90 and soilebm3d.f90, which were
  associated with parallel mode of the code (using MPI) for the
  newly added soil scheme (OUSoil).

ARPS5.0.0 IHOP_3 (Aug 20, 2002 -- release 9)

  2002/08/30 Summary of IHOP_3 (by Jerry Brotzge and Dan Weber)
  Soilebm3d.f90 has been modified significantly to include two options
  for the land surface scheme.  The first option is the original code
  (force-restore); a 2nd option is now OUSoil.  All of the OUSoil code
  is new to soilebm3d.f90.  To implement OUSoil, a 4th index had to be
  added to tsoil throughout nearly ALL the ARPS code (all I/O files).
  Variables tsfc, wetsfc, and wetdp have been replaced with tsoil and
  qsoil. Furthermore, several include files have been modified to
  include many new soil parameters and constants.  In addition,
  several new variables (radswnet and radlwin) have been calculated
  within radfrc3d.f90 as required by the new soil scheme.

  08/05/2002 (Yunheng Wang)
  Changed several Perl script to add the ability to specify I/O format
  (bin/HDF) and compiler optimization options. (test_arpstrn.pl,
  test_arpssfc.pl, test_ext2arps.pl, test_adas.pl and test_realcase.pl,
  test_nids2arps.pl, test_arpsmpi.pl, testarps.pl).

  7/26/2002 (Fanyou Kong)
  Rename subroutine dtfrznew, envirtht, condload, and prof5 to
  dtfrznew_old, envirtht_old, condload_old, and prof5_old,
  respectively, to avoid ambiguity with the new WRF KF code.

  2002/07/10 (Jerry Brotzge)
  Updated soil table in include/soilcst.inc and roughness table
  in src/arpssfc/arpssfclib.f90.

  2002/07/08 (Ming Xue and Yunheng Wang)
  Removed "hterain, j1, j2, j3 and j3soil" from parameter list of
  dtadump. Interface of subroutine dtadump, bindump, ascdump,
  hdfdump, svidump, bn2dump, gradsdump, gribdump, v5ddump, exbcdump
  and initout changed.

  2002/07/02 (D. Weber, M. Xue & X. Jin)
  Added an option for an implicit version of the hydrometeor fall
  velocity treatment. globcst.inc, arps.input, initpara3d.f90
  and micro3d.f90 changed.

  6/30/2002 (Fanyou Kong)
  Modifed subroutines SECTVRT in outlib3d.f90 to fix a unit conflict
  problem that prevents the arpsplt from plotting arbitrary vertical
  slices correctly. src/arps/outlib3d.f90 modified.

  2002/06/9 (Ming Xue)
  Revoked some modifications to the soil moisture related caculations
  that was put in since IHOP_2 - the mods need more testing.
  soilebm3d.f90 changed.

  06/17/2002 (G. Bassett)
  Redid the way tb8_cold_k & ht_sao_base are computed so that no
  grid points in the area concerned are skipped.

  06/15/2002 (Yunheng Wang)
  Fixed bug in ext2arps.f90. Array index should be external
  nx_ext, and ny_ext in two statements pointed out by John Mewes.

  06/05/2002 (Yunheng Wang)
  Removed duplicated variable definitions in adas.f90, adjtsfc.f90,
  cmpcldlib.f90, rdradcol.f90, includes iradvr, nradvr, st4 etc.

  05/28/2002 (M. Xue)
  Commented out three line in soilebm3d.f90 for time checking.

  05/22/2002 (K. Brewster)
  Changed files:
               88d2arps.c
               nids2arps.c
               remaptilt.f90
               remaplib.f90
  Changed files:
               rdradcol.f90
               cmpcldlib.f90

ARPS5.0.0 IHOP_2 (May 17, 2002)

  05/16/2002 (K. Brewster)
  Added BMJ arrays to initgrdvar call to conform with
  latest updates to that subroutine.  Added deallocate after
  the call to initgrdvar for some arrays not needed after
  that call.

  05/16/2002 (Yunheng Wang and Ming Xue)
  Added a new program (joinbin2hdf) to join binary data file dumped
  from MPP processors and dump a HDF4 format data file

  05/15/2002 (Kevin Thomas and Yunheng Wang)
  Configured "88d2arps_rt" to be built the same way as "88d2arps_a2"
  according to Kevin Thomas' suggestion. Files affected: makearps,
  src/88d2arps/Makefile

  05/14/2002 (Yunheng Wang and Ming Xue)
  Added scripts in makearps to identify the processor type automatically
  for ifc compiler

  05/13/2002 Keith Brewster
  Updated ./data/adas/radarinfo.dat for new WSR-88D network sites.

  05/11/2002 Keith Brewster
  Updated ADAS subroutine cmpclddrv to include a check for double-counting
  of liquid water by the Smith-Feddes scheme (clouds) and the reflectivity-to-
  precipitation hydrometeor mapping.  Also modified the ramp-up of cloud ice in
  Smith-Feddes scheme to ramp cloud ice from -5 to -25 C from -10 to -30 C due
  to excessive supercooled liquid.

ARPS5.0.0 IHOP_1 (May 10, 2002)

  05/13/2002 (Yunheng Wang)
  Added two commands in makearps (splitfiles_mpi, splithdf_mpi) for
  compiling MPI version of splitfiles and splithdf.

  05/09/2002 (Fanyou Kong)
  Added the WRF new Kain-Fritsch cumulus parameterization scheme (WRF
  April 2002 version: KF_ETA) with shallow convection. This option can
  be selected with cnvctopt = 5 (the old K-F version is still reserved
  for cnvctopt = 3). The feedback factor (kffbfct) and the sub-
  saturation option (kfsubsattrig) are passed-in as the old version.
  The frequency of ARPS calling cumulus parameterization subroutine
  is controlled by confrq (in seconds). But the location of confrq in
  arps.input is confused. To avoid such confusion, I adjust arps.input
  to put confrq to a more noticeable location just behind cnvctopt.
  confrq = 300 (5 min) is a reasonable value to use.

  Changed files include:
    Makefile
    input/arps.input
    src/arps/Makefile
    src/arps/cumulus3d.f90
    src/arps/init3d.f90
    src/arps/interface_wrf_bmj.f90
    src/arps/rst3d.f90
    src/arps/tinteg3d.f90
  New files include:
    src/arps/interface_wrf_kfeta.f90
    src/arps/module_cu_kfeta.f90

    05/07/2002 (Keith Brewster)
    Additional options to ptcldopt in ADAS comprehensive cloud analysis
    for improved diagnoses of temperature profiles in clouds.

    Added an option to ADAS to modify the soil surface temperature (tsfc)
    based on the analyzed 2-m temperature and the current net radiation.
    Controlled by parameter tsfcadj. (David Jahn, Jerry Brotzge and Dan Weber)

    Added ability to reduce data volume on for radar velocity analysis
    by resampling remapped fields. Controlled by new ADAS input variables
    radistride and radkstride.  Also radar data will not be read-in as
    data columns if that particular radar type (e.g. NIDS) will not be used
    in the successive corrections analysis.

    05/07/2002 (Keith Brewster and Leilei Wang)

    Radar remapping package upgrade:

    Updated remapping of radar data in nids2arps and 88d2arps from a simple
    local averaging to a local least squares polynomial interpolation
    or smoothing.

    Added additional Doppler velocity unfolding capabilities to nids2arps and
    88d2arps.  Unfolding in the remapper now uses a background field from
    an ARPS model run, external model, or sounding as an aid to unfolding.
    Also added detection of ground clutter targets using local statistics
    of reflectivity fields and the Doppler velocities.

    Added -novel command line switch to nids2arps and 88d2arps to speed
    remapping programs by not remapping the radial velocities when they
    will not be used in the ADAS analysis.

    Added ability to write hdf formatted files for remapped radar
    data in nids2arps and 88d2arps. Controlled by command line switch
    -hdf n, where n is an integer from 0 to 7 indicating hdf4
    data compression level.  Corresponding reading routine upgrade in ADAS


    05/07/2002 (Keith Brewster and Leilei Wang)
    Added ability to write hdf formatted files for remapped satellite
    data from mci2arps.  Controlled by command line switch
    -hdf n, where n is an integer from 0 to 7 indicating hdf4
    data compression level.  Corresponding reading routine upgrade in ADAS.

  05/07/2002 (Eric Kemp)
  Fixed bugs in arpsdiff.f90 and added code to prevent interpolation when
  both grids have the exact same domain.

ARPS5.0.0 IHOP_0 (May 03, 2002)

  05/04/2002 (Yunheng Wang)
  Minor changes in input files and Makefiles. Replaced "&END" with "/"
  in arpsintrp.input, arpsintrp_ls.input, arpsassim.input, arpsverif.input.
  Added "rm *.mod *.d work.pc, work.pcl"  in some Makefile.
  Added subdirectory "src/arpsverif" in scripts/getdiff.
  Forced ifc to compile some files (those that take a long time to
  compile) in arps, adas, ext2arps, arpsplt etc. using "-O0" in the
  respective Makefile.

  05/01/2002 (Jason Levit, Dan Weber and Eric Kemp)
  Added the first version of the ARPS verification system.  This first
  version will perform simple verification statistics on ARPS
  model data using single-point surface observations.

  05/03/2002 (Diandong Ren, Ming Xue and Yunheng Wang)
  Added the effect of seasonal deep and skin soil layer temperature
  difference into the soil temperature equations. New parameters
  tsoil_offset and tsoil_offset_amplitude added in arps.input.

  Added codes for dealing with very dry soil conditions in soil
  moisture equations following Noilhan and Mahfouf (1996).

  Output shflx, the sensible heat flux from soilemb, is now in terms of
  potential temperature instead of temperature. The value
  is not used by the model though and only affects diagnostics output
  of this flux.

  Files affected: arps.input, initpara3d.f90, globcst.inc and soilebm3d.f90.


  05/03/2002 (Keith Brewster)
  Corrected time calculation in arpstintrp.f90 and a print statement in init3d.f90.

  04/30/2002 (Zuwen He)
  Allowed sub-saturation in all the grid-scale moist processing options,
  and sub-saturation in the Kain-Fritcsh scheme (by John Kain).

  04/30/2002 (Fanyou Kong)
  Major modifications to the ensemble codes to accommodate BGM (Breeding
  Fast Growing Mode) IC and BC generation using the same codes as SLAF
  does. Random perturbation procedure is included in both arpsensic.f90
  and arpsensbc.f90 by specifying proper options in the input files. The
  input files (arpsensic.input and arpsensbc.input are also used to
  control whether to generate IC and BC for SLAF or for BGM). The domain
  configs are also read in directly from the ARPS data.

  Changed files include:
    input/arpsensic.input
    input/arpsensbc.input
    input/arpsenscv.input
    src/arpsens/arpsensic.f90
    src/arpsens/arpsensbc.f90
    src/arpsens/arpsenscv.f90

WDT_CAPS merged version

  04/26/2002 (Ming Xue)
  Fixed a bug for FCT advection scheme in advfct3d.f90.

  04/19/2002 (Yunheng Wang)
  Fixed a mpi bug associated with periodic boundary. advct3d.f90, advfct3d.f90,
  bc3d.f90, bcdif3d.f90, init3d.f90, radfrc3d.f90, tke3d.f90 were touched.

  04/10/2002 (Kevin Thomas)
  Added Kevin's MPI version to split HDF format files.

  04/10/2002 (Yunheng Wang)
  MPI bug fixed again in subroutine initgrdvar.

  04/05/2002 (Eric Kemp)
  Bug fixed on sub cuneuwtr and cptcwtr in sfcphy3d.f90.

  03/28/2002 (Dan Weber)
  Fixed arpsstop calling in many files.

  03/26/2002 (Yunheng Wang)
  Fixed some errors, warnings and FYIs according to the output from flint.

  03/22/2002 (Eric Kemp)
  Fixed bug in fsplitsoilini.f90.

  13/03/2002 (Eric Kemp)
  Added WRF BMJ cumulus scheme.

  03/14/2002 (Yunheng Wang)
  Merged with the last two updates in version Beta7
  (02/23/2002 by Ming Xue and 02/24/2002 by Yunheng Wang).

  03/12/2002 Gene performed the merge.

Version ARPS5.0.0Beta7

  2/24/2002 (Yunheng Wang)
  Modified a lot of files to eliminate some warnings when compiled using
  ifc (Tab character, label not referenced, format not used etc.). Most
  of the labels were just commented out when followed by CONTINUE,
  others are removed when followed by executable statement.

  2/23/2002 (Ming Xue)
  Modifed subroutines WRTVAR1 and READVAR1 in outlib3d.f90 to allow for
  time > 999999 seconds and fixed the length of strings varname and
  varunits written to data to 40. Longer strings will be truncated.
  src/arps/outlib3d.f90 modified.

  2/18/2002 (M. Xue, D. Weber, and X. Jin (11/9/2001))
  Added monotonic option to 4th order computational mixing.  Added 6-th
  order computational mixing and included the monotonic option.

  2/17/2002 (Jidong Gao)
  Fixed bugs in arpsio3d.f90 and ascio3d.f90.

  2/15/2002 (Yunheng Wang)
  Fixed a bug in soilebm3d.f90 which was introduced in recent surface
  physics updates.
  Fixed a bug in several files associated with the calling of soilcntl
  which was introduced because the recent streamlining of the
  temporary array usage.
  Added an option in makearps to specify processor extension required
  for ifc on linux (makearps -x[iMKW] arps).
  Fixed a typo in tmix3d.f90 when calling mpsend2dew and mprecv2dew.

  2/04/2002 (Ming Xue)
  Upgraded arpstrn to include 30 second global terrain elevation data
  support. See input/arpstrn.inupt for more info. This data set assigns
  ocean/sea elevation to a missing value. arpstrn sets it to zero
  before applying the optional smoothing therefore smoothing can spread
  land elevation into water. Future improvement can be made here.

  1/31/2002 (Ming Xue)
  Fixed a problem in v5dio3d.f90 that occurs when nstyp>1.
  Also increased the values of parameters maxvars, maxrows
  and maxcolumns in include/v5df.inc and include/v5d.h.

  01/09/2002 (Yunheng Wang)
  Removed "-N1256" link option in makearps for sun4 platform.
  Removed "-xK" from default "LDR_str" and "FFLAGS0" in makearps
  for linux ifc according to suggestion from Keith.
  Added "-O4 -qsuffix=f=f90" option for IBM O4.
  Changed some options for Linux workstation using the pgf90
  fortran compiler.

  Fixed a bug in sfcphy3d.f90 introduced in recent code reorganization.

  12/19/2001 (Yunheng Wang)
  Merged with Keith's updates. Detailed update information was available
  in each changed file.
  Bug fixed in mpisubs.f90 for periodic boundary condition.

Version ARPS5.0.0Beta6

  12/19/2001 (Ming Hu)
  Added codes in arpsextsnd.f90 for writing out an additional sounding
  file in a format readable by ARPS (for initialization).

  12/10/2001 (Ming Xue)
  Further streamlining of temporary array usage in surface physics
  routines. Automatic 2D temporary arrays are now declared in the
  subroutines instead of being passing down from upper levels to
  simplify the calling interface. 3D temporary arrays should still
  be declared at the top level, however, for more efficient storage
  management.
  Files soilebm3d.f90 iolib3d.f90 sfcphy3d.f90 and tinteg3d.f90 changed.

  12/10/2001 (Kevin Thomas)
  Bug fixed in mci2arps.c. An array out of bounds problem has
  been corrected. Testing was done by Jason Levit.

  12/5/2001 (M. Xue)
  Significant reorganization of the code structure of surface
  physics. A wrapper subroutine sfcphyiscs now calls SFCFLX,
  and SOILEBM etc. The call to SFCPHYSICS now replaces the original
  call to SFCFLX in TINTEG.
  Calculations of drag coefficients and fluxes are grouped into
  new subroutines DRAGCOEF and SFCFLX, respectively.
  Named local arrays are defined for many 2D variables for better
  readability.
  Files sfcphy3d.f90 and tinteg3d.f90 changed.

Version ARPS5.0.0Beta5

  11/21/2001 (Yunheng Wang)
  Bug fixed associated with MPI run on microphysical process and
  radiation computation. Added mpupdatei call for ict & icb in
  subroutine initgrdvar. Corrected an error in kfpara.f90.
  Set ifc as the default compiler on Linux.

  10/16/2001 (Ming Xue and Eric Kemp)
  Added option to calculate and plot reflectivity based on
  Ferrier's formulation in arpsplt (rfopt=2).
  Subroutine reflec_ferrier added to src/arps/outlib3d.f90.
  arpsplt.f90, arpspltlib.f90, arpspltderive.f90 in src/arpsplt and
  arpsplt.input changed.
  Subroutine cal_rfc in arpspltderive.f90 recoded.

  09/28/2001 (Yunheng Wang)
  Tested and verified the correctness of HDF history dumps on
  Paige (SGI 2000) and Cirrus (Tru64 Unix) for all compression options.

  09/20/2001 (Ming Xue)
  Added rayklow used by Rayleigh damping into the rstart data set.
  rst3d.f changed.

  09/10/2001 (Keith Brewster)
  Corrected call to dhdr in anxiter.f90 affecting radial velocity
  corrections.  Modified the radial velocity increments in
  prepradar.f90 and anxiter.f90 to speed convergence to radial
  velocity in ADAS analysis.

  09/09/2001 (Ming Xue)
  Added imove=2 option and changed the definition of imove=1 option
  for arpsplt. arpsplt.input and src/arpsplt/arpsplt.f90 changed.

  09/07/2001 (Ming Xue)
  In scripts/testmkarps, arpsagri changed to arpsagr.

  09/07/2001 (Ming Xue)
  Diagnostics of Courant numbers in all three directions added to
  subruotine maxmin. Arrays mapfct and wcont added to maxmin argument list,
  which required change in the argument list of and calls to initout,
  output, abortdmp, chkstab.
  Files arps.f90, tinteg3d.f90, out3d.f90, arpsagri/arpsout.f90 and
  arpsassim/arpsassim.f90 were changed.

  09/06/2002 (Yunheng Wang)
  Bug fixed in fsplitsoilini.f90 which was introduce because of the
  changes in wrtsoil subrountine by Gene Bassett in July 2001.

  08/22/2001 (Yunheng Wang)
  Updated nids2arps code from Eric Kemp.
  Changed default option for arpsensbc to "-opt 3" in makearps to
  avoid a link error on SGI machines.

  08/09/2001 (Yunheng Wang)
  Changed pgf90 to be the default compiler for linux in makearps.
  Used etime() instead of second() in function f_cputime of lnxlib3d.f.

  08/08/2001 (Yunheng Wang)
  Fixed a bug in ARPSSFC for the first call of get_ged(1,...).
  Fixed a bug for subroutine READSOIL in file iolib3d.f90. Removed
  the IF(stypin ==0) block near the end of the subroutine.
  fixed a bug in file arpsio3d.f90 to eliminate one warning info.
  These bugs were introduced in Gene's last update on July 27, 2001

  Rewrote some code in arpssfclib.f90 according to Fortran 90 standard.
  Removed colst, rowst, colvt, rowvt, colnv, & rownv from arps.input
  Removed a duplicated grdsrt=.true. from arps.input

  07/27/2001 (Gene Bassett)
  Updated ARPSSFC to eliminate variables colst, rowst, colvt,
  rowvt, colnv, & rownv from arpssfc.

  07/27/2001 (Yunheng Wang)
  Rewrote nids2arps.c in Fortran 90.

  07/25/2001 (M.Xue)
  Modified getncepavn3 and extract_avn subroutine and program.

  YASUNAGA Kazuaki <yasunaga@KUGI.KYOTO-U.AC.JP>.
  Change log and comments by M. Xue.
  07/15/2001.

  Corrected in micro_ice3d.f90 line
  y1 = .78/zr(i,j)**2+rn23a*SQRT(tem2d2(i,j))& *scv(i,j)/zr(i,j)**2.75
  to
  y1 = .78/zr(i,j)**2+rn23a*SQRT(tem2d2(i,j))& *scv(i,j)/zr(i,j)**2.9.
  This error was made when the original code from Wei-Kuo Tao was
  adapted for use by ARPS (in the process of optimizing the code).
  This bug affects rainwater evaporative cooling. Noticable differences
  are found in the May 20 supercell storm stimulations with and without
  this bug fix. The effect should be quantitative only for most applications.
  06/27/2001 (Yunheng Wang)
  1. memory usage in arpssfc optimized
     (src/arpssfc/arpssfc.f90, src/arpssfc/arpssfclib.f90)
  2. mpi fake zone updated in radtrns
     (src/arps/radtrns3d.f90)
  3. split file added for restart run
     (src/arps_mp/fsplitrestart.f90, src/arps_mp/splitfiles.f90,
      src/arps_mp/Makefile, Makefile)
  4. scripts changed, added and removed (scripts/updinc.pm)
     (scripts/test_restart.pl, scripts/test_may20delcitystorm.pl,
      scripts/README_plscripts, scripts/link_data, Makefile)
  5. a bug fixed in src/arps/out3d.f90 for subroutine maxmin
     ( tem2(i,j, 1)=tem2(i,j,   1) ==>
                   tem2(i,j, 1)=tem2(i,j,   2) )
!wdt update
  2001/07/27 (Gene Bassett)
  Eliminated variables colst, rowst, colvt, rowvt, colnv, & rownv
  from arpssfc.

  2001/06/19 (Gene Bassett)
  Added the "adjust" namelist block to arps.input containing variables
  associated with hydrostatic and wind adjustments used in ADAS and EXT2ARPS.

  2001/06/18 (Gene Bassett)
  Corrected error with absolute time (iabstinit variables) in ARPSTINTRP.

  2001/06/18 (Gene Bassett)
  Cleaned up namelist input of grid and map projections parameters in
  ARPSTRN.

  2001-06-01 (Gene Bassett)
  Fixed use of obropt > 9 in subroutine adjuvw.  If subroutine was called
  more than once, subsequent calls would use obropt-10 instead of obropt.

  2001/05/31 (Gene Bassett)
  Added exttrnopt to EXT2ARPS, an option to use input grid terrain for
  output grid.  Also corrected a bug introduced when updating the use
  of arps as an external model (2000/08) which caused only the first
  external file (regardless of external model type) to have u&v rotated
  to ARPS map projection.

  2001/03/28 (Gene Bassett)
  Corrected error in mci2arps (xnw & ynw in file inisatarps.f90) which was
  causing satellite data to be shifted over one grid box in x- and two
  in the y-direction.

Version ARPS 5.0 Beta4

  04/16/2001 (Keith Brewster)
  Updated data/adas/radarinfo.dat.

  04/12/2001 (Ming Xue)
  Updated README file.

  Strange behaviors/problems seen with mergetrn on cirrus.
  Floating point under flow with interpolation when two grids are
  the same.
  Bug fixes in mergetrn.f90.

  04/02/2001 (K. Brewster)
  Corrected calculations for qvsnd and rhssnd arrays in extmnsnd.
  Bug was introduced in April 2000 and causes qvbar created
  by ext2arps to be too small although total qv is okay and it is
  the total qv that matters most. outlib3d.f90 changed.

  2001/3/27 (Ming Xue)
  splitfiles should split soil model IC and sfc characteristics
  files when soilinit=3 and sfcdat=3, respectively. It was
  doing it for option 2 only.

  2001/3/22 (Ming Xue)
  Change fix_stypfrct_nstyp to fix_styp_nstyp which now also fixes
  soil type when nstyp1 < nstyp. fix_styp_nstyp and fix_soil_nstyp
  should be called in hdfio3d.f, etc too. Still, flowing point
  devide error occurs when number of soil type in history input
  is less when nstyps specified in input file (sfcdat=2, soildat=3).
  Need to find the cause. Before that, make sure nstyps in arps.input
  is set to the same as in the data.

  Added calls to fix_soil_nstyp and fix_styp_nstyp in gribread.

  Dropped support for packed binary history dump format (hdmpfmt=4).

  2001/3/22 (Ming Xue)
  Added check on nstyp when reading input history data.
  They need to be consistent with that in the program. Otherwise,
  the program stops (the stop is removed later on 2001/3/22).
  Files changed: binio3d.f90, ascio3d.f90,
  hdfio3d.f90, gradsio3d.f90, gribio3d.f90 and pakio3d.f90.


  2001/3/21 (Ming Xue)
  Fixed a bug in dir5min.f90 generated by code translator
  (EXIT should have need CYCLE in a loop)..
  Fixed a minor bug in arpsintrp.f90 (affects diagnostics only).

  2001/3/12 (Ming Xue)
  Renamed src/assim to src/arpsassim.
  Renamed src/agri to src/arpsagr. Changed in makearps, Makefile,
  src/arpsagr/Makefile agri to arpsagr for ARPS Adaptive Grid
  Refinement. Renamed test_agri.pl test_arpsagr.pl changed changed
  agri to arpsagr inside. Renamed README.agri and arpsagri.f90 to
  README.arpsagr and arpsagr.f90 in src/arpsagr, respectively.

  Changed namelist block arpsagri to arpsagr. Files changed:
  input/arps.input, src/arps/initpara3d.f90.

  Updated src/arpsagr/arpscnst.f90 to include new timing variables
  found in globcst.inc.

  Removed nxc, nyc and nyz in the arpsagr namelist block
  in arps.input. They will be the same as nx, ny and nz.

  Single domain AGR run of May 20th storm results identical as
  regular single domain run. Nested run blew up after 1 step.

  Corrected namelist read order error in arpstern.f90.

  2001/3/5 (Yunheng Wang and Ming Xue)
  Implemented dynamic memory allocation for all programs left
  over from earlier implementation, including arpsprt,fakerad,
  pltradcol,arpsdiff, arpsraindiff, arpsensbc, arpsenscv,
  arpsensic, mnet2arps, arpsassim, and wtretcol. Converted
  input files to namelist format for several programs.
  Very limited testing has been done.
  Removed include/diffdims.inc.
  Change files include
  input/fakerad.input     (new)
  input/pltradcol.input   (new)
  input/pltsatfld.input   (new)
  input/arpsraindiff.input (new)
  input/arpsprt.input
  include/remap.inc
  src/88d2arps/Makefile
  src/88d2arps/fakerad.f90
  src/88d2arps/pltmap.f90
  src/88d2arps/pltradcol.f90
  src/88d2arps/remaplib.f90
  src/88d2arps/remaptilt.f90
  src/arpsdiff/Makefile
  src/arpsdiff/arpsdiff.f90
  src/arpsdiff/arpsraindiff.f90
  src/arpsens/Makefile
  src/arpsens/arpsensbc.f90
  src/arpsens/arpsenscv.f90
  src/arpsens/arpsensic.f90
  src/arpsprt/Makefile
  src/arpsprt/arpsprt.f90
  src/arpssoil/mnet2arps.f90
  src/arpssoil/read_obs.f90
  src/assim/Makefile
  src/assim/arpsassim.f90
  src/assim/assimptpr.f90
  src/mci2arps/Makefile
  src/mci2arps/inisatarps.f90
  src/mci2arps/pltsatfld.f90
  src/wtretcol/Makefile
  src/wtretcol/wtretcol.f90
  src/arpssoil/Makefile
  input/arpsensbc.input
  input/arpsenscv.input
  input/arpsensic.input )
  scripts/getdiff
  HISTORY makearps Makefile

  The only program that is still using dims.inc is
  src/arpsintrp/arpsintrp_ls.f90 which has not been updated for
  a while. We are keeping dims.inc in case a user program
  still requires it.

  2001/2/26 (Ming Xue)
  Cleaned up the arpssoil code and reduced temporary storage usage.
  (Partially completed).

Version ARPS 5.0 Beta3

  2001/2/14 (M.Xue)
  Changed &END to / in namelist input files. Corrected typo 'stoped'.

  Added code to read namelist arpsagri into initpara and prtlog.
  initpara3d.f changed. This is to avoid problem on machines like
  cray J90 when reading arps.input which contains arpsagri namelist
  block. J90 cannot skip unneeded blocks. The same needs to be done
  for any other programs that reads arps.input without using
  subroutine initpara.

  Added statement READ(5,incr_out,END=200) in initadas.f90.

  For ADAS, moved call to initpara outside subroutine INITADAS.
  INITPARA is now called before INITADAS in ADAS main program.
  adas.f90, initadas.f90 and src/adas/Makefile changed.

  Added call to INITADAS in ext2arps and arpssfc main programs
  and namelist read for extdfile in arpssfc to avoid problem with
  sequential namelist read of arps.input on Cray J90.
  Added initadas to libadas.a. Created ext2arps.inc.
  ext2arps.f90, arpssfc.f90 and related Makefiles changed.

  Tested reading arps.input with arps, ext2arps and arpssfc on J90.
  Minor fixes in arps.input.

  2001/2/13 (M.Xue)
  Reset -io nohdf as default.

  2001/1/18 (M. Xue)
  Fixed a minor problem in arpsplt.f90 and in ext2arps.f90 found
  by Yuki Honda.

Version ARPS 5.0 Beta2

  2000/12/08 Gene Bassett
  Minor change in gribio3d.f90.

  11/28/2000 (D. Weber)
  Implemented dynamic array allocation for arpstern.f90.
  nx and ny are now set in arpstern.input, and terrain.inc is no
  longer needed.
  Affected files: arpstern.f90, arpstern.input, terrain.inc and
  make files involving terrain.inc.

  11/28/2000 (Eric Kemp)
  Commented out a section of code in subroutines getnmcrucp236 and
  getnmcruc211 that was intended to correct for data that was
  underground for RUC pressure level data. The is proved to
  be unnecessary and the code will result in abnormally high mean
  sea level pressures in high terrain.
  File changed: /src/ext2arps/getextd3d.f90.

  11/27/2000 (Ming Xue)
  Fixed a bug in ext2arps.f90. aj3z was not initialized before,
  causing w calculated in adjuvw to be equal to zero.
  This bug has been in ext2arps since array aj3z was introduced in
  version 4.5.0.

  11/23/2000 (Ming Xue)
  More changes in makearps and other Makefiles. Change c in the
  first collumn of comment lines in input files to !.

  11/20/2000 (Ming Xue)
  Minor problem fixes in makearps.

  11/18/2000 (Ming Xue)
  For RUC2 (grid 236) data, water eqivalent snow depth is now read in
  instead of snow depth. This is not consistent for all data sets.
  include/gribcst.inc changed. For AVN data, MSL pressure is also read in.
  src/ext2arps/getext3d.f90 changed.

  11/17/2000 (Ming Xue)
  Made -io hdf the default option for makearps. To turn off linking with
  HDF library, us -io nohdf option.

  Fixed a bug in arpsplt.f90 that was causing the program to bomb on SGI machines.

  Should use expmn in places of exp() in radlib3d.f (in two places)?

  Problems:

  HDF format for exbc files remain untested.
  soildmp = 2 (HDF format) (read or write?) bombs on cirrus.
  Bug fixes in exbcio3d.f for reading HDF format exbc files
  Changes in src/arps/arpsio3d.f90 src/arps/dump3d.f90 src/arps/exbcio3d.f90
  src/arpsplt/pltgrid.f90 src/arpssfc/Makefile src/ext2arps/Makefile
  src/ext2arps/ext2arps.f90

  calls to a3dmax near the end of exbcread activated. Might cause problem
  with MPP runs.

  11/13/2000 (Ming Xue)
  Fixed a minor bug in Makefile. Set vpath=0 in scripts/mkarpswd.
  Added -byteswapio option for pgf90 under x86 Linux.

Version ARPS 5.0 Beta1
  11/12/2000 (released ARPS 5.0 Beta1 to local users)

Version arps50pre7

  11/11/2000 (Ming Xue)
  Made Postscript output the default format for graphics output.
  zxpostf90 instead of zxncarf90 is now the default linker when ZXPLOT
  library is used.

  Linking under Linux with PGI fortran pgf90:
    arpsprtlib.o: In function `strcap_':
    arpsprtlib.o(.text+0x76): undefined reference to `lge_'
    arpsprtlib.o(.text+0x9c): undefined reference to `lle_'
    arpsprtlib.o(.text+0xb5): undefined reference to `ichar_'
    arpsprtlib.o(.text+0xdd): undefined reference to `char_'
  str_caps converts a lower case string to uppercase sting.
  Strange - lge, lle, ichar and char are fortran intristic functions.

  All other programs passed compilation test with pgf90 under linux (f5),
  except for arpsagri and those that require NCAR graphics - the linux ncar graphic
  library we have is not compatible with pgf90.

  Problem linking mci2arps under Tru64 Unix fixed by adding link option -nofor_main.

  11/09/2000 (Ming Xue)
  Performed compilation tests on Sun Solaris 7.0 (Rossby), Cray J90 (with and
  without -p option), Tru64 Unix (Cirrus) with and without -p option.
  A few minor probelms fixed. May 20 supercell simulation produced
  very similar results as earlier versions.
  ARPSAGRI still needs work - not compiling right now.

  Fixed minor problems in src/assim/arpsassim.f90 and initassim.f90.
  Bug fixes in hdfio3d.f90 and iolib3d.f90 (both having to do with
  new HDF format writing).
  Bug fix in cloud_cv.f90. Affects diagnostic output only.

  11/08/2000 (Ming Xue)
  Changes to makearps.
  Minor change in /src/arpstrn/arpstrn.f.

  11/8/2000 (Ming Xue)
  getextd3d modified to include several additional variables at sigma=0.995.
  Files src/ext2arps/extract_avn.f90, src/ext2arps/getextd3d.f90 and
  include/gribcst.inc changed.

  11/07/2000 (Gene Bassett)

  Corrected problems with arps_mpi.  The MPI version now runs correctly for
  real data case (with exception noted below).

  Updated nids2arps to work under little endian platform (currently not
  included in official version).

  Added new cpu/wall clock timing utility.

  Outstanding problems:

    Arps_mpi has bugs when using sadvopt={4,5}

    File blocking problem with arps_mpi when initializing from a history file
    (maxmin call inside dtaread) work-around is to set
    max_fopen=nproc_x*nproc_y.

    Arpsintrp's bglopt=5 (new option) has problems.

    Ext2arps does not work properly with ARPS as the external model type.

    ARPSAGRI is broken. List of constants, arrays need to be
    updated since new variables have been added. e.g., acct_cpu_time array
    now replaces scalar variables for timing.

    Tru64 f90 compilation warnings/problems:
      File = assimvrfil.f90, Line = 155 xmove= xshift - umove*(curtim-assimtim(1))
      Variable "ASSIMTIM()" is used before it is defined.
      File = assimvel.f90, Line = 424 xmove= xshift - umove*(curtim-assimtim(1))
      Variable "ASSIMTIM()" is used before it is defined.

      mci2arps link failure under Tru64 Unix. Duplicated "main" found - related
      to linking fortran and C programs.

      When doing makearps ncdf2arps, 'cc -c wsibase.c' failed due to lacking
      machines/OS/compilers support in cfortran.h for Tru64 Unix.

      On Tru64 Unix, openMP directives in anxiter.f90 cmpclddrv.f90 cmpcldlib.f90
      interfere with kf90 (KAP fortran) automatic parallelizer, and the
      compilations fail.
      Subroutine fi634 in nmcdecode.f90 fails to compile with kf90. Believed to
      be a compiler problem.

    arpsstop_ is unresolved under SGI IRIX (only) with default compilation
    option (-Ofast). No problem with -O1 (makearps -opt 1) option.
    Perhaps a compiler bug?

    makearps ext2arps.gempak fails on paige.ou.edu (SGI O2K) because the
    GEMPAK lib is in -o32 format. -o32 is no longer supported by the installed
    f90 compiler.

  To do list:

    Implement dynamic memory allocation for
      88d2arps/fakerad.f90
      88d2arps/pltradcol.f90
      arpsdiff/arpsdiff.f90
      arpsens/arpsensbc.f90
      arpsens/arpsenscv.f90
      arpsens/arpsensic.f90
      arpsintrp/arpsintrp_ls.f90
      arpsprt/arpsprt.f90
      arpssoil/mnet2arps.f90
      assim/arpsassim.f90
      assim/assimptpr.f90
      mci2arps/inisatarps.f90
      mci2arps/pltsatfld.f90
      wtretcol/wtretcol.f90
   Currently they still use dims.inc.

Version arps50pre6

  9/8/2000 (Ming Xue)

  Merged with Gene Bassett's version (arps50pre5_ac) who implemented the
  dynamic memory allocation for many other problems and debugged and tested
  most of the programs.

  2000/08/14 (Gene Bassett)
  Added multiple soil types, sfcdata variables and grid staggering
  for use with arps history format of external model data in EXT2ARPS.
  Added options allowing EXT2ARPS to produce results similar to
  ARPSINTRP (intropt, ext_lbc, ext_vbc).

  Added -zxpost and -zxncar makearps options for arpstrn program.
  By default, arpstrn does not produce graphics.

  Most programs are tested to work correctly although thourough testing
  is still needed.

Version arps50pre5
  8/12/2000 (Ming Xue)
  Fixed a bug in src/arpsio3d.f90. Call to grid_get_dims was commented out.
  Merged Gene Bassett's updates/fixes.
  Many other changes and updates

Version arps50pre4

8/10/2000 (Ming Xue).
   Converted arps2gem and arps2ncdf to Fortran 90 and implemented
   dynamic memory allocation.
   Removed map projection namelist block in arps2gem.input.
   These parameters will be read in from data file.

   Converted arps2ncdf to f90. A test failed. arps452pre has the same problem.

2000/07/27 (Ming Xue)

   Changed dynamic memory allocation to use ALLOCATABLE instead of
   POINTER to avoid double memory usage with Tru64 Unix fortran.
   The behavior is believed to be due to a compile bug.
   Memory usage accounting needs to be added with this version.

   Converted entire system into Fortran 90 free format.
   Passed compilations of all programs on SGI O2000 and Compaq Tru64 Unix.

   Made own version of GEMPAK include files in f90 free format
   (named GEMPRM.*.inc in include).

2000/07/01 - 2000/07/25 (Ming Xue)

   Version arps50pre2

   Upgraded ARPSPLT. Removed IDATE. Now using F90 date-time function.

   Implemented and tested dynamic memory allocation with ARPSTRN, EXT2ARPS, ARPSREAD,
   Re-implemented and tested d-memory allocation with ARPSINTRP.

   Tested (with a single-sounding case) dynamic memory version of ARPS, ARPSCVT, ARPSPLT.

   Verified HDF data format option 1 and 2 (had problem reading 16 bit version).

   Added routines for obtaining grid dimensions from history data file.

   Move program mergetrn from ext2arps to arpstrn. Implemented d-memory allocation.

   A large number of files changed, including all make files.
   Created arpsio3d.f, binio3d.f and ascio3d.f, removed read3d.f and dump3d.f.

   Added snap_to_grid and same_res options for arpsintrp.

2000/06/?? (Gene Bassett)

   Version arps50pre

   Implemented dynamics memory allocation for many programs
   Many need testing.
   Implemented HDF format for boundary and other data files.
   Need testing with data rather than history dump.
   Implemented new explicit MPI message passing calls. No translator
   will be needed. Need testing.

2000/06/20 (Eric Kemp and Keith Brewster)
  Changed BRN Shear to be the denominator of BRN, instead of wind
  speed, now has units of speed squared.


2000/04/21 (Gene Bassett)
   Fixed a boundary condition bug in adjuvmv.  Affected file: grdgrns3d.f.

2000/04/17 (Donghai Wang)
   Added support for AVN data format in ext2arps.  Affected files: ext2arps.f,
   getextd3d.f, rdnmcgrb.f, arps.input.

2000/04/17 (Ming Xue)
   Added library routines for COMPAQ Tru64 Unix.  New file: tru64lib3d.f.

2000/04/17 (Ming Xue)
   Added an option that allows one to specify input history data
   at an equall time interval.  Affected files: arpscvt.f, arpsintrp.f,
   arpsplt.f, outlib3d.f, arpscvt.input, arpsintrp.input & arpsplt.input.

2000/04/14 (Gene Bassett)
   Merged the ADAS input file back into the ARPS input file.  Affected files:
   adas.f, initadas.f, Makefile, README, test_adas.pl & mkarpswd.

2000/04/11 (Gene Bassett)
   Added the option to use subroutine extmnsnd to derive the base
   sounding when running arpsintrp (bglopt=5).  Also increased the number
   of levels in the 1-d sounding used to generate the base state to 601.
   Moved the call to bcs2d for the terrain field into the ternopt=1 block
   (so that real data does not get changed to zero gradiant in the fake
   zones).  Affected files: ext2arps.f, extlib.f, arpsintrp.f, arpslib.f,
   init3d.f, arpsintrp.input & Makefiles for arps and arps_mp.

Version 4.5.2.

2000/04/05 (Gene Bassett)
   Added (restored) support for HDF4 format history dump.
   More testing needed.

2000/02/29 (Gene Bassett, Yang Kun, Vince Wong)
   Corrected typo in subroutine sfcflx.  Affected file: sfcphy3d.f.

2000/02/28 (Gene Bassett)
   Corrected subroutines vbcw, bcu2d & bcv2d.  Moved subroutine extndsbc to
   bc3d.f and added message passing markers.  With these corrections the
   arps now works properly in message passing mode.  Affected file: bc3d.f.

Version 4.5.1:

2000/02/14 (Eric Kemp, Gene Bassett)
   Fixed the conversion of RUC relative humidity to specific humidity in
   subroutines getnmcruc211, getnmcrucp236, getgemruc & getgemruc2.
   (According to Stan Benjamin, the RH fields in the RUC isobaric GRIB files
   are everywhere with respect to saturation over liquid water.)  Affected
   files: getextd3d.f & getgempak3d.f.

2000/02/04 (Gene Bassett, Yang Kun)
   Fixed an error in soil temperature integration (variable rhst2) causing
   the ground temperatures's interaction with the deep soil temperature to
   be reduced to half of what it should be, primarily slowing changes in
   deep soil temperature.  The bug was introduced in version 4.3.3
   (March 1998).  Affected file: soilebm3d.f.

2000/01/31 (Gene Bassett, Eric Kemp, Vince Wong)
  Corrected the importation of snow cover data in ext2arps for Eta GRIB
  grid 212 model data and changed the treatment of snow cover in the
  ARPS.  Changed the integer variable snowcvr to a real type named
  snowdpth (depth of snow in meters).  The presence of snow now linearly
  changes the albedo of the ground from non-snow to snow albedo as the
  snow depth increases to 0.025 m.  The surface characteristics in the
  surface physics package are switched to that of snow when snow depth
  equal to or greater than 0.025 m.  No snow is allowed over water
  vegetation type or where the surface temperature is greater than
  freezing (updated every time-step).  Note there is currently no snow
  accumulation in the ARPS model.

  Affected files: globcst.inc agrigrid.inc soilcst.inc arpsplt.input
  arps.input arpssoil.input adas.f arps2gem.f arps2ncdf.f arpsassim.f
  arpscnst.f arpscvt.f arpsdiff.f arpsenscv.f arpsensic.f arpsextsnd.f
  arpsinit.f arpsintrp.f arpsolve.f arpsout.f arpsplt.f arpsprt.f
  arpsraindiff.f arpsread.f arpssoil.f arpstgrid.f arpstintrp.f arps.f
  dump3d.f exbcio3d.f ext2arps.f fakerad.f getextd3d.f gradsio3d.f
  gribio3d.f hdfio3d.f init3d.f initpara3d.f inivar.f iolib3d.f mksoilvar.f
  nohdfio3d.f nonetio3d.f nopakio3d.f nosviio3d.f nov5dio3d.f out3d.f
  pakio3d.f radfrc3d.f rdnmcgrb3d.f read3d.f rst3d.f sfcphy3d.f soilebm3d.f
  sviio3d.f tinteg3d.f v5dio3d.f wtretcol.f.

2000/01/07 (Gene Bassett)
  Modified the behavior for the case where soil data read in from file
  and also present in history file.  If soilinit=2, initopt=3 and
  sfcin=1, for soil variables that are not in soildata file the values
  in the history file are used.  Changed file init3d.f.

  Updated arpssoil: renamed mstinit to soilinit2 and added capability to
  update soil data over water and snowcover with data in a soil data file.
  Changed files: arpssoil.input, arpssoil.f & mksoilvar.f.

2000/01/05 (Eric Kemp)
  Fixed problem with century change over (ipds(21) runs from 1 to 100)
  for GRIB data.  Affected file: rdnmcgrb3d.f.

1999/12/23 (Keith Brewster)
  Corrected an error in ADAS which was causing clouds obs to be marked as
  missing when using more than one laps data file (affected file: rdsfcobs.f).

1999/11/24 (Eric Kemp)
  Added RUC2 native & isobaric GRIB files to ext2arps (affected files:
  gribcst.inc, extdims.inc, ext2arps.f, getextd3d.f & arps.input).

1999/11/24 (Gene Bassett, Yuhe Liu)
  Added arpsassim (thermodynamic retrieval) package.

1999/11/19 (Dingchen Hou, Gene Bassett)
  Updated ensemble code.  Executable and file names changed (arpsensbc.f,
  arpsenscv.f, & arpsensic.f).  Input files converted to namelist format
  (arpsensbc.input, arpsenscv.input, & arpsensic.input).

1999/11/19 (Dingchen Hou, Kieth Brewster & Gene Bassett)
  Added corrections by Dingchen Hou to single level data (MDCRS) processing
  in prepsng.f and added an altimeter to pressure subroutine to anxlib3d.f.

1999/11/17 (Jason Levit & Kieth Brewster)
  Corrected MSLP calculation in arps2ncdf.f.

1999/11/16 (Kieth Brewster & Eric Kemp)
  Corrected dimension statements in arpsdiff.f and added surface flux
  variables.

1999/10/15 (Gene Bassett)
  Corrected minor bugs in arpstintrp and added soil & surfurface data files
  to its output.

1999/07/16 (Gene Bassett)
  Integrated Hub-CAPS modifications:

  Added an option, readyfl, to the history dump writing routines to
  create a marker file (same name is the history dump but with "_ready"
  appended to the end) to indicate that writing of the history dump has
  completed.

  Corrected dimensions passed into get_ged, getstyp2 & getndvi2 in
  arpssfc.f.

  Added the capability to nids2arps to save out a radar map file so that
  it need not be recomputed every time nids2arps is run for the same
  terrain.

  Added patches for Great Lakes and other areas in arpstern.

  In arpssoil: Added option to set water temperature over a lat/lon
  box.  Added terrain parameters to input file so an input history file
  is not required.  Added fnldate for api soil moisture generation.

  Updated cldinsert.f with modifications from Jian Zhang.

  Added OpenMP directives to three adas files:  cmpcldlib.f,
  anxiter22.f, cmpclddrv.f.  OpenMP can be used with the -omp flag in
  makearps (SGI only).

  Added -abi option to makearps for compiling with the 64 bit ABI on the
  SGI.

1999/07/15 (Gene Bassett)
  Changed message passing version.  Discontinued the use of
  readinput.F, using the traditional namelist instead.  Added error
  message when MAX_FOPEN is less than the number of processors and a
  sounding file is used.

Version 4.5.0 Update 2.

1999/08/03 (Gene Bassett)
  Corrected a bug which reversed the order of soil levels in GRIB data in
  file rdnmcgrb3d.f (bug was introduced in arps version 4.4.1).  Modified
  the deep soil moisture and temperature to be an average of the three
  soil layers covering 0 to 100 cm in depth in subroutine getnmceta212
  in getextd3d.f.

Version 4.5.0 Update 1.

07/12/1999 (Ming Xue)
  Updated makearps and src/arps/Makefile so that important subroutine
  inline is properly done for radiation, microphysics and K-F cumulus
  parameterization files on Cray vector processors (J90 and T90).

07/11/1999 (Ming Xue and Henry Neeman)
  Fixed a problem with MAKE for most problems under Linux and Digital Unix.
  Makefile in most problem source directories modified.

07/11/1999 (Ming Xue)
  Fixed minor bugs/problems in src/arpstern/arpstern.f, src/adas/prepsng.f
  src/arpsintrp/arpsintrp.f, src/arpsplt/arpspltmax.f, src/arpsplt/pltgrid.f

Version 4.5.0

05/17/1999 (Donghai Wang, Pengfei Zhang and Yuhe Liu)
  Fixed a bug in calling K-F cumulus subroutine.
  Affected file: tinteg3d.f

05/06/1999 (Yuhe Liu)
  Fixed a bug in reading soil variable file for nsytp=1.
  Affected file: iolib3d.f

05-05-1999 (Yuhe Liu)
  Removed all version numbers from file names.
  Affected files: Makefile in root and subdirectories, RELEASE.NOTES
                  The following files were renamed by eliminating
                  version numbers in their filenames:

                  adas25.f arpsagri10.f arps45.f arpscvt13.f
                  arpsdiff21.f arpsintrp20.f arpsintrp_ls10.f
                  arpsplt70.f arpsprt12.f arpssfc21.f arpssfclib21.f
                  arpssoil20.f mksoilvar20.f arpstern12.f
                  arpstintrp10.f ext2arps23.f mergetrn20.f

4/20/1999 (Pengfei Zhang)
  In tmix3d.f, as frstep=1 (first time step) and tmixopt=4
  (Sun and Chang scheme) Kmh and Kmv are determined by using
  Kmh=0.1*tke**2*lh and Kmv=0.1*tke**2*lv instead of Smagorinsky
  scheme in order to be consistent with future values. But tke
  at first time step is calculated from Kmv which is from
  Smagorinsky scheme.
  Affected file: tmix3d.f

04/20/1999 (Keith Brewster)
  In adas25.f a minimum rh of 5% is imposed on the final solution. Some
  previous versions had 3%, others a fixed value for qv that was too
  small. File rdradcol.f has a change to the declaration to isrcrad. This
  is necessary to be compatible with other programs that call rdradcol
  (not in adas), and also this is properly handled in prepradar.f (no
  change) by passing address of element 1 into this subroutine. In
  cmpcldlib.f unused subroutines and functions have been stripped out.

  Affected files: adas25.f initadas.f rdradcol.f cmpcldlib.f

4/14/1999 (M. Xue)
  Added new terrain pre-processing program arpstrn (different from
  arpstern), which currently processes global 5 min data set
  and US+Alaska 3 second data set. Global 30 second data to be
  added later. Biliner and bi-quadratic interpolation options
  are available for fast processing. 5min data is obtained from
  NCAR ftp server while 3 second data can be directly fetched
  by the program from USGS ftp server. New files:
  input/arpstrn.input src/arpstrn/*. makearps, Makefile in root
  directory aand scripts/mkarpswd were modified.

4/1/1999 (M. Xue)

  Rewrote arpsintrp11.f. Special treatment is now given
  to grid points below input grid ground. When output grid
  terrain falls below ground, base-state variables are reconstructed
  from avarages on horizontal planes to ensure x or y independency
  below ground. This is done only for blgopt=4, however.
  For blgopt=4, temperature is extended below ground using a
  costant lapse rate and pressure is hydrostatically balanced.
  Zero gradient is assumed for u, v, w and qv.
  The new code also runs much faster.
  Affected file: arpsintrp11.f which is renamed as arpsintrp20.f.
  input/arpsintrp.input.

3/1/1999 (M.Xue)
  Added new program ARPSTINTRP for interpolating two ARPS history data
  sets to another time.
  Changes and new files: makearps, Makefile, src/arpstintrp/*,
  input/arpstintrp.input.

2/24/1999 (M. Xue)
  Updated README files and docs/arps.tree. Added ARPSmpp.html in docs.

2/24/1999 (M. Xue)
  Several new parameters for fine-tuning the plots are added in
  arpsplt.input. NAMELIST blocks reorganized. arpsplt65.f renamed to
  arpsplt70.f. New political boundary/coast line data files required by
  ZXPLOT V.3 us_spcounty.mapdata us_state.mapdata world_coast.mapdata
  world_country.mapdata world_us_country.mapdata replaced old ones.
  Files changed: makearps, arpsplt70.f, arpspltlib.f and arpsplt.input.

  makearps no longer assumes default locations of zxplot commands such
  as zxncarf77. A user is responsible for setting the proper command
  search path for ZXPLOT package.

2/24/1999 (M.Xue)
  Set contributions of tau11,tau12,tau21 and tau22 (arising from
  terrain-followng coordinate transformation) to momentum fluxes,
  and H1 and H2 to heat and moisture fluxes through the lower boundary
  to zero. The fluxes are already contained in tau13, tau23 and H3
  respectively. This avoids spurious source/sink across the
  lower boundary due to mixing processes in the presence of steep
  terrain. File tmix3d.f changed.

2/24/1999 (W. Martin and M. Xue)
  Changed the coefficient in the dissipation term of TKE equation
  to 0.41 for the lowest two levels from 3.9 for Sun and Chang
  scheme (tkeopt=3). File changed: tke3d.f

2/24/1999 (W. Martin and M. Xue)
  TKE at the same time level as the dissipation term in the TKE
  equation is now used to determine Km. It means tpast when leapfrog
  scheme is used and tpresent when forward schemes such as FCT is used.
  tpresent was used previously. TKE at tpast and tpresent is now
  initialized with values consistent with the km determined from
  Smagorinsky scheme. These changes significantly reduce 2dt oscillations
  in TKE field. Files changed: tmix3d.f and force3d.f

02/10/1999 (Donghai Wang)
  Changed the use of first layer soil temperature to the surface
  temperature in Eta #212 dataset as ARPS surface skin temperature.
  Affected file: getextd3d.f

02/09/1999 (Vince Wong)
  Updated the calculation of solar time equation with more accurate
  formula.
  Affected file: radfrc3d.f

01/29/1999 (Yuhe Liu)
  Fixed a bug in two-way nest computation of pressure in small steps.
  It was introduced on 12/14/1998 from optimized code.
  Affected file: solve3d.f

01/21/1999 (Yuhe Liu)
  Fixed a problem in the calculation of surface radiation fluxes for
  the diffusive radiation. The 2-D variables, fdifir and fdifpar, are
  fractions referenced to in the incoming solar radiation flux.
  Affected file: radtrns3d.f

12/20/1998 (M.Xue)
  Streamlined arpsplt. Upgraded it to Version 6.5. This version
  now requires ZXPLOT Version 3.0, whose object code library is
  available at ftp://ftp.caps.ou.edu/ZXPLOT3.

12/18/1998 (Yuhe Liu)
  Fixed a bug in ext2arps, which prevented from writing wetcanp into
  soil variable file.
  Affected file: ext2arps23.f

12/17/1998 (Yuhe Liu)
  Changed the format of soil variable file to include the soil variables
  associated with multiple soil types at each grid points.
  Affected files: iolib3d.f init3d.f sfcphy3d.f arpsintrp11.f
                  arpssoil20.f ext2arps23.f mksoilvar20.f

12/15/1998 (Donghai Wang and Vince Wong)
  Added a new 2-D permanent array for snow cover, snowcvr(nx,ny),
  and just used a simple scheme to consider the snow cover process
  in the soil model. Updated ext2arps to get the snow cover data
  from ETA #212.
  Added the snow cover array into history dump.
  Added a plot option snowcplt to plot snow cover field.
  Affected files: radfrc3d.f,arps44.f,exbcio3d.f,nohdfio3d.f,
                  nonetio3d.f,nopakio3d.f,nosviio3d.f,nov5dio3d.f,
                  out3d.f,rst3d.f,sviio3d.f,sfcphy3d.f,soilebm3d.f,
                  tinteg3d.f,v5dio3d.f,dump3d.f,read3d.f,pakio3d.f,
                  hdfio3d.f,gribio3d.f,gradsio3d.f,iolib3d.f,
                  initpara3d.f,init3d.f,arpsread.f,ext2arps23.f,
                  getextd3d.f,arps2gem23.f,adas24.f,arpsplt64.f,
                  arpsenscsm.f,arpsprtbsm.f,wtretcol.f,fakerad.f,
                  arpsextsnd.f,arpssoil20.f,mksoilvar20.f,
                  arpsdiff21.f,arpsraindiff.f,arpsprt12.f,
                  arpsintrp11.f,arpscvt13.f,gribcst.inc,globcst.inc,
                  indtflg.inc,arpsplt.input,arpssoil.input,arps.input

12/15/1998 (Yuhe Liu)
  Added two input parameters to control the initialization of soil
  variables by integrating the soil model under the forcing of
  atmospheric initial conditions.
  Affected file: initpara3d.f sfcphy3d.f globcst.inc arps.input

12/15/1998 (Yuhe Liu)
  Made changes to AGRI corresponding to the changes made on
  12/14/1998 to ARPS. Several new permanent arrays and input parameters
  were added.

  Introduced parameters of logical pointers to identify variables within
  dimension categories in AGRI. This will make the future modification
  much easier.

  Affected files: grid.h arpsinit.f arpsout.f arpsolve.f arpstgrid.f
                  inivar.f arpscnst.f

12/15/1998 (Yuhe Liu)
  Made changes to ADAS and EXT2ARPS corresponding to the changes made on
  12/14/1998 to mapfct and several other new arrays such as
  aj3x,aj3y,aj3z, and ptbari,pbari,rhostri.
  Affected files: adas24.f adjuvw3d.f ext2arps23.f remaplib.f

12/14/1998 (D. Weber)
  Code optimized for single processor operation.  Merged loops, removed
  operatorsi, and reduced the amount of redundant calculations.  Added
  tmixvert option for computing only the vertical turbulent mixing
  terms and the maptest option for testing the terms involving the map
  factor.  Added map factor arrays (i,j,7-8) for use in optimization.
  Added 7 3-D temporary arrays, inverses of ptbar,pbar, and rhostr, and
  avg (x,y,z) of j3 for use in optimization.

  Bug fix in subroutine stress for D12 (map factor).

  Affected files:  advct3d.f advfct3d.f arps44.f force3d.f inibase3d.f
                   init3d.f initpara3d.f out3d.f rst3d.f solve3d.f
                   tinteg3d.f tke3d.f tmix3d.f wwcont3d.f
                   arps.input globcst.inc

12/14/1998 (Yuhe Liu)
  Fixed a minor error in soil model in calculating wr2max in the
  one-step prediction. The time interval used was dtsfc2=dtsfc/2 instead
  of dtsfc.
  Affected file: soilebm3d.f

12/09/1998 (Keith Brewster)
  Changed the use of pibar to full pi.

11/05/1998 (Vince Wong)
  Fixed a bug in the calculation of atmospheric longwave emissivity in
  radiation option radopt=1. The bug was introduced in version 4.3.4
  when making a correction to the same variable.
  Affected file: radfrc3d.f

10/29/1998 (G. Bassett and R. Carpenter)
  Added RUC-2 GEMPAK & ETA GEMPAK grid #104. Four digit years and
  extdname now used in constructing filenames of GEMPAK files.

  Affected files: ext2arps23.f getgempak3d.f nogempak3d.f extdims.inc

10/27/1998 (Yuhe Liu)
  Fixed problems that prevented ext2arps from processing NCEP GRIB data
  on little endian machines
  Fixed the bugs in getextd3d.f that was introduced when adding the
  sorted vertical levels with descent order into the GRIB data reading.
  Affected files: arpslib3d.f lnxlib3d.f rdnmcgrb3d.f nmcdecode.f
                  getextd3d.f

10/14/1998 (Keith Brewster)
  Fixed a bug in the initialization of surface data with option
  sfcdat=1.
  Affected file: init3d.f

10/08/1998 (Yuhe Liu)
  Fixed a few problems in writing GrADS control file for GRIB and GrADS
  formats. The actual data formats are not affected.
  Affected files: gribio3d.f gradsio3d.f

10/08/1998 (Dennis A. Moon, Chief Scientist, SSESCO)
  Fixed a problem in computing the drag coefficients in sfcphy3d.f for
  multiple values of soil type.
  File Affected: sfcphy3d.f

10/06/1998 (Yuhe Liu)
  Added subroutines to write out GrADS control files for surface
  property data file, soil variable data file, and terrain data file so
  that those files can be displayed by GrADS.
  Affected files: iolib3d.f arpsintrp11.f arpssfc21.f arpssoil20.f

10/06/1998 (Yuhe Liu)
  Changed default compiler option for arpsplt on SGI not to use IPA.
  This option caused memory panic in compiling arpsplt.
  Affected file: makearps

09/29/1998 (Keith Brewster)
  Updated ADAS to include saving the analysis increments for the
  ARPS nudging scheme.

  Fixed bugs in cmpclddrv.f and cldinsert.f to properly account for the
  limited areal coverage of the physical domain within the ARPS grid

  Fixed bugs in RADMCRO after DO 150 to go to next column

  Fixed bugs in prepsfc.f and rdsfcobs.f to correct a problem with cloud
  height storage indexing when using multiple input sfc observation
  files

  Affected files: adas24.f(renamed from adas23.f) incrdump.f(new)
                  cmpclddrv.f cldinsert.f prepsfc.f rdsfcobs.f
                  prepradar.f dummyadas.f Makefile src/adas/Makefile
                  adas.inc nudging.inc(new) adas.input

09/24/1998 (Dennis, A. Moon, Chief Scientist, SSESCO)
  Added sorting for vertical levels in NMC GRIB 3D data to assure that
  the level changes monotonically decreasing.
  Affected file: rdnmcgrb3d.f

08/25/1998 (Yuhe Liu)
  Fixed a problem in src/arps_mp/Makefile to include an ARPS new file in
  the src and obj list.
  Affected file: src/arps_mp/Makefile

08/25/1998 (Yuhe Liu)
  Fixed problems in Vis5D history dump.
  Affected file: v5dio3d.f

08/24/1998 (Keith Brewster)
  Updated ADAS.


Version 4.4.0

08/03/1998 (Yuhe Liu)
  Changed the definitions of variable parameters according to updated
  NCEP GRIB documentation.

  WARNING: GRIB format is not compatible with previous version.

  Affected file: gribio3d.f

7/27/1998 (M. Xue)
  Subroutine ADJUVW was separated from extlib23.f and put into a new
  file, adjuvw3d.f.

  Added new subroutine WCTOW into file adjuvw3d.f

  File extlib23.f moved from directory src/adas to src/ext2arps and
  renamed as extlib.f.

  Affected files: solve3d.f wwcont3d.f adjuvw3d.f extlib.f

7/27/1998 (M. Xue)
  Added the map factor missing in the divergence calculation in
  subroutine ADJUVW, which is used by EXT2ARPS and ADAS. The
  horizontal wind field can be significantly impacted when wndadj=3.

  WCTOW and WCONTRA are now called by ADJUVW to convert between
  w and wcont. WCONTRA required that crdtrns be defined, which
  is added to INITADAS.

  Affected files: adas/initadas.f, extlib23.f, solve3d.f.

7/20/1998 (M. Xue)
  For initopt=3, i.e., external boundary condition, mapfct(i,j,4-6)
  were incorrectly set to mapfct(i,j,1-3) rather than the their inverse.
  The inverses are used in divergence dampping and turbulence mixing
  terms, and the velocity divergence term in pressure equation. The
  impact on the first two should be relatively small, while the last
  one can be non-negligible when the map factor is far from one.
  Affected file: init3d.f.

7/17/1998 (M. Xue)

  Corrected the inclusion of the map factor in FCT and MDPDC schemes.

  Streamlined subroutines ADVPTFCT and ADVQFCT. A single subroutine
  ADVFLXS is now called by both FCT and MPDCD schemes
  to caculate the advective fluxes of both
  2nd and 4th order (4th order is a new feature).  The fluxes
  formulation is also altered to be consistent with regular
  advective fluxes that has better conservation properties.

  For sadvopt=5 (MPDCD), a user now has a choice of using 4th-order
  advection for potential temperature and pressure (through fctorderopt).

  A minior proglem with the time integration of TKE equation with FCT
  scheme (sadvopt=4) is fixed.

  FCT can now also be used with ptsmlstp=1.

  Two new control parameters (fctorderopt and fctadvptprt) were
  added to arps.input.

  Affected files: arps43.f, arps.input, globcst.inc, initpara3d.f,
  advect3d.f, advfct3d.f, tke3d.f, solve3d.f and force3d.f.

  To do list:

  Need to update makefiles and change arps43.f file name and version
  number inside to reflect the version change.

  AGRI needs to be updated to reflect the change to arps.input.

7/17/1998 (M. Xue and Y. Richardson)
  Modified the flux limiter of FCT scheme, so that the extrema in the
  advected field itself is compared against. This removes
  over/undershoots we saw before in the advected fields,
  especially when vertical stretching is used.


Version 4.3.6

07/20/1998 (Ming Xue)
  Fixed a bug in the calculation of the inverses of map factors in
  the real data initialization option (initopt=3).
  Affected file: init3d.f

7/16/1998 (M. Xue and Y. Richardson)
  Fixed a minor bug in call to bcp in subroutine ADJUVMV (for grid
  translation). The bug was introduced when subroutine BCP was
  modified earlier.
  Affected file: grdtrns3d.f.

7/15/1998 (M. Xue)
  Added CPU time accounting for the sedimentation of hydrometeors.
  The time is saved in qfall_cpu_time.
  Affected files: arps43.f, micro3d.f, initpara3d.f and globcst.inc.

07/15/1998 (Yuhe Liu)
  Fixed a bug in AGRI for external boundary conditions.
  Affected file: arpsinit.f

07/14/1998 (Yuhe Liu)
  Fixed a few bugs in ARPS restart.
  Affected files: exbc3d.f rst3d.f

06/22/1998 (Yuhe Liu)
  Fixed bugs and problems in AGRI.
  Affected files: arpsinit.f arpstgrid.f arpsout.f


06/22/1998 (Dennis Moon, SSESCO)
  Added the options to convert NCEP RUC2 AWIPS data in GRIB (211) and
  NCEP global reanalysis data in T62 Gaussian grid in GRIB into ARPS
  grid.
  Affected file: ext2arps23.f getextd3d.f extdims.inc gribcst.inc

06/18/1998 (Yuhe Liu)
  Fixed bugs in arpsintrp11.f for quadratic interpolation in the
  vertical.
  Affected file: arpsintrp11.f

06/09/1998 (Jason Levit and Ming Xue)
  Fixed an error in the definition of rhobar0 which should be in cgs
  unit system. This bug was introduced on 5/19/1998 to version 4.3.5.
  Affected file: micro_ice3d.f

06/09/1998 (Ming Xue)
  Reformulated the computational mixing terms. The 2nd and 4th order
  c-mixing terms now have the form of del(K*rhostr*del(phi)) and
  del(del(del( K*rhostr*del(phi)))) respectively, instead of the
  original del(del(K*rhostr*phi)) and del(del(del(del(K*rhostr*phi)))).
  The old formulation can introduce spurious local extrema in the mixed
  fields, especially in the case of vertical stretching.
  Affected files: tmix3d.f cmix3d.f.


Version 4.3.5

05/27/1998 (Jian Zhang)
  Updated ADAS cloud analysis. More features added and more flexibility
  allowed for moisture and thermal fields adjustments in the analysis.
  Simplified calculations by removing a separate cloud grid system.
  Removed files: rdwrtcld22.f
  Affected files: adas23.f initadas.f cmpclddrv.f cmpcldlib.f cloud_cv26.f
                  cldinsert.f cloud_lwc26.f sunfuncs.f adas.inc adas.input
                  Makefile src/adas/Makefile

06/02/1998 (Yuhe Liu)
  Renamed macro LD in Makefiles to ARPS_LD in order to avoid the
  conflict with the default LD for MPI on Cray J90.
  Affected files: makearps Makefile src/*/Makefile

05/21/1998 (Yuhe Liu)
  Modification made to AGRI for SGI. AGRI timing functions were removed
  and ARPS standard timing function will be used.
  Removed files: cpucray.f cpuibm.f cpugen.f cpusun.f packsun.f
                 packibm.f
  Affected files: arpsagri10.f arpsinit.f arpsolve.f arpsout.f
                  packcray.f regrid.f tick.f updbc.f usrout.f util1.f
                  Makefile src/agri/Makefile

05/20/1998 (Yuhe Liu)
  Modified the calculation of indeces of vertical levels that separate
  high, middle and low cloud. Previously they were based on given
  pressure levels, 400 and 700 mb at the first horizontal grid point. In
  case the point was on a mountain where pressure might be lower than 700
  mb, there could be a problem. Also when ARPS model was running in MPP
  machines, the first point for each PE might be different. So when the
  number of PEs redefined, it could cause different in model results.
  Affected files: init3d.f radtrns3d.f radcst.inc globcst.inc

5/19/1998 (M. Xue)
  Changed reference density at surface from rhobar(1,1,2) to rhobar0.
  Affected file: micro_ice3d.f

04/27/1998 (Dan Weber)
  Modified arpsintrp11.f to perform the hydrostatic calculation for
  interpolating pressure when the vertical levels in new grid are below
  the terrain of the original grid.
  Affected file: arpsintrp11.f

04/27/1998 (Min Zou)
  Updated arpsplt from 6.1 to 6.4, a lot of changes.
  New files: arpsplt64.f arpspltderive.f arpsplt_cpu.f arpsplt.inc
  Other affected files: arpspltlib.f arpsplt.input

04/24/1998 (Keith Brewster)
  Added a new program, mci2arps, to convert the satellite data to ARPS
  grid.
  New files: src/mci2arps/Makefile mci2arps.c calib.c gldtonat.c
             inisatarps.f maptran.c sat_read.c solcor.f sunfuncs.f
             wtsatfld.f pltsatfld.f pltmap.f palgrey.pdf
             mc_area.h wxp.h wxpresrc.h wxpgks.h

Version 4.3.4

04/22/1998 (Vinc Wong and Mengjuan Zhou)
  Added an option to surface flux distribution
  Affected files: force3d.f soilebm3d.f solve3d.f tinteg3d.f tmix3d.f
                  initpara3d.f init3d.f

04/21/1998 (Donghai Wang and Ming Xue)
  Modified the Kain-Fritsch cumulus parameterization scheme, including:
  1) Added the source terms to the right hand terms of the qc,qr,qi,qs
  equations due to the K-F cumulus parameterization, used 5 3-D arrays
  qcumsrc(*,*,*,5) for this purpose;
  2) Added a permanent 3-D array w0avg, is close to the running average
  grid-scale vertical velocity in 10min to give smoother fields of
  convective initiation for the K-F cumulus parameterization scheme:

      w0avg = [w0avg*(tst-1.)+w]/tst

  where tst is the number of time steps in 10min;
  3) Added a new fraction factor to feed back the convectively generated
  rainwater into grid-resolved rainwater (or snow) fields.

  Affected files: arps43.f initpara3d.f solve3d.f tinteg3d.f kfinterfc.f
                  kfpara.f cumulus3d.f init3d.f out3d.f rst3d.f
                  globcst.inc arps.input

04/16/1998 (Dan Weber)
  Added the correction in computing the emmisivity of atmosphere for
  radiation option radopt=1.
  Affected files: radfrc3d.f tinteg3d.f

04/16/1998 (Dan Weber)
  Added the processor of green vegetation fraction data set to arpssfc
  Affected files: arpssfc21.f arpssfclib21.f arpssfc.inc arps.inpit

04/16/1998 (Keith Brewster)
  Added a new program, nids2arps, into the package.
  New added files: nids2arps.c radarinfo.c wsibase.c alarm.h cfortran.h
                   ulog.h wsi.h
  Other affected files: radarlib3d.f

04/09/1998 (Yuhe Liu)
  Added radiation arrays and surface fluxes into history dump. The
  arrays for the surface fluxes became permanent.
  Affected files: adas23.f arpsinit.f arpsolve.f arpsout.f arps43.f
                  arpsread.f dump3d.f exbcio3d.f gradsio3d.f gribio3d.f
                  hdfio3d.f init3d.f nohdfio3d.f nonetio3d.f
                  nopakio3d.f nosviio3d.f nov5dio3d.f out3d.f pakio3d.f
                  read3d.f v5dio3d.f arpscvt13.f arpsdiff21.f
                  arpsextsnd.f arpsintrp11.f arpsplt61.f arpsprt12.f
                  arpssoil20.f arps2gem23.f wtretcol.f arpscnst.f
                  initpara3d.f globcst.inc indtflg.inc grid.h
                  arps.input

04/06/1998 (Yuhe Liu)
  Updated ext2arps to process the soil variables from ETA 40km GRIB
  (#212) data.
  Affected files: ext2arps23.f getextd3d.f rdnmcgrb3d.f gribcst.inc

04/03/1998 (Yuhe Liu)
  Added convective precipitation rate and separated different types of
  precipitation rates in different arrays. Array prcrate is now
  including 4 2-D arrays:
	prcrate(*,*,1) - total precipitation rate
	prcrate(*,*,2) - grid scale precipitation rate
	prcrate(*,*,3) - cumulative precipitation rate
	prcrate(*,*,4) - convection precipitation rate
  Added the precipitation rates into history dump files.
  Affected files: fakerad.f adas23.f arpsinit.f arpsolve.f arpsout.f
                  arps43.f arpsread.f cumulus3d.f dump3d.f exbcio3d.f
                  gradsio3d.f gribio3d.f hdfio3d.f init3d.f kfinterfc.f
                  micro3d.f micro_ice3d.f micro_nem3d.f nohdfio3d.f
                  nonetio3d.f nopakio3d.f nosviio3d.f nov5dio3d.f
                  out3d.f pakio3d.f read3d.f rst3d.f sviio3d.f
                  tinteg3d.f v5dio3d.f arpscvt13.f arpsdiff21.f
                  arpsextsnd.f arpsintrp11.f arpsplt61.f arpsprt12.f
                  arpssoil20.f arps2gem23.f getextd3d.f wtretcol.f
                  arpscnst.f initpara3d.f globcst.inc indtflg.inc
                  grid.h arps.input

04/02/1998 (Keith Brewster)
  Fixed a bug in arpsplt61.f to plot the CAPE, which was introduced
  when changing to use the new function in calculating saturation
  water vapor equation.
  Affected file: arpsplt61.f

04/02/1998 (Yuhe Liu)
  Changed the time string in naming time dependent history files
  from 6 to varying length of characters with a minimum of 6.
  6 characters had a limit to about 11 days of model time. This change
  allows the user to run the model for as long as the user wants.
  Affected files: img3d.f outlib3d.f arpsintrp11.f arpsintrp_ls10.f
                  ext2arps23.f getextd3d.f

04/01/1998 (Ming Xue and Jinxing Zong)
  Added option tqflxdis for quadratic distribution of heat and moisture
  fluxes in depth dtqflxdi, which is typically set to 200 m. Removed
  sflxdis again from the input file.
  Affected files: initpara3d.f tmix3d.f arps.input globcst.inc

03/31/1998 (Yuhe Liu)
  Added initial condition for Beltrami flow test
  Affected files: init3d.f initpara3d.f arps.input

03/31/1998 (Jonathan Case)
  Changes made to program arps2gem.
  Affected files: arps2gem23.f (renamed from arps2gem.f)
                  arps2gem.inc (new file)
                  arps2gem.input

03/31/1998 (Keith Brewster)
  Updated ADAS 2.3 with some corrections and bug fixings.
  Affected files: adas23.f anxiter22.f cldinsert.f cloud_cv26.f
                  cloud_lwc26.f cmpclddrv.f cmpcldlib.f grd2obsth.f
                  initadas.f prepradar.f prepretr.f prepsfc.f
                  prepsng.f rdradcol.f rdretcol.f rdsfcobs.f thermo3d.f
                  adas.inc adas.input rad88Derr.adastab
                  radnidserr.adastab

03/27/1998 (Yuhe Liu)
  Renamed function cpu_time to f_cputime because cpu_time() is used as
  an intrinsic function in g77 version 0.5.21.
  Affected files: arps43.f craylib3d.f cumulus3d.f force3d.f genlib3d.f
                  htchlib3d.f ibmlib3d.f init3d.f initpara3d.f out3d.f
                  sfcphy3d.f solve3d.f sunlib3d.f tinteg3d.f tke3d.f
                  tmix3d.f
  New file: g77lib3d.f irislib3d.f


03/25/1998 (Yuhe Liu)
  Fixed a bug in subroutine MICROPH_NEM. In loop 1300 the calculations
  are performed on scalar points, therefore the up boundaries should be
  nx-1 for i, ny-1 for j, and nz-1 for k.
  Affected file: micro_nem3d.f

03/05/1998 (Yuhe Liu)
  Fixed a bug in subroutine ADVPTFCT. In loop 425 mapfct has indeces
  (i,j) instead of (i,k).
  Affected file: advfct3d.f


Version 4.3.3

02/29/1998 (Gene Bassett and Yuhe Liu)
  Removed the support of T3D from ARPS;
  Added the section for machine type T3E to makearps
  Affected files: makearps Makefile Makefile.wrkdir src/arps_mp/Makefile

02/27/1998 (Gene Bassett)
  Added ctrlat1/ctrlon1 to arpsintrp.input as an option to specify the
  center of new grid.
  Affected files: arpsintrp11.f arpsintrp.input

02/23/1998 (Ming Xue)
  Removed subroutine ADVPTFCT1 from advfct3d.f
  Affected file: advfct3d.f

02/20/1998 (Dan Weber and Yuhe Liu)
  Fixed a few bugs in soil model.
  Affected files: soilebm3d.f soilcst.inc

02/20/1998 (Keith Brewster)
  Added Jian's cloud analysis to ADAS
  Affected files: adas23.f (from adas22.f) extlib23.f grd2obsth.f
                  initadas.f prepradar.f prepretr.f prepua.f
                  radarlib3d.f rdprofiles.f adas.inc adas.input
                  src/adas/Makefile
  New files: cloud_cv26.f cloud_lwc26.f cmpclddrv.f cmpcldlib.f
             cldinsert.f rdsatfld.f rdwrtcld22.f sunfuncs.f


Version 4.3.2

2/17/1998 (M. Xue)
  Added sflxdis option 3 for distributing heat and moisture fluxes
  in the lowest 100 m layer. sflxdis re-introduced into arps.input.
  Affected files: initpara3d.f tmix3d.f arps.input

2/17/1998 (M. Xue)
  Added mpp insert statements before printing out the timing statistics.
  Affected file: arps43.f

2/17/1998 (M. Xue)
  Changes made to src/arpsplt/zxplot_add.f

2/16/1998 (Dan Weber)
  Fixed bug in arpstern12.f.  If statements were added to improve the
  data packing loop limits for use with southern hemispheric data ingest
  in SUBROUTINE GETTER.
  Affected file: arpster12.f

2/15/1998 (M. Xue)
  Corrections to Makefile, src/adas/Makefile and src/arpsplt/Makefile.

2/15/1998 (M. Xue)
  Moved subroutines WRTVAR and READVAR from src/arpsplt/arpspltlib.f
  to src/arps/outlib3d.f.

2/15/1998 (M. Xue)
  Added timing statistics for various processes in ARPS.
  Timing information will be printed at the end of arps.output.
  At this time, the statistics are available for IBM, SUN and Cray only.

2/11/1998 (M. Xue)
  Corrections made in CORDINTG in file tinteg3d.f to ensure no moist
  process is activated when moist=0.

2/11/1998 (M. Xue)
  Added string arpsversion into globcst.inc. It is set in subroutine
  INITPARA and printed out in log file.

2/9/1998 (M. Xue)
  Ran this file (HISTORY) through spell checker.

2/9/1998 (Z. Huo, M. Xue)
  Updated kfinterc.f, kfpara.f and tinteg3d.f due to optimizations
  performed on the Kain-Fritsch scheme.
  init3d.f and rst3d.f also changed, fixing problems related to
  adas 2.2 upgrade.

2/8/1998 (M. Xue)
  Fixed a few small problems in arps.input, arpsplt61.f,
  arpspltlib.f and Makefile introduced in this version (4.3.2).

2/3/98 (Zonghui Huo)
  A bug fix in loop 563 of subroutine KFINTERFC in file kfinterfc.f.
  tem2(i,j,k) = 0.5*(tem1(i,j,k)-tem1(i,j,k-1))
  should have been tem2(i,j,k) = 0.5*(tem1(i,j,k)+tem1(i,j,k-1))

2/3/1998 (M. Xue)
  A small fix in makearps for building pltgrid on Cray.

2/2/1998 (M. Xue and D. Weber)
  Fixed a problem with mixing length calculation at the PBL top
  when Sun and Chang scheme is used. Subroutine CFTMIX in tmix3d.f changed.

2/2/1998 (Ming Xue)
  Updated pltgrid.f (in src/arpsplt) and pltgrid.input (in input directory).

01/26/1998 (Keith Brewster)
  Updated ADAS to version 2.2.

01/26/1998 (Yuhe Liu)
  Modified saturation mixing ratio formulation in warmrain microphysics,
  surface physics and EXT2ARPS. The formation considers saturation
  mixing ratio with respect to ice for temperature below 0 C.

01/26/1998 (Fanyou Kong)
  Small fixes to Kain-Fritsch scheme.

01/06/1998 (Yuhe Liu)
  Modified makearps and Makefiles for history dumping options
  Affected files: makearps Makefile Makefile.wrkdir

12/22/1997 (Fanyou Kong)
  Added the map factors into FCT and MPDCD schemes.
  Affected files: advfct3d.f force3d.f solve3d.f tke3d.f

12/22/1997 (Fanyou Kong)
  Applied three time levels in calculate production terms in Tao's ice
  microphysics code (icecvt)
  Affected files: micro_ice3d.f tinteg3d.f

12/19/1997 (Yuhe Liu)
  Modified the definition of ctrlat/ctrlon for finer grids from the base
  grid center to the center of each grid.
  Affected file: src/agri/arpsinit.f

12/19/1997 (Dan Weber)
  Modified subroutine pprtbbc.
  Affected file: solve3d.f

12/15/1997 (Yuhe Liu)
  Fixed a problem in soildiag3d.f. The further calculation of soil model
  related variables should apply to sfcphy=3 and 4, instead of 2 and 4.
  Affected file: src/arps/soildiag3d.f


Version 4.3.1

12/12/1997 (Yuhe Liu)
  Fixed bug in soildiag3d.f where an IF check statement for soil model,
  sfcphy=3 and 4, was thought of sfcphy=2 and 4. Thanks to Anil Rao of
  FSU who found the problem.
  Affected file: soildiag3d.f

12/11/1997 (Yuhe Liu)
  Fixed a bug in arpsintrp for read-in GrADS history data format. Pprt
  and ptprt were double substracted from pbar and ptbar after the call
  of dtaread where the subtraction has been done already to restore the
  base state arrays.
  Affected file: arpsintrp11.f

12/11/1997 (Vince Wong and Bill Martin)
  Set the initial TKE to have the same effect as Smagorinsky mixing
  scheme.
  Affected file: tmix3d.f

12/10/1997 (Yuhe Liu)
  Fixed a problem in including Vis5D into the history dump. The include
  file search directory was not set for C programs.
  Affected file: makearps

12/10/1997 (Yuhe Liu)
  Fixed a problem in making ext2arps.gempak. The macro LIBDIR defined in
  GEMPAK include file was overwritten in src/ext2arps/Makefile.
  Affected file: Makefile src/ext2arps/Makefile

12/09/1997 (Zonghui Huo and Yuhe Liu)
  Fixed a problem in calculation of sigma levels in Kain-Fritsch
  interface.
  Affected file: kfinterfc.f

12/04/1997 (Yuhe Liu)
  Added additional option to soilinit (4) so that the soil variables can
  be initialized from the surface air temperature with the given offsets
  and saturation rates.
  Affected file: init3d.f globcst.inc arps.input

12/03/1997 (Yuhe Liu and Gene Bassett)
  Fixed a problem in making arps_mpi, which was introduced recently
  (12/03/1997) in moving all executables including MP translators in bin
  directory.
  Affected file: src/arps_mp/Makefile

12/04/1997 (Yuhe Liu)
  Set the soil variables to their default value read in from input
  file if they are not included in soilinit file.
  Affected files: init3d.f iolib3d.f

12/03/1997 (Yuhe Liu and Gene Bassett)
  Fixed a problem in rebuilding ext2arps
  Affected file: src/ext2arps/Makefile

12/03/1997 (Yuhe Liu)
  Revised all Makefiles to simplify searching include files, ARPS
  libraries and executables. Now all include files are located in
  subdirectory include, libraries in lib and executables in bin.
  Affected files: all Makefiles

12/03/1997 (Yuhe Liu)
  Added a new namelist, &equation_formulation, to arps.input. Five
  parameters, buoyopt, buoy2nd, rhofctopt, bsnesq, and peqopt, were
  moved from namelist &initialization and &acoustic_wave to the new
  namelist.
  Affected files: initpara3d.f arps.input

12/02/1997 (Yuhe Liu)
  Fixed a bug in computing the Corioris terms when the options were
  chosen not to include the vertical terms. Array wcorio shared
  the memory with wadv which was previously computed and substracted
  from wforce. If wcorio was not needed, it must be set to zero
  before return so that the input (wadv) values wouldn't be carried out
  to cancel the wdav from wforce.
  Affected file: force3d.f

12/02/1997 (Yuhe Liu)
  Removed subroutine GTSINLAT from get_contour.f and INTE1D from
  arpspltlib.f, which duplicated those in libarps.a
  Affected files: arpspltlib.f get_contour.f

12/01/1997 (Yuhe Liu)
  Moved subroutine DRAWMAP, PLTOBS, PLTSTA, and INTERPO from arpsplt61.f
  to arpspltlib.f in cooperating with making arpspltmax which needs
  arpspltlib.f.
  Affected files: arpsplt61.f arpspltlib.f

11/21/1997 (Yuhe Liu)
  Replaced subroutine DELEDD in radlib3d.f for solar radiation with the
  recent version from Chou, NASA, extracted from
  ftp://climate.gsfc.nasa.gov/pub/chou/radiation/solar/solar.f
  Affected file: radlib3d.f

11/18/1997 (Yuhe Liu and Zonghui Huo)
  Fixed a bug in kfinterfc.f in loop 600. The vertical coordinates for
  tem1 and tem2 (DTDT and DTDQ) were top-to-bottom with one index
  shifted, while ARPS vertical coordinates were bottom-to-top.
  Affected file: kfinterfc.f

11/18/1997 (Yuhe Liu)
  Added an check statement for GRIB dump format (10) to force to use
  binary format (1) if nz > 256. There is a limit in WMO GRIB Edition 1
  that uses one byte to store the number of vertical levels.
  Affected file: initpara3d.f

  Set a bottom value (1e-30) for a floating value to be converted into
  IBM floating representation. This will prevent the underflow problem
  when dealing with a GRIB history file created on 64-bit machine on
  32-bit machines.
  Affected file: gribenc3d.f

11/18/1997 (Yuhe Liu)
  Changed the location of ARPS libraries to sub-directory lib under the
  ARPS root directory.
  Affected files: Makefile src/*/Makefile

11/18/1997 (Yuhe Liu)
  Fixed problems in building arps_mpi on T3E.
  Affected files: Makefile src/arps_mp/Makefile

11/18/1997 (Yuhe Liu)
  Incorporated the recent changes (new arrays) into AGRI
  Affected files: arpsinit.f arpsolve.f arpsout.f arpstgrid.f grid.h
                  makearps Makefile Makearps.wrkdir

11/18/1997 (Dan Weber)
  Modified the bottom boundary condition for pressure.  The pressure
  at scalar k=1 is computed using the perturbation hydrostatic relation
  from the model w-equation.  Also performed a number of hand
  optimizations in solve3d.f by precomputing groups of constants.
  Revised the second order buoyancy term computations to include big and
  small time step options for all potential temperature related terms.
  Added a new subroutine pprtbbc to solve3d.f.
  Affected files: tinteg3d.f force3d.f solve3d.f

11/18/1997 (Dan Weber)
  Added three additional levels to the mapfct arrays so that the
  reciprocals could be computed once and stored for later use.  This
  reduces the number of divides in solve3d.f and tmix3d.f, increasing
  code performance.
  Affected files: arps43.f advct3d.f tinteg3d.f force3d.f solve3d.f
                  init3d.f out3d.f rst3d.f tmix3d.f

11/18/1997 (Dan Weber)
  Added compiler options for the T3E architecture.  Streams must be
  enabled in the shell environment (and by the system administrator) to
  realize code speed up (factor of 2).  The change in the compiler
  options requires additional memory beyond the normal 8Mw PE limit.
  The code can be compiled in batch mode.  If you desire to compile
  interactively, the PE memory limit may need to be increased
  by the system administrator.
  Affected files: makearps makefile.arps

11/18/1997 (Dan Weber)
  Updated the mpisubs.f routine to include a working version of the
  global max/min for the mpi version of ARPS.  Modifcations include an
  updated subroutines mpmax and mpexit.
  Affected files: mpisubs.f

11/12/1997 (Min zou)
  Updated arpsplt to version 6.1.
  Affected files: arpsplt61.f (renamed from arpsplt60.f) arpspltlib.f
                  arpsplt.input Makefile

11/11/1997 (Yuhe Liu)
  Fixed a bombing bug in vertical explicit scheme.
  Affected file: solve3d.f

11/05/1997 (Yuhe Liu)
  Fixed a few bugs in radiation staggering scheme, Corioris forcing
  calculation for AGRI fine grids, and Kain-Fritsch scheme.
  Affected files: force3d.f radtrns3d.f kfinterfc.f

10/28/1997 (Yuhe Liu)
  Added a limit to the coefficient of horizontal divergence damping when
  the option is anisotropic.
  Added an output of maximum of w*dtbig/dzp for diagnostic purpose
  Affected files: initpara3d.f out3d.f

10/23/1997 (Yuhe Liu)
  Updated AGRI based on recent changes to ARPS model.
  Affected files: arpsinit.f arpsout.f arpsolve.f grid.h

10/23/1997 (Zonghui Huo)
  Added 'getcoamps.f' to ext2arps to read the COAMPS data on sigma-z
  levels.
  Affected files: ext2arps23.f getcoamps.f makefile.arps


10/23/1997 (Fanyou Kong)
  Added subroutine MKARPS2D for ext2arps to perform surface 2-D data
  analysis from external data sets.
  Affected file: extlib23.f

10/21/1997 (Donghai Wang)
  Removed the density approximation in the calculation of the pressure
  gradient force(PGF) terms. And added the second order terms in the
  linearized buoyancy terms.
  Added two new options, rhofctopt and buoy2nd.
  Added a new subroutine, RHOFACTOR in force3d.f.
  Affected files: arps42.f init3d.f initpara3d.f force3d.f solve3d.f
                  tinteg3d.f arps.input globcst.inc

10/16/1997 (Zonghui Huo)
  Kain-Fritsch cumulus parameterization scheme is implemented.
  Two subroutines are added, kfinterfc.f (interface) and kfpara.f (
  K-F scheme package). Several other files are also affected mainly
  because of the array passing.
  Added files:   kfinterfc.f  kfpara.f
  Affected file: arps42.f    arpsr2h31.f   cumulus3d.f   init3d.f
                 out3d.f     rst3d.f       tinteg3d.f
                 makefile.arps


Version 4.3.0

10/14/1997 (Yuhe Liu)
  Added a parameter and subroutine in ncarg3d.f to print integer values
  of soil and vegetation types at the center of grid box.
  Affected files: arpssfc21.f ncarg3d.f

10/08/1997 (Yuhe Liu)
  Fixed a problem in ADAS.
  Affected file: adas20.f

09/29/1997 (Keith Brewster)
  Fixed a minor bug in adas20.f

10/01/1997 (Keith Brewster)
  Corrected weights used in interpolation in prepradar.f

09/25/1997 (Yuhe Liu)
  Fixed a problems in restart dump. The precipitation rate was not
  dumped into the restart file, that affected the calculation of surface
  fluxes.
  Affected files: arps43.f init3d.f initpara3d.f out3d.f rst3d.f
                  tinteg3d.f

09/22/1997 (Yuhe Liu)
  A new Makefile was created to build and run ARPS in a working
  directory instead of ARPS root directory. This new approach requires
  make to support VPATH macro for searching dependencies. The freeware
  gmake which supports VPATH feature can be obtained from any GNU ftp
  site.

  Since not all platforms support VPATH feature, this new Makefile will
  be optional and named as Makefile.wrkdir. A C-shell script, mkarpswd,
  will help the user to setup the working directory.

  Affected files: makearps Makefile Makefile.wrkdir mkarpswd

09/15/1997 (Yuhe Liu)
  Updated the AGRI code incorporate with the new fft option for top
  radiation boundary conditions.
  Affected files: arpsinit.f arpsolve.f grid.h

9/15/97 (M. Xue and G. Bassett)
  Added in subroutine BRLXQ checks like (qsbcrd.eq.1) in the IF
  tests so that boundary relaxation or smoothing is NOT done when
  variable is not found in the exbc file (when q*bcrd=0).
  Previously it was relaxing the variables to the initial state,
  therefore initial storms in the boundary zone tend to stick.

09/15/1997 (X. Tan and Y. Liu)
  Fixed an error in arpsh2s.input where wgpcnt and w2pcnt should be
  wgrat and w2rat.
  Affected file: arpsh2s.input

09/10/1997 (Yuhe Liu)
  Fixed a few bugs in ext2arps23.f where array dumsnd was not defined.
  Fixed a problem in arpsdas20.f. Variable nestgrd should be set to 0
  in order for dump routines to work properly.
  Affected files: arpsdas20.f ext2arps23.f

09/10/1997 (Yuhe Liu)
  Fixed a bug in tinteg3d.f, which was introduced when merging the new
  fft code.
  Affected file: tinteg3d.f

09/09/1997 (Yuhe Liu)
  Fixed a bug in arpsdas20.f, which was introduced when merging the new
  radiation top boundary conditions.
  Affected file: arpsdas20.f

09/04/1997 (Dan Weber)
  Modified the top boundary condition for w and p.  The option fftopt
  has been added in the boundary condition group to distinguish between
  a periodic (fftopt =1) and even (fftopt=2) transform applied for the
  tbc=4 case.  The original version of the fft used for tbc=4 is still
  available as fftopt=1.  FFTOPT=1 still requires special odd values of
  nx and ny, while fftopt=2 requires even values of nx and ny.  See the
  input file for the specific instructions for setting the proper nx
  and ny.
  Added a new file, vfftpack.f, for the new option.
  Affected files: arps42.f init3d.f initpara3d.f solve3d.f tinteg3d.f
                  vfftpack.f bndry.inc arps.input

09/03/1997 (Richard Carpenter, Gene Bassett and Yuhe Liu)
  Fixed a bug in grid initialization in ARPS and ADAS. Call of INITVAR
  may overwrite grid array x, y, z, zp, and hterain. Therefore, any
  variables and/or parameters related to these arrays must be set after
  the call of INITVAR.
  Affected files: init3d.f arspdas20.f

08/28/1997 (Yuhe Liu)
  Fixed a bug in read3d.f, which gave a wrong length of grdbas file to
  NetCDF and GRIB format files.
  Affected file: read3d.f

08/26/1997 (Yuhe Liu)
  Fixed a bug in ext2arps23.f. The arguments in call of GETARPS did not
  match those in SUBROUTINE arguments.
  Affected file: ext2arps23.f

8/26/1997 (Fanyou Kong)
  Include MPDCD simple positive definite advection scheme
  (sadvopt = 5) through subroutine 'advmpdcd'

  Fixed a bug in SUBROUTINE MIXTKE in tmix3d.f for the up boundaries of
  DO loop 210.

  Affected files: advfct3d.f force3d.f initpara3d.f micro3d.f
                  micro_ice3d.f micro_nem3d.f solve3d.f tinteg3d.f
                  tke3d.f tmix3d.f arps.input

08/25/1997 (Leilei Wang and Vince Wong)
  Introduce North American Land Cover 1km vegetation type data set
  and NDVI data into ARPS. Also,use the low_resolution GED data sets
  as background fields to handle area out of US or North American.
  Affected files: arpssfc20.f arpssfclib20.f arpssfc.inc arps.input

08/22/1997 (Yuhe Liu)
  Re-organized ARPS source directory structure. Instead of putting all
  source code files in a single directory, the source code files for all
  individual programs were put into the unique sub-directories for each
  program. In ARPS root directory, script makearps provides all needs to
  make any ARPS programs. File Makefile in root directory is the master
  makefile and will call make to use slave Makefile in the sub-directory
  to make the program. The executable made by makearps will be copied
  into the root directory.


Version 4.2.5

08/22/1997 (Yuhe Liu and Fanyou Kong)
  Fixed a bug in solvtke using FCT scheme.
  Affected files: tinteg3d.f tke3d.f

08/11/1997 (Yuhe Liu)
  Added program arpsintrp_ls to interpolate large size history data
  sets.

  Fixed a few problems in arpsintrp10.f.

  Affected files: arpsintrp_ls10.f (new) arpsintrp10.f
                  makearps makefile.arps

08/05/1997 (Zonghui Huo and Yuhe Liu)
  Fixed a bug in dumping soil variables into GRIB format history file.
  Affected file: gribio3d.f

08/05/1997 (Ming Xue and Dan Weber)
  Fixed a problem with pibar calculation for option 4, introduced on
  2/11/1997.
  Affected file: inibase3d.f

7/25/1997 (Mir Ali)
  Fixed a problem in making arps_pvmt3e in makefile.arps. Linking of
  arps_pvmt3e does not need to link library libfpvm3.a.
  Affected file: makefile.arps

7/25/1997 (Mir Ali)
  Fixed a bug in arps43.f, which was a typo introduced when changing
  name of nx_rad, ny_rad and nz_rad into nx_radiat, ny_radiat and
  nz_radiat.
  Affected file: arps43.f


07/15/1997 (Yuhe Liu)
  Added a new option for the initialization of soil model variables in
  INITSFC. With this option, the initial soil temperature is set based
  on the surface air temperature. The initial soil moisture is
  estimated from saturation ratios (what is the saturation ratio here?).

  Added flags for writing out individual liquid and solid water
  variables into EXBC file.

  Changed EXBC computational mixing coefficient, cbcmix, from
  dimensional to non-dimensional. It should have been dimensional in
  the first place.

  Affected files: initpara3d.f init3d.f dump3d.f exbc3d.f arpsh2s20.f
                  mksoilvar20.f globcst.inc arps.input

07/15/1997 (Yuhe Liu and Edwin Adlerman)
  Fixed a minor bug in dumping history files for multiple grids
  Affected files: agri/arpsinit.f agri/arpsout.f

07/14/1997 (Gene Bassett and Yuhe Liu)
  Fixed problems in splitting and joining data files for MPP versions.
  Affected files: fsplitsoil.f splitfiles.f fjoindumps.f fsplitdump.f
                  fsplitsoilini.f fsplitterrain.f fsplitexbc.f
                  joinfile.f read3d.f makefile.arps makearps

07/14/1997 (Gene Bassett and Yuhe Liu)
  Fixed problems in arpsh2s
  Affected files: arpsh2s20.f mksoilvar20.f

07/14/1997 (Yuhe Liu)
  Updated ADAS to version 2.0.
  Affected files: anxiter.f arpsdas.inc barnes3d.f prepradar.f
                  radarlib3d.f anxlib3d.f arpsdas20.f grd2obsth.f
                  prepsfc.f rdradcol.f makefile.arps

07/11/1997 (Yuhe Liu)
  Fixed a problem in arpsr2h, which was introduced by implementing GRIB
  dump for each individual grid.
  Affected file: arpsr2h31.f

07/11/1997 (Yuhe Liu)
  Fixed a minor bug in reading GrADS. The time was not set correct.
  Affected file: gradsio3d.f

06/30/1997 (Yuhe Liu)
  Fixed problems in multiple level refinement in AGRI and some other
  minor problems.
  Affected files: initpara3d.f arps.input agri/agri10.f agri/fill.f
                  agri/regrid.f agri/tick.f agri/util1.f

06/30/1997 (Yuhe Liu)
  Fixed a minor bug in arpsh2s20.f which involved the declaration of
  tsfcout, tsoilout, ..., etc..
  Affected file: arpsh2s20.f

06/23/97 (Vince Wong and Xuning Tan)
  Changed the computation of Monin-Obukhov stability parameter.
  Now the height of the surface layer may equal zero and the momentum
  and thermal roughness lengths may be different.
  Affected file: sfcphy3d.f sfcphycst.inc

06/13/1997 (Yuhe Liu)
  Renamed nx_rad, ny_rad and nz_rad to nx_radiat, ny_radiat and
  nz_radiat for radiation working arrays to avoid the conflict with
  nz_rad defined for arpsdas.
  Affected files: arps43.f radcst.inc agri/arpsolve.f

06/10/1997 (Min Zou)
  Updated ARPSPLT from version 5.4 to 6.0. Lots of CHANGES made to this
  program.

  1). Added variables:
      * qtplot   - Total water mixing ratio and water vapor(g/kg)
      * gricplt  - Richardson Number
      * avorplt  - Absolute Vorticity *1000(1/s)
      * xuvplt   - Option for plot the total wind (u,v) barb  in
                   cross-section (x-z, or y-z, or xy-z).
                   (only works when xuvtype=1) (HUB-caps)
      * strmplt  - Option for plot storm motion.
                   ( This is only 2-D field, in x-y slice k=2 )
      * viqcplt  - Vert. Integrated qc (kg/m2) (HUB-caps)
      * viqrplt  - Vert. Integrated qr (kg/m2) (HUB-caps)
      * viqiplt  - Vert. Integrated qi (kg/m2) (HUB-caps)
      * viqsplt  - Vert. Integrated qs (kg/m2) (HUB-caps)
      * viqhplt  - Vert. Integrated qh (kg/m2) (HUB-caps)
      * vilplt   - Vert. Integ Liquid(kg/m2) (HUB-caps)
      * viiplt   - Vert. Integrated ice(kg/m2) (HUB-caps)
      * vicplt   - Vert. Integ Condensate(kg/m2) (HUB-caps)
  2). Added option to Plot lines/polygons, &plot_polylines
  3). Option for overlay wind vector/barb or the cross-section wind on
      Multiple plots, &ovrlay_mul
  4). Option for uneven interval contours, &setcont_cntl
  5). added option plot wind barbs, xuvtype=1
  6). Added option to plot diferent wind units,
      * vtrunits - units 1-m/s 2-kts|knots 3-MPH
  7). Added more options in &grid_setup block
      * margnx   - X-axis margin of picture space. (0.1 by default).
      * margny   - Y-axis margin of picture space. (0.1 by default).
                   (if color bar is horizontal suggest using margny=0.15)
      * xfmat    - format of axis.
      * lbaxis   - label for axis
      * haxisu   - The units for horizontal axis.
      * vaxisu   - The units for Vertical axis.
                   0-km, 1-mile, 2-naut mile, 3-kfeet
      * tickopt  - tick option, 0-auto, 1-defined
      * hmintick - horizontal the unit of the minal ticks.
                   (e.g. 9km/minal tick)
      * hmajtick - horizontal the number of major ticks
                   (e.g. total have 8 major ticks)
      * vmintick - vertical the unit of minal ticks.
      * vmajtick - vertical number of major ticks.

      * presaxis_no - umber of extra pressure sacle for vertical slice
                      0 - 0 no pressure scales
      * pres_val - the pressure levels.
  8). Added option for extra title plot, &title_setup
  9). Added more options in map_plot block draw multiplt maps,
      also it can have different linestyle, color
  10). Added option for reading external file and plot its info,
       &plot_sta, read external station information file, there have
       options to draw station name, different marker type, size and
       color draw stations position, and the interpolated value. We
       also can choose station priority when we plot. Right now we have
       10 different marker types .  We also can write stations name along
       axis.
11). fixed the format for write color bar.
  12). Added option for contour highlighting frequency
  13). Added option control zero contours to be plotted or not.
  14). Added marker type and size for observation information.
  15). Added option for soiltype number.

06/10/1997 (Yuhe Liu)
  Added the maximum number of grids into globcst.inc. It will be used,
  when nestgrid turned on, to define all grid number dependent
  variables such as those used to dump in GRIB history files, or maxmin
  files.

  The maxmin file dumps is now separated for each individual grid using
  the suffix .g## to identify, where ## is a 2-digit grid number.

  Affected files: gribio3d.f out3d.f globcst.inc

06/06/1997 (Gene Bassett)
  Fixed a bug in splitfiles.f for splitting EXBC data sets.
  Affected file: splitfiles.f

06/06/1997 (Yuhe Liu)
  Fixed a problem in C program gopen in gribio_c.c for SUN.
  Affected file: gribio_c.c

06/05/1997 (Yuhe Liu)
  Added a dummy file to avoid the use of Vis5D format in ARPS. If user
  wants to dump history data into Vis5D format, he/she has to use
  makearps option '-io v5d' to make the executable.
  Affected files: nov5dio3d.f makearps makefile.arps

06/05/1997 (Jinxing Zong)
  Virtualization of temperature is accounted for in conversion of
  variables in RUC to those in EXT2ARPS. Values of constants cp, rd/cp
  and g used in RUC are adopted in making the variable conversion.
  Affected file: getextd3d.f

05/22/1997 (Yuhe Liu)
  Modified the order of parameters written into GrADS control file in
  order for Vis5D to be able to import the GrADS data.
  Affected file: gradsio3d.f

05/22/1997 (Yuhe Liu)
  Modified the flags of firstcall in gribio3d.f to be grid dependent
  so that different grids may use different grid parameters.
  Affected file: gribio3d.f

05/21/1997 (Gene Bassett, Jason Levit and Yuhe Liu)
  Updated makearps and makefile.arps for T3E

05/20/1997 (Fanyou Kong)
  Added a new data format for history dumping and plot in Vis5D.
  Affected files: arpscvt13.f dump3d.f out3d.f outlib3d.f makearps
                  makefile.arps arps.input arpscvt.input
  New files: v5dio3d.f binio.c v5d.c binio.h v5d.h v5df.h vis5d.h

05/20/1997 (Vince Wong)
  Changed LAI definitions for vegetation type 4, 5, 9 and 14.
  Affected file: arpssfclib20.f

05/18/1997 (Yuhe Liu)
  Added a bottom value for dtsml <= 2*dtbig.
  Affected file: initpara3d.f

05/14/1997 (Gene Bassett)
  Fixed a bug in arpsh2s20.f in call of wrtsoil, which was hard wired
  to force writing all soil initial variables instead of using the
  output flags for each variable.
  Affected files: arpsh2s20.f

05/14/1997 (Yuhe Liu)
  Fixed some minor bugs in iolib3d.f in exchanging the positions of
  ctrlat and ctrlon in order to be consistent between writing and
  reading subroutines. These bugs did not affect the model results
  because the parameters in the soil initial file were ignored.
  Thanks to Philip Barbour of Oregon State University for spotting
  them out.
  Affected files: iolib3d.f

05/09/1997 (Yuhe Liu)
  Removed automatically allocated arrays in FCT advection subroutines.
  All needed work arrays are passed through argument lists.
  Affected files: arps43.f advfct3d.f init3d.f force3d.f solve3d.f
                  tinteg3d.f agri/arpsinit.f agri/arpsolve.f

05/08/1997 (Yuhe Liu)
  Fixed a bug in solving qv with EXBC. This bug was introduced when the
  passage of EXBC arrays were changed from through common blocks to by
  arguments. See change log on 04/21/1997.
  Affected file: solve3d.f

04/28/1997 (Yuhe Liu)
  Fixed a bug in calculating map factors for fine grids.
  Affected file: arpsinit.f

04/23/1997 (Yuhe Liu)
  Added a new subroutine to fill soil and vegetation types and soil
  type fractions for finer grids. These variables can not be
  interpolated.
  Affected files: arpsinit.f inivar.f

04/21/1997 (Yuhe Liu)
  Moved the call of initpara from subroutine initial to arps43.f. It
  was necessary because the EXBC buffer must be passed into subroutine
  initial and the dimension parameters must be checked before going into
  initial.
  Added the call in agri10.f for the main driver of AGRI.
  Affected files: arps43.f agri10.f

  Variable descriptions for EXBC arrays was added in common block grddsc
  in file grddsc.h. The space allocation for EXBC arrays was performed
  in subroutine setstr.

  A new file, updexbc.f, was created to generate the external boundary
  data for any nested grids, used for Rayleigh damping. The data are
  carried by the same buffer, exbcbuf, as for the base grid, though
  with different meanings. For the former, they are actual values for
  EXBC u, v, w, and pt interpolated for the nested grid at the present
  time, while for the latter, they are previous EXBC u, v, w, pt, pr,
  qv, qc, qr, qi, qs, qh, and their time tendencies.

  Moved EXBC array dimension parameters from exbc.inc to dims.inc. The
  EXBC arrays is now carried by a 1-D buffer, exbcbuf. The COMMON blocks
  in exbc.inc that used to passing those arrays were removed. They are
  passed through argument lists. The dimension parameter check was moved
  to the main program, arps43.f. The EXBC relaxation coefficients are
  stored in a permanent 2-D array and passed through argument list too.

  Affected files: arps43.f exbcio3d.f force3d.f init3d.f out3d.f
                  raydmp3d.f rst3d.f solve3d.f tinteg3d.f tmix3d.f
                  dims.inc exbc.inc arps.input makefile.arps
                  agri10.f arpsinit.f arpsolve.f arpstgrid.f pointf.f
                  setstr.f updexbc.f grid.h grddsc.h agricst.h
                  makefile.agri

04/10/1997 (Yuhe Liu)
  Added the number of new grid levels, nfinelv, to input file.
  Affected files: agri10.f regrid.f agricst.inc arps.input

04/09/1997 (Yuhe Liu)
  Changed the indices of radiation working arrays from parameters to
  variables. They are set by a new subroutine, SETRADWRK, and passed by
  common blocks. This is to cooperate with nested runs which have
  different dimension sizes for different grids.

  Created subroutine SETRADWRK to set the indices for radiation working
  arrays.

  Affected files: radcst.inc radtrns3d.f

04/09/1997 (Yuhe Liu)
  Moved the dimension size check from radiation code to the main driver,
  arps43. The previous check in radiation code could cause conflict for
  nested runs because nx_rad, ny_rad and nz_rad were fixed while nx, ny
  and nz may vary for different grids. The check could not be done in
  the model initialization subroutines because those subroutines were
  also called in nested runs for different grids.
  Affected files: arps43.f radtrns3d.f

04/04/1997 (Yuhe Liu)
  Officially introduced the Adaptive Grid Refinement Interface (AGRI),
  developed by William C. Skamarock of NCAR/MMM and Ming Xue of CAPS,
  into the ARPS system. The AGRI is a two-way nested interface.

  All AGRI code is put into a sub-directory, agri. Script makearps and
  makefile.arps were modified to include the new program. The
  compilation of the ARPS AGRI code is controlled by makearps as all
  other ARPS programs. The new executable command for ARPS AGRI is
  called `arpsagri`. To make it, type

	makearps [-options] arpsagri

  A new namelist, &arpsagri, was added to arps.input so that arpsagri
  uses the same input file. The input parameters in the new namelist
  were documented.

  Known bugs: Restart dumping could bomb the program.

03/30/97 (M. Xue)
  Corrected minor bugs in arpsr2h31.f that are related to the definition
  of alternative vertical stretching of new grid.

03/29/97 (M. Xue)
  Wrote and tested program ARPSINTRP.

  This program interpolates gridded data from one ARPS grid to another.
  It can be used to prepare data for running ARPS in a one-way nested
  mode. Similar task can also be accomplished by ARPSR2H, but
  this program requires less memory and can processes both initial
  and boundary files at once. It can also be used for converting
  ARPS history data among different formats, a task of ARPSCVT.
  When samgrd is set to one, i.e., the input and output grids are the
  same, only one set of gridded arrays have to be defined, therefore
  the memory usage is similar to ARPSCVT.

  ARPSINTRP is expected to replace ARPSR2H and ARPSCVT.

03/29/1997 (M. Xue)
  Modification made in EXTINIT so that when values of mapproj,
  trulat1,trulat2, trulon, ctrlat, ctrlon in the external initialization
  data (used when initopt=3) do not match those specified in input file,
  the values in the data are used. For this reason, a user has to
  make sure the parameters in the input data file are correct, and
  these parameters do not have to be set in the input file when initopt=3.

03/27/97 (Ming Xue)
  Added xgrdorg = 0.0, ygrdorg = 0.0 in SETGRD. They were not
  initialized before.

03/24/97 (M. Xue)
  Subroutine SOLVPT split into two versions, SOLVPT_LRG and SOLVPT_SML,
  for the cases of ptsmlstp=0 and 1, respectively.

  Modifications made to tinteg3d.f, solve3d.f, force3d.f, micro3d.f,
  micro_ice3d.f and micro_nem3d.f so that time integration for
  pt, qv, and other q's are handled correctly when forward-based
  advection such as FCT is used to integrate these variables.
  In this case, the forcing terms are multiplied by dtbig not dtbig*2,
  and mixing and damping terms are calculated at tpresent.

  When forward-based advection is used for PT, small time step
  treatment of pt equation is not allowed, i.e., when sadvopt
  is not one of 1, 2 and 3, ptsmlstp must be 0. The check was
  added in INITPARA.


03/23/97 (Ming Xue)
  Added option 6 for bubble-shaped initial potential
  temperature perturbation specified in terms of temperature.
  arps.input and init3d.f changed.

03/23/97 (Ming Xue)
  A option to use monotonic Flux-corrected transport (FCT)
  advection scheme for scalars (pt,qv,q,tke) was added. It is sadvopt=4.
  advfct3d.f is new. Other files changed include arps42.f,
  tinteg3d.f, solve3d.f, force3d.f, tke3d.f, init3d.f and makefile.arps.
  Two new work arrays tem17 and tem18 are added in arps42.f.

  NOTE: MPP related treatment needs to be added into the FCT code in
  advfct3d.f.

  The FCT code uses three dynamically allocated arrays of
  size (0:nx,0:ny,0:nz). This use is only temporary, and is not
  supported by some F77 compilers. We will use a better solution
  later.

03/23/97 (Ming Xue)
  Parameter scmixfctr added to namelist block computational_mixing.
  scmixfctr is a reduction factor the c-mixing coefficients for
  scalars. It allows for different c-mixing coeff. for scalars
  from momentum, and smaller coefficients are usually recommended
  when scalars are advected by monotonic and/or positive-definite
  schemes, such as FCT and MPDATA.
  arps.input, globcst.inc, initpara3d.f and cmix3d.f changed.

03/23/97 (Ming Xue)
  Modifications made in INITPARA so that the program will complete
  reading in all input parameters and check their validity even
  when error is encountered, before it stops at the end of this subroutine.

Version 4.2.4

05/08/1997 (Vince Wong and Yuhe Liu)
  Fixed a bug in Kuo scheme cumulus parameterization. Previously wcont
  was used as vertical velocity. It should be multiplied by j3.
  Affected file: tinteg3d.f

05/06/1997 (Yuhe Liu)
  Fixed a bug in radiation staggering scheme in calculation of tauir.
  Affected file: radtrns3d.f

04/25/1997 (Keith Brewster)
  Option was added to ext2arps. boycor=3 will perform hydrostatic
  balancing by replacing total pressure with an integration of
  temperature from the surface upward.
  Affected files: ext2arps23.f extlib23.f makefile.arps

04/22/1997 (Leilei Wang and Yuhe Liu)
  Fixed a few problems in selection of data location by mapping ARPS
  domain into data grid.
  Affected files: arpssfc20.f arpssfclib20.f

04/22/1997 (John Mewes and Keith Brewster)
  Major upgrade to soil moisture calculations in arpsh2s
  (history-to-soil). Options added to compute soil moisture based on
  observations of 24-hr precipitation over time and the soil
  characteristics (API).  Precipitation data can be read from NCDC data
  files or real-time files from NCEP. Added optional writing of history
  file to facilitate viewing of results using arpsplt. Renamed arpsh2s
  to version 2.0.
  Affected files: arpsh2s20.f mksoilvar20.f
                  (replace arpsh2s.f mksoilvar.f)
                  arpsh2s.input  makefile.arps

04/22/1997 (Leilei Wang and Yuhe Liu)
  Rewrote subroutine READBSQ so that the data file is opened as direct
  access unformatted. The binary byte data decoding is now simpler.
  Affected file: arpssfclib20.f

04/14/1997 (Yuhe Liu and Zonghui Huo)
  Added a variable, GEMINC, to makefile.arps so that makearps may pass
  the GEMPAK include file name for different paltforms.
  Affected files: makearps makefile.arps

04/14/1997 (Yuhe Liu and Zonghui Huo)
  Changed all 2-byte integers to default 4-byte integers in dir5min.f so
  that data reading will not complain or stop when it reaches the line
  that contains all 9s to separate the 1 degree data from 5 minutes
  data.
  Affected file: dir5min.f

04/14/1997 (Yuhe Liu, Fanyou Kong and Jinxing Zong)
  Fixed a problem in micro_ice3d.f by changing expression

	sqrt(sqrt(zr(i,j)**11))
  to
	zr(i,j)**2.75

  to avoid possible overflow on DEC Alpha.

  Affected file: micro_ice3d.f

04/08/1997 (Vince Wong and Leilei Wang)
  Revised version of ARPSSFC in arpssfc20.f reads the 1 km resolution
  STATSGO soil texture data set. Fractional soil types(that add up to
  100%)are allowed at each model gridpoint.

    REFERENCE:
    Miller, D.A. and R.A. White. 1996. A soils dataset for
    environmental modeling applications in the United States.
    (To be submitted to Earth Interactions).

  Affected files: arpssfc20.f (replaced arpssfc12.f) arpssfclib20.f
                  arps.input makefile.arps

03/28/1997 (Yuhe Liu)
  Fixed a bug in arpscvt13.f.

03/28/1997 (Yuhe Liu)
  Removed parameter sflxdis from arps.input. However, this parameter is
  still effective in the code.
  Added more detail comments to describe the parameter in globcst.inc
  where it is declared.
  Affected files: arps.input globcst.inc

03/28/1997 (Yuhe Liu)
  Fixed bugs in converting soil type related variables from coarse grid
  to fine grid in program ARPSR2H.
  Affected file: arpsr2h31.f

03/25/1997 (Yuhe Liu)
  Removed subroutine STRLNTH from file arpstern12.f. Arpstern will use
  the identical subroutine in file outlib3d.f.
  Affected file: arpstern12.f

03/18/1997 (Yuhe Liu)
  Set the default value of variable nstyp at the time of model
  initialization. This will prevent nstyp undefined for some programs
  which use ARPS initialization routines.
  Affected file: initpara3d.f

03/18/1997 (M. Xue and D. Weber)
  Corrected a minor bug related to the radiation top boundary condition.
  Affected File: solve3d.f

03/17/1997 (Yuhe Liu)
  Added the call of assign subroutines for dumping terrain data in IEEE
  format on Cray.
  Affected file: arpstern12.f makefile.arps

03/17/1997 (Yuhe Liu and Vince Wong)
  Fixed a bug in calculation of heat and moisture fluxes over water.
  C_ptwtrneu in subroutine CPTNEUWTR was mistakenly calculated in its
  inverse.
  Affected file: sfcphy3d.f

03/11/1997 (Kelvin Droegemier, Ming Xue and Yuhe Liu)
  Removed the Copyright statements from ALL ARPS source code and
  utilities.

03/11/1997 (Ming Xue and Dan Weber)
  Corrected a problem with base-state initialization option 4,
  the case of constant static stability.
  Affected file: inibase3d.f

03/11/1997 (Richard Carpenter and Yuhe Liu)
  Fixed a few bugs in arpsextsnd.f.
  Added library files to the source list.
  Affected files: arpsextsnd.f

03/10/1997 (Keith Brewster)
  Changes were made to ext2arps. The interpolation is now made directly
  to pressure instead of log(p).
  Affected files: ext2arps21.f extlib21.f

03/03/1997 (Gene Bassett and Yuhe Liu)
  Updated data set splitting and joining programs for parallel version
  of ARPS.
  Affected files: fjoindumps.f fsplitdump.f fsplitexbc.f fsplitsoil.f
                  fsplitsoilini.f fsplitterrain.f makearps makefile.arps

03/03/1997 (Gene Bassett)
  Added an option to read in tables of lai, roughness, vegetation
  fraction as functions of vegetation types
  Affected files: arpssfc12.f arpssfclib.f arps.input

03/03/1997 (Jinxing Zong, Ming Xue and Yuhe Liu)
  Five lookup tables were defined and used to replace power functions
  in Tao ice microphysics routines. This would improve the performance
  of those routines up to 50%.
  Affected files: phycst.inc init3d.f micro_ice3d.f

02/25/1997 (Yuhe Liu)
  Fixed a problem with setting up the refined grid for GRIB format dumps
  in arpsr2h.
  Affected file: arpsr2h31.f

02/21/1997 (Yuhe Liu)
  Fixed a few bugs in mksoilvar, which were introduced in implementing
  multiple soil types scheme.
  Affected file: mksoilvar.f

02/21/1997 (Min Zou)
  Changes were made to xpost.f

02/20/1997 (Yuhe Liu)
  Removed the declaration of those not-passed-in 2-D arrays in
  subroutine GETARPS and replaced the use of them by that of temporary
  arrays. The problem appeared for those platforms that do not support
  dynamic memory allocation.
  Affected file: getextd3d.f

02/19/97 (J. Levit)
A major bug was found in the diffusive crystal growth equation in
  the new NEM ice microphysics package. The conversion parameter 'c2p'
  should have been 'v2p'.
  Affected file: micro_nem3d.f

02/17/1997 (Jinxing Zong)
  Corrected definitions of the power functions in loop 100 of subroutine
  INITLKTB. The bug in pwr1364 enhanced erroneously terminal velocity by
  a factor of 1.37.
  Affected file: init3d.f

02/11/1997 (Yuhe Liu)
  Arps is now running on Hitachi SR2201 with HI-UX/MPP.
  One file was added, htchlib3d.f.
  Affected files: htchlib3d.f makearps makefile.arps

02/11/1997 (J. Zong)
  Set a positive lower limit (1.0e-30) to qi when calculating deposition
  of qi to avoid arithmetic exception.
  Affected file: micro_ice3d.f

02/03/1997 (John Mewes and Vince Wong)
  Changed the thickness of top soil layer from 1 cm to 10 cm.
  Affected file: soilcst.inc

02/03/1997 (Yuhe Liu)
  Added the IF-check statements for grdtrns=0 before using umove and
  vmove.
  Affected files: force3d.f out3d.f rst3d.f sfcphy3d.f

01/31/1997 (Leilei Wang, Yuhe Liu and Vince Wong)
  Introduced multiple soil types for each grid in soil-vegetation model.
  The maximum number of soil types in a grid is 4. Each soil type has
  its fraction. The total of fractions for all soil types at each grid
  must be 1. All the soil temperature and moisture are solved for each
  soil type respectively and then weight-averaged with the fractions.
  Affected files: arps42.f dump3d.f exbcio3d.f gradsio3d.f gribdec3d.f
                  gribenc3d.f gribio3d.f hdfio3d.f init3d.f iolib3d.f
                  out3d.f pakio3d.f read3d.f rst3d.f soilebm3d.f
                  sviio3d.f tinteg3d.f wtretcol.f globcst.inc
                  makefile.arps arps2gem.f arpscvt13.f arpsdas18.f
                  arpsdiff21.f arpsextsnd.f arpsh2s.f arpsplt54.f
                  arpsprt12.f arpsr2h31.f arpssfc12.f


Version 4.2.3

01/31/1997 (Keith Brewster)
  ARPSDAS version 1.8.  Includes a rewrite of the Bratseth code
  to improve vectorization and parallelization.  For large data sets
  (radar data), there is marked improvement over ARPSDAS 1.5 on
  vector machines.  Some consolidation of code and removal of
  unused variables was done.  QC statistics reporting improved.
  Affected files: arpsdas18.f (replaces arpsdas15.f)
                  anxiter.f grd2obsth.f rdretcol.f prepretr.f

01/31/1997 (Yuhe Liu)
  Created file README.GrADS to explain the use of GrADS scripts to
  display ARPS results.
  Affected files: README.GrADS makefile.arps

01/27/1997 (J. Levit)
  Added a variable 'delt', which is equal to 2.0*dtbig, to fix
  a bug associated with the temporal finite differencing in some of
  the subroutines.  Also, uncommented out the code which allows
  riming to occur.
  Cleaned up some more of the code and documentation.
  Affected file: micro_nem3d.f

01/23/1997 (J. Zong, M. Xue, V. Wong)
  Added missing sink terms in qc, qi and qr in loops 150 and 200
  of subroutine ICECVT. The bugs were introduced on 10/23/1996 while
  modifications were made to avoid problem related to truncation error.
  Affected file: micro_ice3d.f.

01/15/1997 (M. Xue)
  Removed file existence checking inside arpsplt54.f.

12/18/1996 (Yuhe Liu)
  Fixed a bug in computing the surface moisture flux over water.
  Affected file: soilebm3d.f init3d.f

12/18/1996 (Yuhe Liu)
  Fixed a bug in radiation staggering scheme.
  Affected file: radtrns3d.f

12/17/1996 (Ming Xue)
  Changed the filename format for the nested grid runs. A suffix of g##
  is attacked to the original file names for nested grid runs.
  Affected file: outlib3d.f

12/16/1996 (Dingchen Hou)
  Changes were made in SUBROUTINE (external function) W_FAST.
  For the temperature -50.0C ----- -180.0C, the exponential formula
  of saturation mixing ratio is used to replace the 6-order polynomials
  used in OSLO (external function), which, according to Lowe(1977, J.
  Appl. Meteor., vol.16,p100-103), is valid for -50C <T +50C only.
  This change removed the unreasonably high values of CAPE in narrow
  belts, that is caused by unreasonably high value of saturation mixing
  ratio at high levels where T<<-100C and P<<100hpa.
  Affected File: thermo3d.f

12/14/1996 (Yuhe Liu)
  Fixed a minor bug in arpscvt. Arpscvt forgot to set totout to 1
  Affected file: arpscvt13.f

12/14/1996 (Yuhe Liu)
  Removed the restrict of 6 characters to runname. Now the runname may
  set to much longer string. There are still restricts on string
  runname: the string length is 80 characters and other limits applied
  to the strings which the runname may be part of. Character ',' and
  blank space are used to determine the actual length of runname.
  Affected file: outlib3d.f

12/14/1996 (Jason Levit)
  Made changes at the end of the NEM microphysics subroutine.  Negative
  values of qr,qi,qs and qh were being generated during the calculation
  of their terminal fall velocities, and changes were made to prevent
  this from occurring.
  Affected files: micro_nem3d.f

12/11/1996 (Keith Brewster)
  Corrected a bug in the computation for iproj=1 and iproj=2.
  Affected file: maproj3d.f

12/04/1996 (Jason Levit and Yuhe Liu)
  Added the Schultz NEM (NWP Explicit Microphysics) ice microphysics
  scheme to the ARPS. Select option #3 for 'mphyopt' in the input
  file to use the scheme.
  Affected files: tinteg3d.f micro_nem3d.f initpara3d.f nemcst.inc
                  arps.input makefile.arps

Version 4.2.2

12/06/1996 (Yuhe Liu)
  Moved the initialization of draing to the beginning of executable
  statements. This solved the problem that the returned draing became
  undefined when no rain sedimentation needed. This bug would affect the
  model results only if the soil model was turned on (sfcphy=2 or 4).
  Affected file: micro3d.f

11/21/1996 (Yuhe Liu)
  Fixed a small bug in ASCII dump format.
  Affected file: dump3d.f

11/21/1996 (Yuhe Liu)
  Fixed a bug in radiation staggering scheme.
  Affected file: radtrns3d.f

11/21/1996 (Yuhe Liu)
  Removed the inlining of routine terp1 in subroutine fito3. The
  inlining produced totally wrong results.
  Affected files: makefile.arps

11/19/1996 (Yuhe Liu)
  Re-grouped radiation package such that all routines that need to be
  inlined were put into file radlib3d.f. This was to help the
  performance on Cray with vectorization and parallelization. Inline
  option was added to compiler command line and inline directives were
  inside the code for both cf77 and cf90.
  Affected files: radtrns3d.f irrad3d.f sorad3d.f radlib3d.f makearps
                  makefile.arps

11/18/1996 (Yuhe Liu)
  Fixed a minor bug in GETNMCETA.
  affected file: getextd3d.f

11/18/1996 (Yuhe Liu)
  Changed the logical in generating the soil-vegetation data set so
  that, even though the vegetation type is not required, as long as LAI
  and/or roughness are required, the original vegetation classification
  data and NDVI data will be read in.
  Affected file: arpssfc12.f

11/13/1996 (Keith Brewster)
  Version 2.1
  Changed the polynomial interpolation scheme for better
  accuracy and eliminated chance for a discontinuity at external
  grid cell boundaries.  Linear or quadratic interpolation
  using local polynomial fit are supported (iorder=1 or 2).
  Affected files: ext2arps21.f extlib21.f intfield21.f mergetrn.f
                  arpsextsnd.f arpsdiff21.f

11/08/1996 (Yuhe Liu)
  Fixed the bug in computing long wave radiation with radopt=1. The
  fluxes should be the fourth power of temperature. This bug came from
  moving simple radiation scheme for surface fluxes from file soilebm3d.f
  to radfrc3d.f
  Affected file: radfrc3d.f

11/05/1996 (Yuhe Liu)
  Changed the scale factor in anisotropic divergence damping in vertical
  from dz to dzmin.
  Affected file: initpara3d.f

11/05/1996 (Yuhe Liu)
  Fixed the bug in reading qs from GRIB format history dump.
  Affected file: gribio3d.f

10/23/1996 (Ming Xue)
  A problem in ice microphysics routine ICECVT that caused
  frequent bombing the ice code was fixed. The problem was caused
  by truncation errors and the related lines of code have been
  rewritten to avoid it.

  A section of code in QRFALL was moved into a new subroutine
  QFALLOUT, which handles the sedimentation of hydrometeors in general
  and is also used in the Lin/Tao ice micrphysics now. Split time
  steps are used for numerical stability.

  Affected files: tinteg3d.f micro3d.f micro_ice3d.f

10/21/96 (Yuhe Liu)
  Changed the log print format for array hdmptim from i3 to i3.3 to
  remove white blanks between "(" and ")", so that the log file can be
  used as input file without modification on Cray.
  Affected file: initpara3d.f

10/09/96 (K. Brewster)
  Corrected input of map parameters by adding routine rdtrnall in file
  mergetrn.f.

09/25/1996 (K. Brewster)
  Added optional processing to set wcont=0 at bottom of Rayleigh damping
  layer in file extlib20.f.

10/15/1996 (Yuhe Liu)
  Fixed a bug in converting ETA GRIB data into ARPS grid. The hgt_ext
  was mistakenly divided by g.
  Affected file: getextd3d.f

10/14/1996 (Donghai Wang)
  Fixed a bug related to the coefficients of anisotropic computational
  mixing.
  Affected file: initpara3d.f

10/14/1996 (Yuhe Liu)
  Corrected the appreciation to the AUTHER of radiation code.
  Affected files: radtrns3d.f irrad3d.f sorad3d.f

10/8/1996 (Y. Richardson)
  Corrected a bug in the calculation of interpolation weights
  (a1,a2,a3,a4) in subroutine VPROFIL in arpsplt54.f.


Version 4.2.1

10/04/1996 (Yuhe Liu)
  Added dummy subroutine files for program arpsdas in order to
  prevent "unresolved" problem from compiling on SUN, SGI, and Alpha
  platforms.
  Affected files: dummyadas.f makefile.arps

09/25/1996 (Yuhe Liu)
  Fixed a bug in gribio3d.f. Previously ibdshd was not saved and thus
  caused problems on some platforms such as Linux.
  Affected file: gribio3d.f

09/24/1996 (Yuhe Liu and Vince Wong)
  Fixed a problem in cumulus3d.f in calculating the grid condensation
  precipitation rate. The precipitation rate will be used in
  soil-vegetation model.
  Affected files: cumulus3d.f sfcphy3d.f

09/23/1996 (Keith Brewster)
  Fixed a minor bug in DO loop 315 in ext2arps20.f.

09/17/1996 (Yuhe Liu and Vince Wong)
  Fixed a bug in tinteg3d.f regarding the radiation diabatic forcing.
  The forcing was mistakingly multiplied by dtbig.
  Affected file: tinteg3d.f

09/16/1996 (Yuhe Liu and Min Zou)
  Removed a few print statements in arpsplt54.f that might cause
  confusions to users.
  Affected file: arpsplt54.f

08/30/1996 (Yuhe Liu)
  Added initial assignment of ireturn=0 in subroutine DTAREAD so that it
  is always defined. Previously, when read GRIB format, there was no
  returned value for ireturn and thus ireturn remained undefined and
  caused to abort after the file was read.

08/23/1996 (Yuhe Liu)
  Changed the check statements in GRIBDEC to allow a pass for
  differences found in the elements of array IGDS which mainly contains
  grid information. Those differences may come from floating truncation
  errors on different computer platforms. Although the STOP was removed,
  a warning message will be printed to the standard output.
  Affected file: gribdec3d.f

08/23/1996 (Yuhe Liu and Donghai Wang)
  Fixed bugs in the new arrangement to radiation buffer made on
  08/14/1996.
  Affected files: radfrc3d.f radtrns3d.f

08/22/1996 (Yuhe Liu)
  Fixed a problem in makearps for compiling ARPSPLT on sgi.
  Affected file: makearps

08/15/1996 (Yuhe Liu)
  Added dummy subroutine files for ext2arps and arpsr2h in order to
  prevent "unresolved" problem from compiling on SUN, SGI, and Alpha
  platforms.
  Affected files: dummye2a.f dummyr2h.f makefile.arps

08/14/1996 (Yuhe Liu)
  Moved the definition of radiation buffer to the ARPS main program in
  arps42.f and passed along through argument list.
  Combined radims.inc and radcst.inc into one file, radcst.inc
  Affected files: arps42.f tinteg3d.f radfrc3d.f radtrns3d.f radcst.inc
                 makefile.arps


Version 4.2.0


08/13/1996 (Yuhe Liu)
  Fixed a bug in arpsr2h31.f introduced after the radiation package
  was implemented. The argument list in call to subroutine
  initvar was short of three radiation variables.
  Modified file: arpsr2h31.f

08/13/1996 (Yuhe Liu)
  Changed the name of ARPS executable from arps40 to arps so that its
  name will not depend on ARPS version number.
  The following files and directories were renamed from
	arps40.f	to	arps42.f
	arps40.input	to	arps.input
	make.arps40	to	makefile.arps
	arps40.data	to	arps.data
	arps40.docs	to	arps.docs
	arps40.validate	to	arps.validate
  Other affected file: makearps

08/12/1996 (Yuhe Liu)
  Introduced a new control parameter to allow for history data dumps
  starting from a non-zero time.

  Affected files: initpara3d.f out3d.f gradsio3d.f soildiag3d.f
                  arpscvt13.f globcst.inc arps40.input


Version 4.1.7

08/12/1996 (Yuhe Liu)
  Fixed an minor index bound bug in subroutine BUOYTKE.
  Affected file: tke3d.f

8/12/96 (Ming Xue)
  Fixed a problem with the label length for kmh, kmv and tke.
  Modified file: arpsplt54.f

8/12/96 (Min Zou)
  Broke namelist sclrplt_cntl in arpsplt54.f into two parts
  in order to keep the number of continuation lines to be
  less than 19. Did the same in setcolors in xncar.f and xpost.f
  Modified files: arpsplt54.f xncar.f xpost.f arpsplt.input

08/9/96 (Jinxing Zong)
  Corrected the lower and upper bounds of horizontal axis for plotting
  qv profiles.
  Modified file: arpsplt54.f

08/05/96 (M. Xue and J. Zong)
  Set an upper limit of 3.0 on the inverse Prandtl number, which
  is relevant to the Sun and Chang PBL formulation (tkeopt=3).
  Modified file: tmix3d.f

08/05/96 (Min Zou)
  Renamed arpsplt53.f to arpsplt54.f. This version
  included several new options: capsplt and blcoplt,
  tunits and tdunits for t ot td's units in Fahrenheit or Celsius,
  boxcol for box color, and rfcplt.

08/02/1996 (Yuhe Liu)
  Changed the default history dump format from binary to GRIB format.
  Affected files: arps40.input arpsplt.input arpscvt.input
                  arpsdiff.input arpsextsnd.input arpsh2s.input
                  arpsprt.input

08/02/1996 (Yuhe Liu)
  Fixed a bug introduced in the new version of subroutine BUOYTKE.
  Affected files: tke3d.f tinteg3d.f

08/01/1996 (Yuhe Liu)
  Updated the copyright information in all ARPS subroutines. It now
  looks like "Copyright 1992, 1994, 1996".

07/31/96 (Ming Xue and Yuhe Liu)
  Added an option for specifying different coefficients for
  the horizontal and vertical component of divergence dammping.
  force3d.f, solve3d.f, initpara3d.f, globcst.inc, arps40.input
  changed. Max ND divdmp coefficient can now be as large as 0.25 without
  instability although the solution can be noticably altered.
  Affected files: solved3d.f force3d.f initpara3d.f globcst.inc
                  arps40.input

07/30/96 (Ming Xue and Yuhe Liu)
  Parameter lsclpbl0, the coefficient of the mixing length inside
  PBL, included in the input file.
  Affected files: globcst.inc initpara3d.f tmix3d.f arps40.input

07/30/1999 (Ming Xue)
  Subroutine BUOYTKE re-written to incorporate the surface heat and
  moisture fluxes.
  Modified file: tke3d.f

07/30/96 (Ming Xue and Jinxing Zong)
  PBL depth is now determined to be at the level where environmental
  virtual potential temperate equals that at the first grid level.
  Modified file: sfcphy3d.f

07/01/96 (Yuhe Liu)
  Combined getgemruc3d.f and getgemeta3d.f into one file, getgempak3d.f
  and nogemruc3d.f and nogemeta3d.f into nogempak3d.f.

07/01/96 (Keith Brewster)
  Added the module to convert GEMPAK ETA data to ARPS to ext2arps
  program.

06/26/96 (M. Xue)
  Replaced csndsq in pressure buoyancy term by cpdcv*pbar/rhobar in
  subroutines SOLVWPEX and SOLVWPIM.
  Added subroutine SOLVWPIM1 for peqopt=2. Added option peqopt=2.

06/26/96 (M. Xue)
  Added an option for a different formulation of p equation.
  Added control parameter peqopt (=1 or 2) in arps40.input,
  globcst.inc, and default is set to 1 in initpara3d.f. solve3d.f,
  force3d.f and tinteg3d.f also changed.
  At this time, peqopt=2 is only valid for vimplct=1 case.

06/26/96 (M. Xue)  Removed the block for 4th order advection of ptbar.
  ptbar will be advected by 2nd order advection even though sadvopt=3.
  This had been changed in advpt nearlier by not inside SMLSTEP
  for ptsmlstp=1 case.

06/26/96 (M. Xue)
  Corrected the formulations of the coefficients of the tridiagonal
  equations in subroutine SOLVWPIM. The original formulation was
  slightly inaccurate.
  Modified file: solve3d.f


Version 4.1.6

6/5/96 (Donghai Wang, M. Xue and X. Song)
  Fixed a minor bug related to the vertical implicit treatment of
  turbulence mixing. Should not affect the results much.
  tmix3d.f changed.

05/08/1996 (Yuhe Liu)
  Added an adjustment, in program ARPSSFC, to make sure the soil type
  and vegetation type are consistent with each other at ice and water
  surface.
  Affected file: arpssfc12.f

05/07/96 (Donghai Wang and M. Xue)
  Added a parameter, raydmp=2, for Rayleigh damping to relax the
  total fields toward external fields defined in the EXBC file.
  If raydmp=1, it still damps the difference between the total
and the base state fields. You can use raydmp=2 only when lbcopt=2.
  Affected files: raydmp3d.f tmix3d.f initpara3d.f globcst.inc
                  arps40.input

05/06/96 (Yuhe Liu)
  Fixed a bug in computing the surface mixing ratio in subroutine
  EVAPFLX for soil type of ice.
  Affected file: soilebm3d.f

04/28/96 (Jinxing Zong)
  Added a third term to the buoyancy calculation in loop 304 in
  ext2arps.f. This term is required to include the effect of water
  vapor content on buoyancy and to keep consistency with the
  relevant calculation in forward time integration.
  Affected file: ext2arps.f

04/26/96 (Yuhe Liu)
  Fixed the problem that the subroutines in C program gribio_c.c could
  not be recognized by Fortran caller on Cray. Cray requires the
subroutines be named with upcase while IBM/AIX require in lower case.
  Changed to using existing C subroutine in gribio_c.c to obtain the
  size of GRIB file, instead of using Unix system call.

  Fixed bugs in subroutine GRBGBYTE for Cray in craylib3d.f.
  Fixed a problem related to dir_extd when it was specified as ' '.

  Affected files: gribio_c.c rdnmcgrb3d.f getextd3d.f craylib3d.f

04/25/96 (Yuhe Liu)
  Added an option to compute the radiation transfer equations at the
  staggering points. In the staggering case, the computing is performed
  at each (i,j) = (even, even) and (odd, odd) point. The values at other
  points are averaged from the surrounding four points. At boundary, a
  symmetrical value is assumed to the points outside the boundary.

  Affected files: radfrc3d.f radtrns3d.f initpara3d.f globcst.inc
                  arps40.input

4/22/96 (M. Xue)
  Modified the calls to computational mixing routines to pass
  in rhostr instead of rhobar. Effectively, J3 is included in the
  formulation as was in ARPS version 3.0.
  Affected file: tmix3d.f

04/22/1996 (Donghai Wang, M. Xue and X. Song)
  Modified the implicit scheme for vertical turbulent mixing.
  Added a subroutine, VMIXIMPUVW, in file tmix3d.f, to coordinate
  the implicitly vertical mixing terms for u,v,and w momentum equations.
  Changed parameter name of vimplopt to trbvimp.
  Affected files: tmix3d.f force3d.f solve3d.f tke3d.f

04/15/1996 (Yuhe Liu)
  Fixed a bug in determining the cloud cover amount.
  Modified file: radtrns3d.f

04/11/1996 (Ming Xue)
  Changed the default coefficient of implicit vertical mixing from 1.0
  to 0.5.
  Affected file: arps40.input

04/10/1996 (Keith Brewster)
  New runname was added in program ARPSDIFF as a read-in parameter
  instead of output file names. File names are constructed from runname
  just as in arps40.
  Replaced file arpsdiff13.f by arpsdiff14.f
  Affected files: arpsdiff.input make.arps40

04/10/1996 (Yuhe Liu)
  Added condition checks when reading 2-D GRIB variables in ext2arps.
  Affected files: getextd3d.f rdnmcgrb3d.f gribcst.inc

04/05/1996 (Yuhe Liu)
  Added two faked absorption layers on the top of model atmosphere in
  radiation transfer computing. This should solve the problem that the
  radiation forcing at the top boundary was too strong.

04/05/1996 (Donghai Wang)
  Removed a parameter, trbvimp, from the namelist &turbulence.
  Affected files: initpara3d.f globcst.inc arps40.input

04/02/1996 (Donghai Wang, X. Song and M. Xue)
  Added the implicit treatment for the vertical mixing.
  Added two parameters, vimplopt and alfcoef, to arps40.input.
  Added 5 subroutines, VMIXIMPU, VMIXIMPV, VMIXIMPW, VMIXIMPS and
  TRIDIAG2, in file tmix3d.f, to calculate the vertical mixing using
  implicit scheme.
  Affected files: globcst.inc tmix3d.f tke3d.f solve3d.f
                  initpara3d.f force3d.f arps40.input

03/28/1996  (Dan Weber)
  Improved the stop message arpstern12.f when either nptx
  or npty are less than the program requires.

03/26/1996 (Yuhe Liu, Vince Wong, and Xiaoguang Song)
  The parameterization of radiation transfer equation was implemented
  based on the code provided by NASA. The radiation forcing was added
  to potential temperature, ptforce.

  The previous surface radiation flux computation in soil-vegetation
  energy and moisture budget model was changed as an option of radiation
  schemes.

  Radiation computation is performed every dtrad second where dtrad can
  be specified by users in arps40.input.

  The time sensitive radiation variables were added to restart dumps.

  New files added: radfrc3d.f radtrns3d.f raddata3d.f radcst.inc
  Other modified files: arps40.f tinteg3d.f sfcphy3d.f soilebm3d.f
                        soildiag3d.f init3d.f initpara3d.f out3d.f
                        rst3d.f globcst.inc arps40.input make.arps40

3/26/96 (Min Zou and Keith Brewster)
  Updated plotting program ARPSPLT to allow for calculation and
  plotting of more derived variables and more control over the
  order of the plots and overlay of different fields through the
  use of a "priority" level set in the input file for each variable.
  General clean-up and documentation improvement.  Affected files:
  arpsplt53.f, arpspltlib.f, thermo3d.f, smooth3d.f, make.arps40,
  arpsplt.input.

3/21/96 (M. Xue)
  Moved the calculation of magnitude of deformation (defsq) from
  CFTMIX to DEFORM. Corrected the problem with the calculation
  of stress tenor tau33. kmv is now correctly used in this term.
  tmix3d.f modified.


Version 4.1.5

3/20/96 (K. Brewster)
  Modified getgemruc3d.f, so that RUC fields do not have to
  exist at the time RUC data is interpolated to the ARPS grid.
  In this case, linear time interpolation is performed.
  ext2arps.f is also modified to added tem1_ext to the argument
  list of GETGEMRUC.


3/18/96 (Ming Xue)
  Added option (bsnisq) for Bousinessq approximation and inibasopt=6.
  solve3d.f, initpara3d.f, inibase3d.f, globcst.inc and arps40.input
  modified.

3/18/96 (M. Xue)
  Stopped support for NetCDF file format. NETDUMP and NETREAD
  in file netio3d.f replaced by dummy routines.

3/17/96 (Keith Brewster)
  Recent updates to the ARPS Data Analysis System merged with
  the 4.1.5 code.  Affected files: makearps, make.arps40,
  arpsdas.f (replaces arpsanx), anxiter.f, prepsfc.f, prepua.f,
  prepradar.f, grd2obsth.f, rdradcol.f, radarlib3d.f., rdsfcobs.f
  Include files: arpsdas.inc, remp.inc, remapsum.inc, remaptab.inc
  3 new files, data error tables: proferr.tab, raoberr.tab, blacklist.sfc
  New namelist variables added to ARPS input file.


3/16/96 (Ming Xue)
  The surface physics can now be included without turning on
  turbulent mixing. tmix3d.f and initpara3d.f are modified.

3/15/96 (M. Xue)
  Corrected a bug in STABNSQ that was introduced on 3/4/96.
  dzinvd2 was not set for moist=0 case in subroutine STABNSQ..

3/15/96 (M. Xue)
  Removed array stabchk. The stability check for surface flux
  distribution is now done by comparing ptsfc and pt at k=2
  directly.  Files arps40.f, tinteg3d.f, solve3d.f, tmix3d.f,
  init3d.f, force3d.f and sfcphy3d.f are modified.

03/14/96 (K. Brewster)
  Added subroutine AINT2D to intfield.f. Added CNVSND and COLINT
  to arpsextsnd.f. A different version of CNVSND is named CNVSNDA
  in anxlib3d.f. These three files are changed.

  Test version of 4.1.5 announced.

03/12/96 (Ming Xue)

  Added tke, kmh and kmv into dtaread and dtadump and all history data
  dump and read routines. The data readers are no longer compatible
  with old history dump (unless you remove the blocks that read and write
  kmv and the code that checks the version numbers in the read/dump
  subroutines such as BINREAD/BINDUMP).

  Parameter tkeout is added to arps40.input and globcst.inc, to control
  the output of array tke.  All programs (including ARPSANX,
  ARPSCVT, ARPSDIFF, ARPSPLT, ARPSEXTSND, ARPSH2S, ARPSPRT, ARPSR2H,
  ARPSREAD) that call dtaread and dtadump are affected.
  The version numbers of these programs are updated.

03/11/96 (Ming Xue)
  Rewrote most of subroutine CFTMIX. Streamlined the options of
  1.5 order TKE scheme. Introduced kmh, kmv and rprntl as permanent
  arrays. Removed km and kh. Removed grdscl from globcst.inc.

  kmv is now correctly expressed as a function of lv, the vertical
  length scale, rather than the original (dzp/dx)**2 Kmv, which
  is wrong for the TKE option when the turbulence is anisotropic.

  Many files were affected, including arps40.f, init3d.f, tinteg3d.f,
  solve3d.f, force3d.f, tmix3d.f, tke3d.f, and all data I/O files.

03/08/96 K. Brewster
  Fixed a problem in arpsh2s. It was using temperature at k=1 to
  initialize the soil temperature.

3/8/96 (M. Xue, X. Song and V. Wong)
  Add parameter tkeopt for three versions of 1.5 order TKE schemes.
  They differ mainly in the specification of turbulence mixing length.
  tkeopt = 1, Wyngaard formulation;
         = 2, Deardroff/Moeng formulation;
         = 3, Sun and Chang formulation.
  Removed tmixcst1 and tmixcst2 from globcst.inc.

Version 4.1.4

3/8/96 (Ming Xue)
  Fixed a bug in DO 510 i=1,nx-1 of ADVU and ADVCTS, which was
  written as DO 510 i=i,nx-1. Effectively, the vertical advection
  remained 2nd order for 4th order option.

3/6/96 (A. Sathye)
  Introduced permanent array j3inv as 1/j3 to improve computational
  efficiency.

3/5/96 (M. Xue, X. Song)
  TKE time integration is solved at the same time level as other
  prognostic equations. It used to lag behind by one time step.

Version 4.1.3


03/07/1996 (Ming Xue, Vince Wong and Yuhe Liu)
Added option 2 for diagnostic calculation of PBL depth, subroutine
  PBLDEPTH.
  Affected file: sfcphy3d.f

03/05/1996 (Yuhe Liu)
  Added the reading of 2-D GRIB variables for the given variable
  parameter numbers (WMO/NMC GRIB Table 2), such as surface pressure,
  surface temperature, terrain, soil moisture, etc. in program EXT2ARPS.
  Finalized the subroutine that read NMC ETA GRIB data (Grid #212, 40km,
  Lambert Conformal projection) and convert it into ARPS grid.
  Affected files: ext2arps.f getextd3d.f rdnmcgrb3d.f gribcst.inc

03/01/1996 (Yuhe Liu)
  Fixed a few bugs and problem for new ARPS history dump (version 4.0).
  Affected files: read3d.f dump3d.f hdfio3d.f pakio3d.f gribio3d.f
                  gribdec3d.f

02/01/1996 (Donghai Wang, Yuhe Liu, and Ming Xue)
  Added the map projection factor to ARPS governing equations.
  Added two parameters, mpfctopt and mptrmopt, related to map factor
  calculations to arps40.input.
  Added subroutine, MAPTRM, in file force3d.f, to calculate the
  additional terms in the u and v equations due to the inclusion of
  a non-constant map factor.
  Affected files: arps40.f advct3d.f force3d.f init3d.f initpara3d.f
                  out3d.f rst3d.f solve3d.f tinteg3d.f tke3d.f tmix3d.f
                  arpsr2h30.f arpsanx10.f ext2arps.f globcst.inc
                  arps40.input

01/22/1996 (Yuhe Liu)
  Changed the ARPS history dump subroutines to write out the total
  variables instead of the previous perturbation variables. In order to
  maintain the backward compatibility of the new reader and old data,
  parameter totout is added to the flag list. The new reader can real
  old data but not vice versa.

  Affected files: dump3d.f read3d.f gradsio3d.f gribdec3d.f gribenc3d.f
                  hdfio3d.f netio3d.f pakio3d.f initpara3d.f
                  globcst.inc indtflg.inc


Version 4.1.2

02/07/1996 (Vince Wong and Xiaoguang Song)
  Changed the calculation of roughness zo over the sea according to
  Clarke(1970).  The new formulation is insensitive to the value of
  the depth of the first model layer above the ground.
  Added kvwtr in sfcphycst.inc to denote the Von Karman constant over
  the sea.
  Enforced a lower limit, zolimit, for zo, and an upper limit, z1limit,
  for depth of the surface layer z1.
  Modified files: sfcphy3d.f and sfcphycst.inc

01/20/96 (Min Zou)
  Added grayscale color table (col_tab=4) and user-specified color table
  (col_tab=-1) options to arpsplt.
  Rename arpsplt50.f to arpsplt51.f
  Affected files: arpsplt50.f arpsplt51.f xncar.f xpost.f arpsplt.input

01/31/1996 (V. Wong and X. Song)
  Added a parameter, qpfgfrq, that controls the frequency of calling
  the subroutine QPFGRID.
  Affected files: cumulus3d.f initpara3d.f tinteg3d.f
                  arps40.input globcst.inc

01/24/1996 (J. Zong and M. Xue)
  Fixed a problem in ctr2d and vtr2d in arpspltlib.f related to finding
  the minimum and maximum of the relevant 2D arrays when there exist
  missing data. Initial min. and max. should be set to values other than
  the missing value, -9999.0.

01/19/1996 (Keith Brewster and Yuhe Liu)
  Merged program ARPSH2S and MERGETRN into the ARPS directory for
  regular maintenance.

01/18/1996 (Keith Brewster and Yuhe Liu)
  Fixed a bug in getgemruc3d.f (old rdextfil_ruc.f) that set external u
  and v from grid directions to earth lat/lon directions using ARPS map
  projection parameters instead of external data map projection
  parameters.

01/18/1996 (Keith Brewster)
  Added code in extlib3d.f to insure at least one point goes into
  creating the mean sounding.

01/18/1996 (Yuhe Liu and Jinxing Zong)
  Added the converter of NMC GRIB RUC to ext2arps.
  Created files: rdnmcgrb3d.f griblib3d.f gribcst.inc gribio_c.c
Adopted NMC GRIB decoder and changed the file name from decode.f to
  nmcdecode.f. In the file, the calls of SBYTE(S) and GBYTE(S) have been
  changed to calls of GRBSBYTE(S) and GRBGYTES(S) in machine dependent
  library files, ibmlib3d.f, genlib3d.f, or craylib3d.f.
  Added a new subroutine, getnmcruc, into file getextd3d.f

  Affected files: ext2arps.f getextd3d.f rdnmcgrb3d.f griblib3d.f
                  gribcst.inc gribio_c.c make.arps40

01/18/1996 (Yuhe Liu)
  Added options to convert different external data files into ARPS grid.

  Added three parameters in standard input namelist &extdfile to provide
  users options to choose external data sources, data file formats, and
  prefix of file names.

  Moved rdextfil_arps.f to getextd3d.f, rdextfil_laps.f to getlaps3d.f,
  and rdextfil_ruc.f to getgemruc3d.f. Changed subroutine name RDEXTFIL
  to GETARPS, GETGEMRUC, and GETLAPS, respectively. Created two dummy
  subroutine files, nolaps3d.f and nogemruc3d.f.

  Removed makearps command arps2arps (use ext2arps)
  Changed makearps command  ruc2arps to ext2arps.gemruc and
                           laps2arps to ext2arps.laps

  Fixed a problem that came from conflict between calls of subroutine
  SBYTE(S) and GBYTE(S) by GRIB encoder/decoder and NCAR graphics. The
  subroutine names were changed to GRBSBYTE(S) and GRBGBYTE(S) for GRIB
  use in ibmlib3d.f, genlib3d.f, and craylib3d.f.

  Fixed a problem in read3d.f that skipped reading qvbar from grid and
  base file.

  Affected files: ext2arps.f ibmlib3d.f genlib3d.f craylib3d.f read3d.f
                  getextd3d.f getlaps3d.f getgemruc3d.f nolaps3d.f
                  nogemruc3d.f makearps make.arps40 arps40.input

12/12/1995 (Yuhe Liu)
  Added GRIB data format to ARPS history dump. Different from WMO/NMC's
  definitions of variable parameters, we defined the following parameter
  specific to ARPS in the WMO/NMC document Table 2:

	para#	WMO/NMC		ARPS
	185	Undefined	km
	186	Undefined	qh
	187	Undefined	soiltyp
	188	Undefined	vegtyp
	189	Undefined	lai
	190	Undefined	wetsfc, wetsoil
	191	Undefined	wetcanp
	192	Undefined	Arbitrary Array
	193	Undefined	Arbitrary Array
	194	Undefined	Arbitrary Array
	195	Undefined	Arbitrary Array
	196	Undefined	Arbitrary Array
	197	Undefined	Arbitrary Array
	198	Undefined	Arbitrary Array
	199	Undefined	Arbitrary Array
	200	Undefined	Arbitrary Array

  Changed file name of arpscvt11.f to arpscvt12.f which included the
  new data format conversion.

  Created three files: gribdec3d.f gribenc3d.f gribio3d.f

  Added 2 subroutines, sbytes and gbytes, to machine dependent library
  files: craylib3d.f genlib3d.f ibmlib3d.f

  Other Modified files: dump3d.f initpara3d.f outlib3d.f read3d.f
                        globcst.inc make.arps40 arps40.input
                        arpscvt.input


Version 4.1.1

12/6/1995 (J. Zong and M. Xue)
  Added qs and qh to the argument list of subroutine REFLEC in
  outlib3d.f to facilitate inclusion of the contributions of snow and
graupel/hail to reflectivity. A relation between reflectivity and
  snow content is adopted from Rogers and Yau (1989) and extended to
  calculate the reflectivity by snow and graupel/hail.
  Modified files: include out3d.f, outlib3d.f, arpsplt50.f, and
                  arps40.tree.

12/01/95 (Yuhe Liu)
  Fixed a bug in netread call for dumping grid and base data file.
  The file name was previously given to datafn, instead of grdbasfn.
  Modified file: read3d.f

11/29/1995 (Ming Xue)
  Reordered listings in CHANGES file.

11/17/1995 (Ming Xue)
  An important bug fix in the buoyancy production term in the
  TKE equation. In loop 10 of subroutine BUOYTKE. The term should be
  divided rather than multiplied by J3. This fix will affect runs with
  terrain or stretched vertical grid using the TKE turbulence option.
  This bug was also contained in the ARPS 4.0 official release.

11/15/1995 (Yuhe Liu)
  Changed the top boundary in DO loops in file micro_ice3d.f from nz
  to nz-1. Scalar variables are defined between 1 and nz-1 in vertical.
  Modified file: micro_ice3d.f

11/15/1995  (Dan Weber)
  Modified the linearized upper radiation condition. It NOW REQUIRES
  the following for setting nx and ny:

        (requires fft/special dimensions for (nx,ny) given by
         nx-1 = 2**P * 3**Q * 5**R where
         ny-1 = 2**P * 3**Q * 5**R where

         For a xz run nx should be odd and ny = 4.
         For a yz run ny should be odd and nx = 4.
         For a xyz run nx and ny should be odd.

         NX, and NY need to be set to ODD numbers.

  Modified files: arps40.f init3d.f initpara3d.f solve3d.f tinteg3d.f
                  arps40.input

11/15/1995 (Yuhe Liu)
  Changed the hard wired file name from arps40.trndata to arpstern.dat
  in file arpstern12.f and the default terrain data file name in
  arps40.input from arpstern.data to arpstern.dat as suggested in
  User's Guide;
  Affected files: arpstern12.f arps40.input

11/15/1995 (Yuhe Liu)
  Added the checks if the compressed history data files exist. If exist,
  do the uncompressing automatically.
  Affected file: arpsplt50.f

11/09/1995 (Keith Brewster)
  Revised program ARPSANX.
  Affected files: arpsanx10.f anxiter.f anxlib3d.f grd2obsth.f
                  prepsfc.f prepua.f rdprofiles.f rdsfcobs.f

11/06/1995 (Ming Xue)
  Added sadvopt=3 and madvopt=3, for fourth order advection in
  both horizontal and vertical directions.
  Modified files: advct3d.f solve3d.f tinteg3d.f operat3d.f arps40.input

11/06/1995 (M. Xue)
  Set the start time for file joining to zero instead of tstart.
  tstart may not be at the history dump time for a restart run.
  The program will skip the times when the corresponding files
  are not found.
  Affected file: joinfiles.f

11/03/1995 (Dan Weber)
  Added a linear hydrostatic radiation condition between w and p at the
  top boundary for tbc = 4. This option removes the requirement for a
  Rayleigh type sponge to damp gravity waves. Tests reveal similar
  solutions to the Rayleigh type dampers and (depending on the
  configuration) 1/2 the number of points in the vertical direction.
  This condition requires the use of a FFT subroutine which currently is
  NOT APPLICABLE TO THE CRAY T3D COMPUTER.

  This condition uses   p(nz-2) = N * rhobar * w(nz-1) / abs(kx+ky)

  There is a restriction on the nx and ny when the radiation condition
  is chosen. Use the following:

        (requires fft/special dimensions for (nx,ny) given by
         nx = 2**P * 3**Q * 5**R where
         ny = 2**P * 3**Q * 5**R where

         (P .GE. 1), (Q .GE. 0), and (R .GE. 0).  (NX,NY MUST BE EVEN!)

  Arrays added were ifax1 , ifax2 , trigs1 , trigs2, in the main and
  relevant source file.

  Affected files: arps40.input arps40.f bc3d.f init3d.f tinteg3d.f
                  solve3d.f initpara3d.f and make.arps40
  New file added: fft99f.f

Version 4.1.0

10/24/1995 (Dan Weber)
  Added variables newslat and newnlat to subroutine GETTER in
  arpstern12.f for use in setting proper southern latitude limits in DO
  LOOP 100.

10/23/1995 (Keith Brewster)
  Changed external pressure array in file rdextfil_laps.f from 1-d to
  3-d to be compatible with the new, more general, ext2arps subroutine.
  Changed name of this variable to p_ext from p_pa_ext.

10/23/1995 (Ming Xue, Yuhe Liu and Adwait Sathye)
  Changed the start time of joinfiles for PVM from 0 to tstart and the
  number of relevant files to join.

10/23/1995 (Yuhe Liu)
  fixed problems for machine alliant. The compiler, fortran, on alliant
  does not accept quote sign " as the string delimiter. All the "s were
  changed to single '. The make on Alliant does not understand the
  include statement which is for including the setup for making program
  ruc2arps on IBM/CAPS machines. Added "sed" line to create the
  make.arps40.alliant for Alliant specifically.

10/19/1995 (Yuhe Liu)
  Fixed a bug in makearps, which did not recognize the machine type from
  tcsh environment HOSTTYPE.

10/19/1995 (Yuhe Liu)
  fixed a few bugs in makearps for machine alliant. Some options for
  alliant compiler, fortran, did not set properly.


09/26/1995 (Yuhe Liu)
  Re-organized the soil parameter data. Removed the DATA BLOCK
  SOILPARAM. All parameter data, together with, their declarations
  were moved from soilebm3d.f and globcst.inc to the newly created
  include file, soilcst.inc.
  Affected files: globcst.inc soildiag3d.f soilebm3d.f init3d.f
                  initpara3d.f make.arps40

09/25/1995 (Yuhe Liu)
  Added NDVI data to the surface data file.
  Affected files: arpssfc12.f iolib3d.f init3d.f

09/18/1995 (Ming Xue)
  Fixed a problem in subroutine VPROFIL, arpsplt50.f, that determines
  kbgn and kend.

09/18/1995 (Keith Brewster)
  Added new feature to the arpsplt program, which read in the
  surface weather observation data and plot "+" with the temperature at
  the station location.
  Renamed file arpsplt47.f to arpsplt50.f
  Affected files: arpspltlib.f

09/18/1995 (Keith Brewster)
  Created a new program, ARPSANX, to do 3-D dimensional data analyses on
  the ARPS grid. It was loosely based on the rewritten OLAPS surface
  analysis.
  Affected files: makearps make.arps40
  Added new files: arpsanxth.f anxiter.f anxlib3d.f prepsfc.f prepua.f
                   rdprofiles.f rdsfcobs.f read_surface_obs.f

09/15/1995 (V. Wong, D. H. Wang and Y. Liu)
  The option of running ARPS with both warm rain microphysics and cumulus
  convection schemes has been added.
  Affected files: micro3d.f tinteg3d.f init3d.f and globcst.inc.

Version 4.0.22

  NOTE: There were three bug fixes in this version that
  can affect your results if you use TKE turbulence, or
  externally forced boundary condition or cumulus parameterization.

  Please also note that the format of the external boundary condition
  data is changed. To be able to read old data, one can
  edit subroutine READEXBC and set old_v=1.

09/27/1995 (Yuhe Liu)
  Fixed a bug in arpspltlib.f. Added temporary array tem5 to the
  argument list in call of SMTH.

09/25/1995 (Yuhe Liu)
  Fixed a bug in arpscvt11.f that used parameter nhisfile before it was
  read in from input namelist.

  09/25/1995 (Yuhe Liu)
  Fixed a bug in splitfiles.f to split all needed external boundary data
  files.

09/25/1995 (Adwait Sathye and Yuhe Liu)
  Fixed a problem in make.arps40. Added the removal of objective files
  after splitfiles_t3d and joinfiles_t3d being made. Those objective
  files targeted on C90 could not be used for arps40_pvmt3d on T3D.

  Fixed a problem in make.arps40. The file name, fjoindumps.f, were
  missing in compiling joinfiles_t3d.

09/25/1995 (Yuhe Liu)
  Added soiltyp,vegtyp,lai,roufns,veg in the argument list of dtaread,
  file arpsread.f. They were missing.

9/23/1995 (M. Xue)
  Added ptcumsrc and qvcumsrc in the argument list of INITVAR, file
  arpsr2h30.f. They were missing, causing the program to bomb.

09/17/1995 (Kelvin Droegemeier and Ming Xue)
  ARPS 4.0 officially released.

09/15/1995 (V. Wong and Donghai Wang)
  In QPFGRID, total amount of rain water at each level is considered.
  Affected files: cumulus3d.f tinteg3d.f

09/14/1995 (A. Sathye and G. Bassett)
  Finalized the PVM version. Merged the PVM part of make files into
  makearps and make.arps40.
  Newly added Fortran and C source code files, include files and other
  files:
       fjoindumps.f fsplitsoil.f fsplitsoilini.f fsplitexbc.f
       joinfiles.f  setupmpi.f fsplitterrain.f setuppvm.f
       mpisubs.fsetuppvmsp2.f pvmsubs.f splitfiles.f setuppvmt3d.f
       fsplitdump.f fsplitrestart.f readinput.F
       mpitranssubs.c mptrans.c pvmtranssubs.c t3dtranssubs.c
       par.inc par1d.inc par2d.inc mpdims.inc fpvm3.h
       awkinput fjoinload.file

09/12/1995 (K. Brewster)
  Cleared some bugs and restored some diagnostic printing.
  Affected file: arpsdiff12.f arpsdiff.input

09/12/1995 (K. Brewster)
  Changed the determination of direc and speed to account
  for map rotation factor.
  Affected file: arpsextsnd.f

09/10/1995 (Y. Richardson)
  Fixed a bug with the open boundary at the corner points.
  Affected file: bc3d.f

09/10/1995 (M. Xue)
  When umove or vmove in arps40.input is 999.0, (umove,vmove)
  in the restart data is used. No adjustment will be
  made to the wind fields in this case.
  Affected file: rst3d.f

09/08/1995 (Dan Weber)
  Modification to arpstern12.f:
  Revised the definition of tema and temb in GETTER to include the
  absolute value.  This allows the proper setting of the DO LOOP
  limits for use in analyzing of southern hemispheric data.

09/08/1995 (V. Wong, X. Song, Donghai Wang, and Y. Liu)
  The Kuo's cumulus parameterization has been finally tested. The
  calculation of water supply was re-formulated. The surface moisture
  flux was added to the supply.
  The grid and cumulus precipitation rate has been passed to the soil
  model in order to contribute instantaneous rainfall to the soil
  moisture balance.
  Affected files: arps40.f cumulus3d.f sfcphy3d.f tinteg3d.f cumucst.inc

09/07/1995  (K. Brewster)
  Added differencing and writing of surface (soil) fields.
  This change affects the input file.
  Affected files: arpsdiff12.f intfield.f arpsdiff.input

08/31/1995 (G. Bassett & A. Sathye)
  Updated message passing portions of the ARPS code and added message
  passing compilation to makearps and make.arps40

08/30/1995 (Yuhe Liu)
  Fixed a bug that double computes the qv advection and mixing.
  Affected file: solve3d.f

08/30/1995 (Yuhe Liu)
  Added the external boundary arrays to the restart data dump.
  Affected files: arps40.f init3d.f exbc3d.f rst3d.f

08/25/95 (K. Brewster)
  Bug fix in grdtrns3d.f related to cell-tracking option.

08/24/95 (K. Brewster)
  Changed informative opening message to tell user about namelist.

08/24/95 (M. Xue)
  Corrected a sign error in loop 60 of subroutine BRLXS.

8/23/95 (M. Xue)
  Fixed a bug in the log file writing routine. initpara3d.f
  changed. Added extdadmp writing statement in PRTLOG.

8/22/95 (M. Xue)
  Added ptcumsrc and qvcumsrc into the restart files.
  When ARPS is started from external data set (initopt=3),
  ptcumsrc and qvcumsrc are initialized with zero.
  Files  tinteg3d.f, rst3d.f, out3d.f, arps40.f, advct3d.f and
  init3d.f changed.

8/22/95 (K. Brewster)
  Files ext2arps, mkarpsvar.f and wsolve.f reorganized into
  ext2arps.f, and extlib3d.f. make.arps40 modified.

  8/22/95 (M. Xue)
  Added ptcumsrc term to the right hand side of qv equation.
  It was omitted before. solve3d.f changed.

  8/20/95 (Ming Xue)
  READSFCDT modified so that when veg is not present in the
  surface property data, it is set to 0.

8/20/95 (Ming Xue)
  Bug fix with the way ptcumsrc is used.
  tinteg3d.f is changed.

8/15/95 (Ming Xue)
  Corrected a bug related the calculation of additional boundary zone
  relaxation in FRCPT. The ptmix term was effectively added twice to
  ptforce when lbcopt=2.

8/15/95 (Ming Xue)
  MIXTKE was created and called by SOLVTKE to calculate the
  mixing term in TKE equation. This change corrects a
  precious bug, which effectively doubles the computational
  mixing term in TKE equation.

8/15/95 (Ming Xue)
  Fixed a serious error in TINTEG3D.f concerning the
  heating from cumulus parameterization. The heating
  was added to PT equation only when QPFCUMS is called.
  It should have been added every time steps.
  The change requires permanent arrays ptcumsrc and
  qvcumsrc be defined.

8/14/1995 (K. Brewster)
  mkarpsvar.f, rdextfil.f, rdextfil_ruc.f updated to handle arbitrary
  vertical grids (instead of pressure levels only).

  The hydrostatic static balancing is now performed from bottom up
  (starting from surface pressure) rather than top down.
  Parameter boycor inside the code controls the option.
  boycor=0, no balancing; boycor=1, bottom up; boycor=2 top down.

8/12/95 (M. Xue)
  Argument list for cumulus parameterization routines QPFGRID
  and QPFCUMS reordered to follow ARPS convention.
  array qvfrc1 renamed qvsrc. arps40.f, tinteg3d.f and
  cumulus3d.f changed.

8/12/95 (M. Xue)
  Implemented external boundary forcing for water and ice fields.
  The EXBC data file format is changed. A user can set old_v to 1
  in READEXBC in order to read old data.
  Files changed: tinteg3d.f, solve3d.f, exbc3d.f, exbcio3d.f,
  exbc.inc.

8/11/95 (M. Xue)
  FRCPT moved from solve3d.f into force3d.f. Removed SOLVWPIM_OLD
  and TRIDIAG_OLD from solve3d.f.


Version 4.0.21

  8/8/95 (M. Xue)
  Subroutines READTRN, READSFCDT and READSOIL moved into a
  new file iolib3d.f. READSFCDT and READSOIL are now called
  by INITSFC to read in surface property and soil model initial
  data. File soillib3d.f removed. smoothing subroutines
  moved into smooth3d.f.

  8/7/1995 (M. Xue)
Split arpssfc12.f into arpssfc12.f and arpssfclib.f.

  8/7/95 (M. Xue)
  When individual variable is missing in the surface property or soil model
  data, the model now stops, instead of using parameters for option 1.

  8/3/1995 (M. Xue)
  The definitions of soilinit and sfcdat were modified.
  Option 3 is added for both parameters. arps40.input
  and init3d.f were changed.

  7/24/1995 (G. Bassett)
  Added message-passing markers as comment statements, which are
  used by message-passing translators.

Version 4.0.20 (06/12/1995, Yuhe Liu)

7/24/1995 (M. Xue)
  Parameters umove and vmove moved from namelist &grid to
  &grdtrans. The definition of grdtrns changed.
  Parameter inigstr renamed to coriotrm, and it's definition
  is also changed. Files arps40.input, initpara3d.f, force3d.f
  inibase3d.f, grdtrnsed.f and globcst.inc modified.

7/6/95 (M. Xue)
  Zero gradient condition restored for ptbar and qvbar at the
  lower boundary. The extrapolation condition was producing
  undesirable turbulent heat and moisture fluxes at the ground.
  inibase3d.f modified.

7/6/95 (M. Xue)
  Top and bottom boundary conditions for qvprt restored to
  zero gradient condition. bc3d.f changed.

7/6/1995 (M. Xue)
  Pressure detrending is applied to the base grid (as opposed to
  nested grids) only. tinteg3d.f changed.

7/1/95 (K. Brewster)
  Subroutine CELTRK updated to take zp instead of z.
  celtrk3d.f changed.

06/27/95 (M. Xue)
  Special routine BCQV created for qv. BCQV instead of BCQ
  is now called to set the boundary conditions for qv.
  bc3d.f changed. solve3d.f, grdtrns3d.f, arps40.f and
  rst3d.f are modified accordingly.
  Affected files: arps40.f bc3d.f grdtrns3d.f rst3d.f solve3d.f

06/23/1995 (Y. Liu and X. Song)
  Fixed a problem with the distributed momentum fluxes.
  Affected files: arps40.f force3d.f sfcphy3d.f solve3d.f tinteg3d.f
                  tmix3d.f

06/23/1995 (Y. Liu)
  Added program ruc2arps and laps2arps to makearps and make.arps40

06/21/1995 (Alan Shapiro)
  Fixed bug involving missing qvpert term in buoyancy formulation.
  Affected file: force3d.f

06/19/1995 (K. Brewster)
  Modified documentation and output formats to update info in
  arpsextsnd.f.
  Affected files: arpsextsnd.f

06/16/1995 (Dan Weber)
  An additional rbcopt was added to the arps4.0.20 code.  There are now
  4 rbcopt options.  They are:
    rbcopt = 1  Klemp-Wilhelmson condition computed and applied on the
                small time step.
    rbcopt = 2  Klemp-Wilhelmson condition computed on the big time step
                and applied on the small time step.
    rbcopt = 3  Orlanski condition computed on the big time step and
                applied on the small time step.
    rbcopt = 4  Klemp-Lilly/Durran condition computed on the big time
                step and applied on the small time step.  This option
                computes the Orlanski phase speeds and vertically averages the
                outgoing phase speeds.  The single vertically averaged phase
                ispeed is used for each x or y boundary point.
  The above applies to the radiation condition for the horizontal
  normal velocities components at the lateral boundaries.
  Affected files: initpara3d.f setbdt3d.f tinteg3d.f arps40.input

06/12/1995 (Y. Liu)
  Added soil and vegetation property arrays into base state dumping
  with a flag, landout, been switched on.
  (Not netCDF, PAK, and Savi3D, are implemented.)
  Added map projection information to GrADS control file in order for
  the GrADS to display with map projection data.
  Affected files: arps40.f arpscvt11.f arpsdiff12.f arpsextsnd.f
                  arpslib3d.f arpsplt47.f arpsprt12.f arpsr2h30.f
                  dump3d.f exbcio3d.f gradsio3d.f hdfio3d.f init3d.f
                  netio3d.f nopakio3d.f out3d.f pakio3d.f read3d.f
                  sviio3d.f tinteg3d.f

Version 4.0.19 (06/01/1995, Yuhe Liu)

06/01/95 (Y. Liu)
  Fixed a bug in HDFDUMP that set some non-zero flags to zero.
  Affected file: hdfio3d.f

05/31/1995 (Yuhe Liu)
  Re-arranged the order of namelists. Moved all namelists related to
  dynamics to the front of those related to physics.
  Affected files: initpara3d.f and arps40.input.

05/30/1995 (M. Zou)
  Added a new option, col_table, for choice color table.
  Added new plot options: capeplt, cinplt, thetplt, heliplt, qwwplt,
  qwplot, and vhplot.
  Affected files: arpsplt47.f arpspltlib.f

05/29/1995 (Yuhe Liu)
  Fixed a problem with the integer dumping format in ASCREAD.
  Changed the format for integer variable flags to 10I8.
  Affected files: dump3d.f and read3d.f.


Version 4.0.18 (04/17/1995, Yuhe Liu)


05/23/1995 (M. Xue and M. Zou)
  File thermo3d.f was split from arpspltlib.f.
  Added new map data, spstate.mapdata.
  Added new namelists and parameters to arpsplt input file.
  Affected files: arpsplt46.f, arpspltlib.f, thermo3d.f, spstate.mapdata,
                  and arpsplt.input

05/17/1995 (Yuhe Liu)
  Fixed bugs involved the dimension definition of 2-D arrays,
  which caused problems in array transfer to dumping subroutines.
  Added separated soil data dumping when sfcin=1 while sfcout=0.
  Affected file: arpsr2h30.f

05/17/1995 (Yuhe Liu and Jian Zhang)
  Fixed a problem of searching EXBC file when the model initial time
  equals to EXBC initial time minus the EXBC interval and the EXBC file
  at the model initial time exists.
  Affected file: exbcio3d.f

05/16/1995 (Yuhe Liu)
  Removed input options for restart, sfcdat=3 for surface property data
  and soilinit=3 for initial soil variables. Those arrays will be
  forced to use the values from a restart file.
  Affected files: initpara3d.f, soilebm3d.f, and arps40.input

05/16/1995 (Yuhe Liu)
  Added a new parameter, kmlimit, to the input namelist. Kmlimit is used
  to limit the maximum of km.
  Affected files: tmix3d.f, globcst.inc, and arps40.input

05/12/1995 (Yuhe Liu and Limin Zhao)
  Vectorized some DO loops in cumulus3d.f
  Fixed a few bugs in calculation of raing: 1) raing calculation was
  previously located inside DO loop 10 in vertical; 2) The surface
  pressure depth was calculated from k=1 and k=2 which were supposed to
  be equal. These mistakes only influenced the rainfall output, not the
  entire model results;
  Modified the SUPPLY limit from 5.0e-6 to 3.0e-5.

05/11/95 (Jinxing Zong and MX)
  A bug fix for the case of nonzero zrefsfc, the reference height of
  the surface. Results not affected for zrefsfc=0 (default value).

5/10/95 (M. Xue)
  Changed lower BC for pprt to pprt(1)=2*pprt(2)=pprt(3).
  bc3d.f changed.

5/10/95 (M. Xue)
  Corrected a bug with the pibar calculation for inibasopt=4 case.
  inibase3d.f changed.

5/10/95 (M. Xue)
  Changed lower boundary condition for ptbar and qvbar to constant
  gradient extrapolation. rhobar, pbar and pibar at k=1 are obtained
  from hydrostatic equation. inibase3d.f changed.

05/09/1995 (Yuhe Liu)
  Fixed a bug in calculation of solar zenith.
  Affected files: soilebm3d.f

05/09/1995 (Yuhe Liu)
  Added two input parameters, ngbrz and brlxhw, to the input namelist
  to set up the relaxation function for external boundary condition,
  where ngbrz was moved from the EXBC include file, exbc.inc, and
  brlxhw was newly added.
  Affected files: exbc3d.f, exbc.inc, initpara3d.f, and arps40.input

5/8/95 (Ming Xue)
  Fixed problem with raing and rainc being zero after restart.
  Files init3d.f and cumulu3d.f changed.

5/8/1995 (M. Xue)
  Added raing and rainc max/min printing in rst3d.f

5/8/1995 (M. Xue)
  Time-splitting upstream advection used for rainwater sedimentation.
  Accumulated rainfall calculated in MICROPH. tinteg3d.f and micro3d.f
  changed.

05/07/1995 (Ming Xue)
  Updated out3d.f, init3d.f, tinteg3d.f and rst3d.f to include
  raing and rainc in the rstin and rstout argument list.

05/03/1995 (Yuhe Liu)
  Fixed a bug in advct3d.f where dif2y was called for u.
  Affected file: advct3d.f.

05/02/1995 (M. Xue)
  Optimized Possion solver in ADJUVW. And removed dynamically allocated
  array phi. Modified call to ADJUVW in ext2arps.f.
  Affected files: ext2arps.f and wsolve.f

4/20/1994 (M. Zou)
  Added option for divergence of moist
  Corrected qv plotting

4/19/1995 (M. Zou)
  Adjusted the plotting order

04/10/1995 (M. Zou)
  Added two variables rainc and raing
  Added option for total rain (rainc+raing)

04/05/1995 (Min Zou)
  Added two options to arpsplt when plot map: map color and grid.

2/1/1995 (J. Zhang)
  Adding plot options for constant p-level plots.
  Adding sea level pressure plot option.

4/22/1995 (M. Xue)
  Modified external boundary condition file naming format, so
  that the files can be directed to directory 'dirname'.

4/20/1995 (M. Xue)
  Added an upper limit on KM in ensure numerical stability.

4/20/1995 (G. Bassett and M. Xue)
  Fixed bugs in the spatial interpolation in arpsr2h30.f,
  that show up with terrain. Added rain fall arrays. Added terrain
  file writing code. Fixed a read3d.f bug.

4/20/1995 (M. Xue)
  Streamline ADJUVW in wsolve.f.
  Call to ADJUVW in ext2arps needs to be changed.

04/18/1995 (Yuhe Liu)
  Fixed a bug for the option of no grid translation.
  Affected file: grdtrns3d.f

04/17/1995 (Vince Wong, Xiaoguang Song, and Yuhe Liu)
  Modified the surface physics to distribute the surface fluxes within a
  user specified layer above the surface.
  Affected files: arps40.f force3d.f initpara3d.f sfcphy3d.f solve3d.f
                  tinteg3d.f tmix3d.f globcst.inc arps40.input

04/14/1995 (Yuhe Liu)
  Added two arrays, raing and rainc, into ARPS history dumping routines.
  Documented the two arrays.
  Affected files: arps40.f arpscvt11.f arpsdiff12.f arpsextsnd.f
                  arpsplt44.f arpsr2h30.f cumulus3d.f dump3d.f
                  exbcio3d.f gradsio3d.f hdfio3d.f init3d.f netio3d.f
                  nopakio3d.f out3d.f pakio3d.f read3d.f sviio3d.f
                  tinteg3d.f

Version 4.0.17.


04/06/1995 (Yuhe Liu)
  Merged the cumulus code into ARPS this version, added implicit
  statements to all subroutines and functions, and cleaned up the
  documentation
  Affected files: cumulus3d.f, initpara3d.f, tinteg3d.f, cumucst.inc,
                  globcst.inc, arps40.input, and make.arps40

04/05/1995 (Min Zou)
  Added two options to arpsplt when plot map: map color and grid.

04/05/1995 (Vince Wong, Limin Zhao and Xiaogugang Song)
  Added Kuo's cumulus parameterization into ARPS model. The accumulated
  precipitation due to grids supersaturation and cumulus convection is
  calculated. The original code was from ???.
  Added file: cumulus3d.f and cumucst.inc
  Affected files: initpara3d.f, tinteg3d.f, globcst.inc, and
                  arps40.input

04/03/1995 (Yuhe Liu)
  Split namelist &sclrplt_cntl in arpsplt44.f into two namelist so that
  the continuation lines in defining the namelist became less than 20
  lines, which was required by some systems.

03/30/1995 (K. Brewster)
  Corrected error in Lambert Conformal scaling and added code to
  allow Lambert Tangent projection (lat1=lat2 in Lambert Conformal).
  Resulted in redefinition of projc1 for option 2.

03/29/1995 (M. Xue)
  Wrote subroutine ADJUVW to diagnose initial w and adjust u and v
  for mass continuity. ADJUVW is called by ext2arps.f and is
  included in wsolve.f. Both files are modified.

03/29/1995 (M. Xue)
  Added pressure detrending option. Files changed: initpara3d.f,
  tinteg3d.f, globcst.inc and bndry.inc.

03/29/1995 (M. Xue)
  Added subroutine GRDTRAN in grdtrns3d.f, which coordinates the
  cell-tracking and auto-trans function. GRDTRAN is called in arps40.f.
  Files affected: arps40.f, grdtrns3d.f, celtrk3d.f and make.arps40.
  Moved parameters cltkopt and tceltrk into namelist block grdtrans,
  and added parameter tcrestr.

03/29/1995 (M. Xue)
  Namelist variables names corrected in dir1deg.f, dir30sec.f
  and dir5min.f.

03/27/1995 (Yuhe Liu)
  Changed the solar radiation used in the calculation of surface
  resistance factor F1 from the one at the top of atmosphere to the
  one at the surface.

03/27/1995 (Yuhe Liu)
  Changed the formula of calculating the surface resistance factor
  F3 to F3=1, instead of varying with qvsat(Tair) and qvair.

03/27/1995 (Yuhe Liu)
  Added physical vertical coordinates array, zp(nx,ny,nz) into the
  display data sets in order for the GrADS to display zp and any
  other variables (interpolated) in the physical coordinates.


Version 4.0.16.

3/22/1995 (M. Xue)
  Moved subroutine setgrd from init3d.f into initpara3d.f.
  Removed init3d.f from the file list of ARPSSFC program.
  This was to avoid linking trouble encountered on IRIS.

03/22/1995 (K. Brewster)
  Introduced hydrostatic balancing for the external data set.
  ext2arps.f modified.

03/21/1995 (M. Xue)
  Added options to use latitude-dependent Coriolis parameters.
  Permanent array sinlat is added in arps40.f.
  File modified: arps40.f, tinteg3d.f, force3d.f, init3d.f, initpara3d.f,
  globcst.inc, and arps40.input.

03/21/1995 (M. Xue)
  Fixed a small bug in read3.f.

03/21/1995 (M. Xue)
  Added parameter pbldopt and pbldpth in arps40.input.
  initpara3d.f, globcst.inc are modified.
Removed all external statements that escaped earlier clean up.


Version 4.0.15

03/15/1995 (X. Song)
  Implemented anisotropic option of turbulence.
  Files modified include tmix3d.f and tke3d.f.

03/02/1995 (Y. Liu)
  Added the minimum surface total wind speed to guarantee the basic
  heat and moisture fluxes.

03/02/1995 (M. Xue and A. Shapiro)
  Fixed a significant bug in subroutine SOLVWPIM in solve3d.f, where
  rhostrw was mistakenly written as rhostru.

02/27/1995 (Min Zou)
  Specified the colors for q, p, and qs as chosen by user.

02/27/1995 (V. Wong, X. Song, and Y. Liu)
  Delete subroutines of calculating C_u and C_pt at the neutral state
  Make predicting procedure more consistent. Add a limiting parameter
  "blimit" to prevent the drag coefficients from becoming too small
  in the stable region.

02/15/1995 (A. Shapiro, S. Lazarus, E. Adlerman, and K. Brewster)
  Cleaned up the documentation in arps40.f, arps40.input, and
  arpsr2h30.f.

02/15/1995 (Keith Brewster)
  Fixed bugs for the lateral boundary condition corners affecting
  runs with radiation conditions on one or more sides mixed with
  with rigid or zero-gradient boundary conditions on other sides.
  Separated handling of externally-forced boundary condition from
  radiation.
  Affected file: bc3d.f

02/15/1995 (Min Zou)
  Fixed bugs for packed dumping which mistakenly put the 2-D arrays as
  3-D arrays in the dumping stream.
  Affected file: pakio3d.f

02/15/1995 (Min Zou)
  Fixed a minor bug in outlib3d.f.

02/07/1995 (Yuhe Liu)
  Added a new 2-D permanent array, veg(nx,ny), to the soil model and a
  new input parameter , veg0,t o the namelist, &soil_ebm
  Deleted table data array veg(14) from the common blocks..
  Affected files: arps40.f, arpsr2h30.f, exbcio3d.f, init3d.f, out3d.f,
                  rst3d.f, sfcphy3d.f, soildiag3d.f, soilebm3d.f,
                  tinteg3d.f, globcst.inc, arps40.input

02/07/1995 (Yuhe Liu)
  Added a new 2-D array, veg(nx,ny), in pre-processing program ARPSSFC
  to write veg(nx,ny) into the soil and vegetation data file.
  Affected files: arpssfc12.f, arpssfc.inc

01/28/1995 (Gene Bassett)
  Added new option, buoyopt, to turn buoyancy terms on or off;
  Added new option to pt0opt=5 for soup can shaped perturbation;
  Affected files: arps40.input, globcst.inc, force3d.f, init3d.f,
                  initpara3d.f, solve3d.f

01/28/1995 (V. Wong and X. Song)
  Add the option of stability and roughness dependent surface layer
  parameterization for both land and sea surfaces.
  Affected file: sfcphy3d.f, soilebm3d.f, and sfcphycst.inc (created)


Version 4.0.14

01/05/1995 (Y. Liu)
  Moved the call of EXTBDT from the end of integration of time step to
  the beginning of the step.
  Changed names of some subroutines of external boundary condition
  BCFRC* and BCSRC* to BRLX*.

02/07/1995 (Yuhe Liu)
  Fixed a bug in the calculation of surface precipitation used in soil
  model.
  Affected file: sfcphy3d.f

02/06/1995 (Yuhe Liu)
  Added a new compiling flag on Cray for micro_ice3d.f.
  Affected files: makearps and make.arps40

01/30/1995 (K. Brewster)
  Changes made to arpstern12.f: write file before doing any plotting.
  Affected file: arpstern12.f

01/28/1995 (Gene Bassett)
  Added namelist input for arpsr2h (&gridinit).
  Affected files: arps40.input

01/25/1995 (Yuhe Liu)
  Replaced arpssfc11.f by arpssfc12.f.
  Added the scheme that produce an artificial distribution of soil
  and vegetation parameters in a specified region in ARPS domain.
  New parameters, schmopt, fgbgni, fgendi, fgbgnj, fgendj, fgstyp,
  fgvtyp, fglai, fgrfns, bgstyp, bgvtyp, bglai, and bgrfns were added to
  NAMELIST &soil_veg_data in arps40.input
  Involved file: arpssfc11.f.

01/23/1995 (Keith, Brewster)
  Added temporary array avgzs_ext, replacing the use of tem1 which
  would not work if number of ext levels is greater than ARPS.

01/17/1995 (Keith, Brewster)
  Modified processing so that mean sounding would be for constant
  pressure surfaces rather than constant ARPS levels.

01/17/1995 (M. Xue)
  A few formulations in ICECVT modified to avoid overflow on
  36 bit machines.

01/15/1995 (M. Xue)
  arpsr2h30.f updated to comply with the latest data read routines.

01/14/1995 (M. Xue)
  Corrected where jacob was called in subroutine EXTINIT. It should
  be called before do loop 90.

01/13/1995 (Alan Shapiro, Steven Lazarus, Yvette Richardson)
  Documentation clean-up to arps40.input

01/13/1995 (Keith Brewster)
  Updated for latest database changes.
  Modified input parameters and code to allow for the request of a
  location by lat,lon location as well as by ARPS coordinate location.

01/08/1995 (M. Xue)
  A sample file to show the procedure of accessing the ARPS history
  file, arpsread.f, was added to the ARPS directory.

01/08/1995 (Keith Brewster)
  The methods to extract the sounding from ARPS model history data was
  corrected.

01/05/1995 (D. Weber)
  Set the default values of namelist variables.
  Updated variable name convention to ARPS.
  Changed aknot to knot, iantype to analtype, iproject to mapproj,
  alatpro1 to trulat1, alatpro2 to trulat2, alatpro to trulat,
  alonpro to trulon, sclf to sclfct.
  Related files: arpstern12.f and arpstern.input

12/28/1994 (M. Xue)
  Implemented a new open boundary condition. Only Klemp &
  Wilhelmson type open boundary condition in small time steps
  is now available. The radiation boundary conditions are applied
  to the normal velocity only. All other variables are solved
  from their equations directly. Option parameter prbcopt is
  removed. Files changed includes arps40.f, initpara3d.f, tinteg3d.f,
  solve3d.f, setbdt3d.f, globcst.inc, bndry.inc, and arps40.input.
  Subroutines RADBDT and ZEROBDT are removed, and BKWSMLDT added.

12/22/1994 (Y. Liu)
  Changed the unit of Wr from mm to m.
  Added runoff of the interception reservoir of vegetation in the soil
  model.

12/22/1994 (Y. Liu)
  Added three new parameters, ubar0 and vbar0 for base state wind when
  inibasopt != 1 and viniopt = 1, and strhtune for tuning the vertical
  stretching for option strhopt = 2.

12/21/1994 (Y. Liu)
  fixed a bug in micro_ice3d.f which mistakingly defined i, j, and k as
  real variables. These three are integers used to be array indices.

12/20/1994 (Alan Shapiro)
  Corrected and made the comments in arps40.input more precise.

12/20/1994 (Keith Brewster)
  Corrected and cleaned up the comments and default values in
  arpstern.input.


Version 4.0.13

12/19/1994 (Y. Liu)
  Fixed a bug in phycst.inc for water density rhow which was changed
  from 1 kg/m**3 to 1000 kg/m**3.

12/12/1994 (Y. Liu)
  Changed default values of variables in namelists to the same as
  in User's Guide and corrected the log file output.

12/06/1994 (Y. Liu)
  Added option -ncarg to makearps. Split subroutine plot from
  arpstern12.f and arpssfc11.f and made them to same one, ncarg3d.f.
  Added a dummy subroutine of plot, noncarg3d.f, for no NCAR graphics
  plot.

12/05/1994 (M. Xue)
  Introduced namelists to arpscvt program.

12/04/1994 (M. Zou and Y. Liu)
  Fixed several minor bugs in arpsplt44.f, xncar.f, tinteg3d.f, and
  other code.

11/29/1994 (Y. Liu)
  The expression format of time in ARPS changed from "mm-dd-yyyy" and
  "hh:mm:ss" to "yyyy-mm-dd.hh:mm:ss". Input variable inidate was
  removed.


Version 4.0.12

11/24/1994 (Y. Liu)
  Added control parameter viniopt for alternative base-state wind
  specification.

11/23/1994 (M. Xue)
  Added three layer vertical grid stretching option. Additional
  input parameters added in arps40.input. Init3d.f modified.

11/22/1994 (Xiaoguang Song and Yuhe Liu)
  Cleaned up the comments in PURPOSE blocks so that they will be
  consistent with those in User's Guide.

11/22/1994 (Y. Liu)
  Finalized the input namelist to be consistent with User's Guide.

11/22/1994 (Y. Liu)
  Finalized the script file, makearps, which provides user a interface
  to make ARPS model and its utilities.

11/01/1994 (Y. Liu)
  Subroutine name of soil model were changed from SFCEBM to SOILEBM.
  Changed the arguments in subroutine SOILEBM from 3-D temporary arrays
  to 2-D arrays and used more meaningful variable names.

11/01/1994 (A. Sathye)
  Changed the arguments in subroutine ICECVT from 3-D temporary arrays
  to 2-D arrays and used more meaningful variable names.


Version 4.0.11

11/11/1994 (L. Sun, M. Zou, and Y. Liu)
  Upgraded Savi3D package to Savi3D ?.?.?

11/02/1994 (E. Adlerman, K. Brewster, M. Xue)
  Added Weisman & Klemp analytical sounding, dew-point moisture
  and direction-speed options for moisture and wind in the sounding
  format. inibase3d.f and maproj3d.f were modified.

10/20/1994 (Yuhe Liu)
  Fixed a bug in the argument list of calling subroutine ICECVT.

10/17/1994 (M. Xue)
  Subroutines CMIX2PT and CMIX2Q combined into a single generic
  routine CMIX2S. Similarly CMIX4PT and CMIX4Q were combined into
  CMIS4S. tmix3d.f and cmix3d.f modified.

10/15/1994 (M. Xue)
  Removed ztrdmp form and added zrefsfc and trbisop to the input
  parameter list.  arps40.input, globcst.inc, initpara3d.f and
  raydmp3d.f were modified.

10/15/1994 (M. Xue)
  Computational mixing coefficients are now specified independent
  of the grid spacing. arps40.input, globcst.inc, tmix3d.f and
  initpara3d.f were modified.

10/10/1994 (Y. Liu)
  Added an option to grdsdump3d.f so that the history data can be
  dumped out at stager points.

10/10/1994 (Y. Lu and Y. Liu)
  Cleaned up the internal documentation in most of source code and
  merged them into this version.


Version 4.0.10

9/17/1994 (M. Xue)
  Option to solve temperature equation in small time step added.

Version 4.0.9

9/9/1994 (MX, X. Song and A. Sathye)
  Cleaned up ice microphysics code (in micro_ice3.f) and added
  correct call in CORDINTG.

9/9/1994 (M. Xue)
  globcst.inc cleaned up by B. Bassett. Parameters tacoef and
  inibasopt added.

9/9/1994 (M. Xue)
  w at z=0 now calculated from  -(avgx(avgz(u)*j1)+avgy(avgz(v)*j2))

9/8/1994 (M. Xue)
  Subroutine SOLVWPIM, WCONTA and TRIDIG re-written and SOLVWPEX
  modified.  Term -g*pprt/(rhobar*csndsq) in the buoyancy and
  the base state pressure advection (-rhobar*g*w) are now
  calculated in the small time steps, and treated implicitly
  in the vertically implicit solver for vimplct=1 option.

9/8/1994 (M. Xue)
  arps40.input, initpara3d.f, globcst.inc modified to account for
  an additional control parameter tacoef.

Version 4.0.8

9/7/1994 (M. Xue)
  Subroutine ADVP now calculated the advection of pprt only,
  and calls advcts to do so. FRCP in force3d.f and the call to FRCP
  in TINTEG are affected.

9/7/1994 (M. Xue)
  Term -g*pprt/(rhobar*csndsq) in the buoyancy and the base state
  pressure advection (-rhobar*g*w) are now calculated in the small
  time steps, but are treated explicitly in the vertically implicit
  solver. SOLVWPEX and SOLVWPIM modified.
  Subroutine PRTPARA and block data MPHYSCST removed.

9/5/1994 (M. Xue)
  Added permanent arrays csndsq for sound wave speed.
  Moved pprt/(rhobar*csndsq) in w-eq. and rhobar*w*g in p-eq.
  into small time step. The former were dropped from the
  w-eq. in arps4.0.6 and 4.0.7.

Version 4.0.7

9/1/1994 (Y. Lu)
  Cleaned up documentation.

9/1/1994 (M. Xue)
  Advection of base state pressure removed from the pressure
  equation.

9/1/1994 (M. Xue)
  w at z=0 set by u*dh/dx+v*dh/dy, and w at z=H set to 0.0 explicitly,
  instead of calculating from wcont.

9/1/1994 (M. Xue)
  Code to set top and bottom w boundary conditions changed in VBCW
  and SOLVWPIM. Affected files: solve3d.f, bc3d.f.

9/1/1994 (M. Xue)
  Pressure lower boundary condition restored to the original
  zero gradient condition (in bas3d.f).

8/29/1994 (A. Shapiro)
  Bug fix. Call to vbcwcont moved outside IF block in subroutine
  WCONTRA. NOTE: wcont bottom boundary condition always
  assumes non-penetrative condition.

8/27/1994 (M. Xue)
  init3d.f is split into initpara3d.f and init3d.f. make.arps40
  updated.

8/25/1994 (Y. Liu)
  Re-organized and cleaned up the codes related to the external
  boundary condition specification and the external data dump.
  Affected files include: arps40.f, dump3d.f, out3d.f, exbc3d.f,
  setbdt3d.f and sfcebm3d.f.

Version 4.0.6

  This version includes code that handles the external boundary
  condition.

8/10/1994 (M. Xue)
  Buoyancy formulation chanced. pprt removed from the term.
  force3d.f is the file changed.

8/10/1994 (M. Xue)
  Pressure open boundary condition modified. pressure is now
  solved from the p-eq. on the boundary. solve3d.f changed.

8/5/1994 (Y. Liu)
  Major overhaul of sfcebm3d.f.

7/15/1994 (M. Zou and M. Xue)
  New version of arpsplt41.f and arpspltlib.f.

7/15/1994 (M. Xue)
  Bug fix in micro_ice3d.f.

7/15/1994 (M. Xue)
  w(k=nz-1)=0.0 explicitly imposed in solvwpimp.
  Formulation for w top and bottom boundary conditions modified,
  The results should not be affected by these changes.

Version 4.0.5

7/10/1994 (M. Xue)
  Corrected option switch for scalar advection in solve3d.f

7/6/1994 (M. Xue)
  Fixed problem with comment_lines namelist printing in logfile
  (in subroutine prtlog in file init3d.f).

6/27/1994 (M.X and V.W.)
  Option to use different formula for the surface roughness length
  over the ocean.

6/1/1994 (M. Xue and A. Sathye)
  Lookup tables are used for power functions in microphysics routines.


Version 4.0.4

5/30/1994 (M. Xue)
  Subroutine BCIS2D, boundary routines for 2-D integer scalars added.

5/30/1994 (M. Xue)
  Added 2-D slice write and plotting routines.

5/23/1994 (M.X)
  Updated maproj3d.f.
  PIBAR, the base state Exner function is now precalculated and saved
  as a permanent array, files tinteg3d.f, arps40.f, micro3d.f, inibase3d.f
  are modified. Lookup table used to calculate temperature dependent
  latent heat of condensation.


Version 4.0.3

  4/27/1994 (M. Xue and G. Bassett)
  Inside init3d.f, EXTINIT changed to read regular history dump.

  4/27/1994 (M. Xue)
  In tmixe3d.f, rhobar is now passed into c-mix routines instead
  of rhostr, so that c-mixing operates on rhobar*phi rather than
  rhostr*phi.

  4/15/1994 (M. Xue, VW, YL, XS)
  Assembled the new surface physics and soil model package.

  4/1/1994 (M. Xue, VW and XS)
  1.5 TKE subgrid scale turbulence incorporated (V. Wong, M. Xue
  and X. Song).

Version 4.0.2

  New physics packages were added to this version and became
  version 4.0.3.

Version 4.0.1

  03/21/1994 (M. Xue)
  First assembled on 3/21/1994, based on arps33.wrk2.
  The unchanged arps33.wrk2 is in arps4.0.0.

Version 3.3

1/27/1994 M. Xue
Orlanski type RBC with boundary relaxation - rbcopt=1.
  Klemp & Wilhelmson type constant phase speed RBC with boundary
  relaxation - rbcopt=2.

1/27/1994 M. Xue
  Option ternopt=2 for reading in external terrain data.

1/18/1994 M. Xue
  Time step control changed (in arps33.f), so that time zero is always
  used as the reference time for output purpose.

1/06/1994 M. Xue
  Corrected IF test condition in loops 1724 and 1725 in subroutine
  BCV.

12/3/1993 A. Shapiro and M. Xue
  Added automatic grid translation capability.

11/30/1993 Ming Xue
  Automatic compression and decompression of history and restart
  files. compress and decompress are used for Cray, and gzip and
  gunzip are used for IBM. The output will always be compressed,
  the input can be either way. A user can specify a filename without
  the suffix .Z or .gz.

11/30/1993 M. Xue and A. Sathye
  NetCDF format history dump and read.
  hdmpfmt = 7 for NetCDF format dump
  hdmpfmt = 8 for 2-to-1 packed NetCDF dump

11/04/1993 Adwait Sathye
  Cleaned up maxmin printing and included ice variables (in subroutine
  MAXMIN in out3d.f), modified arpspltmax.f accordingly.

10/22/1993 M. Xue and Hao Jin.
  Vertical implicit solver for w and pprt cleaned up. A bug was found and
  fixed.

10/17/1993 A. Sathye
  Changed the namelist variables back to original ones. arps33.input and
  init3d.f changed.

10/15/1993 D. Weber.
  A bug fix in tmix3d.f when calculating wmix at the top and bottom
  boundaries. This bug will not affect runs with rigid top and bottom
  boundaries.

10/15/1993 M. Xue.
  A bug fix in subroutine CMIX2PT in file cmix3d.f. The same bug
  existed in ARPS 3.2.

10/12/1993 K. Brewster.
  arpsdiff11.f modified and renamed to arpsdiff12.f to reduce
  storage use.

9/27/1993 (A. Sathye and M. Xue)
  Correction in WRIGAR to avoid error for a large value of nx.

9/27/1990 (M. Xue)
  Fixes to the loop bounds in the Rayleigh damping routine to
  include the points at the lateral boundaries.

9/27/1990 (M. Xue)
  Automatically reset LBC options to periodic when 2-d or 1-d
  model run is selected. dzmin is reset to dz for non-stretching
  case.

9/25/1993 (A. Sathye and M. Xue)
  Namelist input file for arps33. Log file is in namelist format also.

9/20/1993 (M. Xue and HJ)
  Vertically implicit small step integration (Hao Jin)
  Option parameter added to the input file.

Version 3.2

Version 3.2 added the terrain and vertical stretching capabilities.

9/27/1993 (M. Xue)
  Automatically reset LBC options to periodic when 2-d or 1-d
  model run is selected. dzmin is reset to dz for non-stretching
  case.

9/3/1993 (M. Xue)
  Rayleigh damping calculation extended to include the lateral
  boundary points. File raydmp3d.f changed.

8/31/1993 (M. Xue)
  Corrections made in BWDIFZZ in bcdiff3d.f, which will only affect
  4th order vertical computational mixing.

8/10/1993 (M. Xue)
  arpsplt31.f upgraded to arpsplt32.f. More parameters are read
  in from the input file.  arpspltlib.f was also modified.

8/10/1993 (M. Xue)
  When tfmtprt, thisdmp, trstout, tmaxmin or tenergy is set to zero,
  the corresponding output is switched off.

8/1/1993 (M. Xue)
  IEEE format is now used on Cray.

5/21/1993 (M. Xue)
  Included Dan Weber's modifications to avgsw, avgsv and avgsw.

5/20/1993 (M. Xue)
  Corrected ebc,wbc in 'call bcsv..' to nbc,sbc
  in file operat3d.f

5/11/1993 (M. Xue)
  Correct wcont used in div damping, rhostr in micro3d.f

4/15/1993 (M. Xue)
  img3d.f: subroutines to write out HDF image files.
  Some calls to img3d added into arpsplt31.f.

4/10/1993 (M. Xue and Hao Jin)
  Add the terrain.

4/5/1993  (M. Xue)
  Data dump format changed. The dump data are now on staggered grid.

3/10/1993 (M. Xue)
  parameters for specifying advection options and terrain setup
  added.

3/08/1993 (M. Xue. and Y. Tang)
  Option of FCT advection scheme for scalars added.
  Though work is still needed on general options of
  lateral boundary conditions.

3/21/1994 (M. Xue)
  Consolidated changes into version 3.2, which is a version with
  vertical grid stretching and terrain capabilities.


ARPS version 3.1

ARPS Version 3.1 with improved lateral boundary conditions and corrected
buoyancy term made available to users.

4/19/1993 (M. Xue)
  inibase3d.f  Added code to print a sounding file at the grid levels,
               including rhobar.
  read3d.f     Added calculation of rhobar from ptbar and pbar.
  arpsplt31.f arpsplt.input Added reflectivity plotting/imaging.
  out3d.f      Added calls to img3d0 for reflectivity.
  reflec.f
  img3d.f      Name convention changed for image files.
  sharp2arps.f

4/15/1993 (M. Xue)
  img3d.f: subroutines to write out HDF image files.
  Similar calls to img3d added into arpsplt31.f.

4/15/1993 (M. Xue)
  Changes in arps31.official.new that are related to the
  way that output file names are constructed are consolidated
  into this version. Affected files include

4/13/1993 (M. Xue)
  Faulty index and loop bounds in the advection term calculations
  corrected. The change should not affect the results.

4/13/1993 (M. Xue)
  Subroutine maxmin modified to write more diagnostic info.
  arpspltmax.f modified to read the max/min file.
  Calls to maxmin in out3d.f and tinteg3d.f modified.

4/5/1993 (M. Xue)
  Data dump format changed. The dump data are now on staggered grid.
  Affected files are: dump3d.f hdfdump3d.f pakdump3d.f svidump3d.f
  read3d.f hdfread3d.f pakread3d.f arpscvt10.f arpsdiff10.f
  arpsextsnd.f arpsplt31.f arpsprt11.f
  (any routine that calls dtaread are affected).

  The plotting program version changed to 3.1. Makefiles are changed
  accordingly.

3/15/1993 (M. Xue)
  Major change in the way the file names are constructed.
  The files can now use less than 6 characters in the runname.
  Related changes are made in globcst.inc, init3d.f out3d.f,
  rst3d.f, svidump3d.f energy3d.f and arpsinit.f

3/10/1993 (M. Xue)
  An error with buoyancy term is corrected. This affects
  all previous results connected with water loading.

3/10/1993 (M. Xue)
  parameters for advection scheme options, and for terrain
  specifications added.

3/12/1993 (M. Xue)
  Subroutine GTRSTFN added and used to construct restart file name.
  Subroutine fnversn is called whenever possible.

  file fctadv.f added to the makefile.
  Modifications are made to the FCT routines.

3/08/1993 (M. Xue)
  Call to advptfct added. Files involved: solve3d.f arps31.f

3/01/1993 (M. Xue and S. Lazarus)
  The time level of history data dump is corrected. In all
  of the previous versions, the data dumped were at time tpast
  instead of tpresent.

12/02/1992 (M. Xue)
  Boundary time tendencies for w and pt, and water variables
  removed.

11/11/1992 (M. Xue)
  file arps3d.f split into two parts: arps30.f and tinteg3d.f

11/9/1992 (M. Xue)
  Parameter mgrid added to INITIAL, OUTPUT and CORDINTG argument list.
  Format of restart data i/o changed.

11/5/1992 (M. Xue)
  Work array svitem removed thanks to a better way of dumping Savi3D
  data. Subroutine SVIDUMP rewritten.

11/5/1992 (M. Xue)
  Generalized divergence operators divgsg, divgug, divgvg and
  divgwg written.

10/20/1992 (M Xue and Hao Jin)
  Modified the radiation lateral boundary conditions.


ARPS version 3.0 Released!

9/16/1992 (M. Xue)
  Full Coriolis formulation implemented.
  Surface flux formulations changed.

8/23/1992 (M. Xue)
  History dump calls streamlined. A single call to dtadump is now
  performed.
  8/04/1992 (M. Xue)
  History data dumping for Savi3D implemented. A lot of changes
  to the input file.

  Time tendencies at the lateral boundaries included in subroutines
  rstin and rstout.

8/03/1992 (M. Xue)
  The grid scale in the formula of divergence damping coefficient
  is changed from (dx*dy*dz)**(2/3) to min(dx,dy,dz)**2.
  This will affect the results compared with previous runs.

7/30/1992 (M. Xue and K. Brewster)
  Implemented new history data dump format (format version 3.0).
  Added packed binary history data dump option.

7/27/1992 (M. Xue)
  Added the option for initial random pt perturbation,
  model run mode control, option for 2 LBC formulations and that
  additional history dump format. The number of input parameters
  is increased


7/21/1992 (M. Xue)
  Subroutine name strlen changed to strlnth to avoid name conflict
  with the same name in C library.

7/21/1992 (M. Xue)
  Energy statistics calculations added. Affected files:
  energy.f, init3d.f, out3d.f and globcst.inc
  Input file is also changed.

7/10/1992 (M. Xue)
  Modified the history data dump format to include more
  data information.


7/9/1992 (M. Xue)
  Included the initial bubble size and location parameters in
  the read in parameter list.

7/8/1992 (M. Xue)
  A bug fix in subroutine inibase in do loop 30.

6/22/1992 (M. Xue)
  Documentation cleaned up after proof reading by users.
  Results not affected.

6/20/1992 (M. Xue)
  Corrections made in raydmp3d.f in two places.

6/11/1992 (M. Xue)
  uforce,vforce,wforce,pforce and usflx,vsflx,ptsflx and qvsflx
  removed from the main program and redefined as Temporary work arrays.

6/15/1992 (M Xue and Hao Jin)
  Implementation of Orlanski radiation boundary conditions.

6/06/1992 (Ming Xue)
  Regrouping of certain subroutines. Order of subroutine
  arguments changed in INIT, INITDVR, ADVP and SOLVPT.

  SOLVUVW, SOLVP, BCU, BCV, BCW and BCP modified to take in
  only fields at tfuture.

5/25/1992 (Ming Xue)
  Subroutine INIPARA rewritten to provide a more friendly
  user interface for setting control parameters.

  globcst.inc modified to define more control parameters.

5/23/1992 (Ming Xue)
  Three time levels instead of two are defined for water variables.
  Related structural changes made.  These structural changes
  cause the results to be slightly different from previous
  versions due to the order that time filter is applied to
  water variables. When time filter is switched off,
  both versions produced the same results.

5/21/1992 (Ming Xue)
  Subroutine advq added. Several subroutine names changed.

5/03/1992 (Ming Xue)
  Changed variable names, standardized documentation.

4/26/1992 (K. Droegemeier)
  Added full documentation

4/22/1992 (Ming Xue)
  Further face-lift per discussion with Kelvin
  Subroutine stepdt changed to cordintg, which is then split into
  calls to tinteg and acoust.
  Initialization routines re-organized.

4/21/1992 (Ming Xue)
  Rayleigh damping included.
  To be verified.

4/20/1992 (Ming Xue)
  Coriolis force terms added.
  To be verified.

4/20/1992 Version 2.3 (Ming Xue)
  Coordinate arrays x, y, z and zp added.
  Transformation Jacobians J1, J2 and J3 are calculated in inigrd.
  To be verified.

4/19/1992. (Ming Xue)
  Ice variables qi, qs and qh added.
  Results verified.

4/19/1992. (Ming Xue)
  Boundary conditions other than periodic implemented for the
  deformation tensor in subroutine bcdefm.

  Some of the loop bounds in bcdefm corrected which only affects the
  km field above the top and below the bottom boundary. Previous
  testing results are still valid since km values outside the
  top and bottom boundaries are not required.
  Results verified.

4/19/1992 (Ming Xue)
  The definition of Vaisala frequency above top and below bottom
  boundary modified in subroutine cftmix.
  Results verified.

4/17/1992 Version 2.2a (Ming Xue)
  Array name changes made.
  uflux, vflux, wflux, pflux, ptflux changed to
  uadv, vadv, wadv, padv and ptadv.

  udif, vdif, wdif, ptdif, qdif, qvdif changed to
  umix, vmix, wmix, ptmix, qmix, qvmix.
  variable names ckh2, ckv2, ckh4, ckv4 , kdif, cstkm
  changed to cfcmh2, cfcmv2, cfcmh4, cfcmv4, tmixopt, tmixcst.
  subroutine names basest, initia changed to inibase, initdvr.
  More documentation added.
  Results verified.

4/7/1992 (Ming Xue)
  A simple surface flux scheme added. These fluxes are calculated
  in subroutine sfcflx and passed into turbulent mixing
  subroutines.

4/1/1992  (Ming Xue)
  Model restart data dump and read capabilities added.

3/17/1992 (Ming Xue)
  Base state subroutine basest modified to read in an arbitrary
  base state sounding from a file

3/13/1992 (Ming Xue)
  Divergence damping added and results verified.

3/12/1992 (Ming Xue)

  Arrays uflux,vflux,wflux,udif,vdif,wdif,pflux,wbuoy,psrc
  removed from the main program.
  Arrays uforce,vforce,wforce and pforce added.
  All acoustically inactive forcing terms are now added
  together and stored in a single forcing array for each variable.
  Results are not affected by the structural change.

3/11/1992 (Ming Xue)
  Main program restructured.
  Subroutines initout, output and chkstab added.
  History dump routines rewritten.
  Model results are not affected by the structural change.

2/29/1992 (Ming Xue)
  Water quantity arrays are defined at two time levels.
  Warm microphysics parameterization included.
  Model results for dry case are not affected by this addition.

2/28/1992 (Ming Xue)
  Major restructuring of the model.
  work arrays urho, vrho, wrho, ptdif, qvdif, qcdif,
  qrdif removed from the main program.

  The diffusion terms for scalars are calculated where they are used.
  Diffusion/mixing subroutines now take input arrays at a single
  time level.

11/20/1991 (Ming Xue)
  Add the options to use three different formulations of the advection terms.

11/01/1991 (Ming Xue)
  Smagorinsky's subgrid scale turbulence and related options added.

10/01/1991  (Ming Xue)
  Model dynamic framework finished.
